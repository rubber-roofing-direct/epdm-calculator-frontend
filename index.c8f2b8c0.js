let e,t,i;function r(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}function s(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},l=n.parcelRequirec08f;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},n.parcelRequirec08f=l);var h=l.register;h("7UyAW",function(e,t){r(e.exports,"ExtensionType",function(){return s}),r(e.exports,"extensions",function(){return o});var i,s=((i=s||{}).Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i);let n=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw Error("Extension class must have an extension object");let t="object"!=typeof e.extension?{type:e.extension}:e.extension;e={...t,ref:e}}if("object"==typeof e)e={...e};else throw Error("Invalid extension type");return"string"==typeof e.type&&(e.type=[e.type]),e},a=(e,t)=>n(e).priority??t,o={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(n).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(n).forEach(e=>{e.type.forEach(t=>{let i=this._addHandlers,r=this._queue;i[t]?i[t]?.(e):(r[t]=r[t]||[],r[t]?.push(e))})}),this},handle(e,t,i){let r=this._addHandlers,s=this._removeHandlers;if(r[e]||s[e])throw Error(`Extension type ${e} already has a handler`);r[e]=t,s[e]=i;let n=this._queue;return n[e]&&(n[e]?.forEach(e=>t(e)),delete n[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(e,t,i=-1){return this.handle(e,e=>{let r=t.findIndex(t=>t.name===e.name);r>=0||(t.push({name:e.name,value:e.ref}),t.sort((e,t)=>a(t.value,i)-a(e.value,i)))},e=>{let i=t.findIndex(t=>t.name===e.name);-1!==i&&t.splice(i,1)})},handleByList(e,t,i=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>a(t,i)-a(e,i)))},e=>{let i=t.indexOf(e.ref);-1!==i&&t.splice(i,1)})}}}),h("3Lm7a",function(e,t){var i=l("jn42J");e.exports=Promise.all([i("6v9PQ"),i("lm37x"),i("9ystt")]).then(()=>l("i57Uj"))}),h("jn42J",function(e,t){e.exports=function(e){return import(l("f0i8p").resolve(e))}}),h("eAzCZ",function(e,t){var i=l("jn42J");e.exports=Promise.all([i("6v9PQ"),i("lm37x"),i("8BVkU")]).then(()=>l("6tj4f"))}),h("eOqm1",function(e,t){var i=l("7UyAW"),r=l("169JZ"),s=l("6aJ47"),n=l("8tyVB"),a=l("EyB6C"),o=l("6F59Q"),h=l("8fdRE"),d=l("1VIfK");l("ioQaX"),(0,i.extensions).add(r.AlphaMask,s.ColorMask,n.StencilMask,d.VideoSource,h.ImageSource,o.CanvasSource,a.BufferImageSource)}),h("169JZ",function(e,t){r(e.exports,"AlphaMask",function(){return o});var i=l("7UyAW"),s=l("53uEv"),n=l("en5ri"),a=l("9VG9u");class o{constructor(e){this.priority=0,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof s.Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){(0,n.addMaskBounds)(this.mask,e,t)}addLocalBounds(e,t){(0,a.addMaskLocalBounds)(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof s.Sprite}}o.extension=i.ExtensionType.MaskEffect}),h("53uEv",function(e,t){r(e.exports,"Sprite",function(){return o});var i=l("8tYGw"),s=l("9SDHC"),n=l("aJdxs"),a=l("2VOjZ");class o extends a.Container{constructor(e=s.Texture.EMPTY){e instanceof s.Texture&&(e={texture:e});let{texture:t,anchor:r,roundPixels:n,width:a,height:o,...l}=e;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new i.ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=n??!1,a&&(this.width=a),o&&(this.height=o)}static from(e,t=!1){return new o(e instanceof s.Texture?e:(0,s.Texture).from(e,t))}set texture(e){e||(e=s.Texture.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(e){let t=this.sourceBounds;return e.x>=t.maxX&&e.x<=t.minX&&e.y>=t.maxY&&e.y<=t.minY}addBounds(e){let t=this._texture.trim?this.sourceBounds:this.bounds;e.addFrame(t.minX,t.minY,t.maxX,t.maxY)}onViewUpdate(){this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_updateBounds(){(0,n.updateQuadBounds)(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){let e=this._anchor,t=this._texture,i=this._sourceBounds,{width:r,height:s}=t.orig;i.maxX=-e._x*r,i.minX=i.maxX+r,i.maxY=-e._y*s,i.minY=i.maxY+s}destroy(e=!1){super.destroy(e);let t="boolean"==typeof e?e:e?.texture;if(t){let t="boolean"==typeof e?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width)}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){let i,r;"object"!=typeof e?(i=e,r=t??e):(i=e.width,r=e.height??e.width),void 0!==i&&this._setWidth(i,this._texture.orig.width),void 0!==r&&this._setHeight(r,this._texture.orig.height)}}}),h("8tYGw",function(e,t){r(e.exports,"ObservablePoint",function(){return i});class i{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new i(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}}),h("9SDHC",function(e,t){r(e.exports,"Texture",function(){return g});var i=l("jFrz2"),n=l("3x2sD"),a=l("04zBf"),o=l("hAZ3a"),h=l("5k13c"),d=l("3P5MJ"),c=l("EyB6C"),u=l("ihvxQ"),p=l("3XAuw");class g extends s(i){constructor({source:e,label:t,frame:i,orig:r,trim:s,defaultAnchor:n,defaultBorders:l,rotate:h,dynamic:d}={}){if(super(),this.uid=(0,o.uid)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new a.Rectangle,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new u.TextureSource,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:e,height:t}=this._source;this.frame.width=e,this.frame.height=t}this.orig=r||this.frame,this.trim=s,this.rotate=h??0,this.defaultAnchor=n,this.defaultBorders=l,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new p.TextureMatrix(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:i,height:r}=this._source,s=t.x/i,a=t.y/r,o=t.width/i,l=t.height/r,h=this.rotate;if(h){let t=o/2,i=l/2,r=s+t,d=a+i;h=(0,n.groupD8).add(h,n.groupD8.NW),e.x0=r+t*(0,n.groupD8).uX(h),e.y0=d+i*(0,n.groupD8).uY(h),h=(0,n.groupD8).add(h,2),e.x1=r+t*(0,n.groupD8).uX(h),e.y1=d+i*(0,n.groupD8).uY(h),h=(0,n.groupD8).add(h,2),e.x2=r+t*(0,n.groupD8).uX(h),e.y2=d+i*(0,n.groupD8).uY(h),h=(0,n.groupD8).add(h,2),e.x3=r+t*(0,n.groupD8).uX(h),e.y3=d+i*(0,n.groupD8).uY(h)}else e.x0=s,e.y0=a,e.x1=s+o,e.y1=a,e.x2=s+o,e.y2=a+l,e.x3=s,e.y3=a+l}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,h.deprecation)(h.v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}}g.EMPTY=new g({label:"EMPTY",source:new u.TextureSource({label:"EMPTY"})}),g.EMPTY.destroy=d.NOOP,g.WHITE=new g({source:new c.BufferImageSource({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),g.WHITE.destroy=d.NOOP}),h("jFrz2",function(e,t){var i=Object.prototype.hasOwnProperty,r="~";function s(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(e,t,i,s,a){if("function"!=typeof i)throw TypeError("The listener must be a function");var o=new n(i,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,s=[];if(0===this._eventsCount)return s;for(t in e=this._events)i.call(e,t)&&s.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},l.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,n=i.length,a=Array(n);s<n;s++)a[s]=i[s].fn;return a},l.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,s,n,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,h,d=this._events[o],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,s),!0;case 5:return d.fn.call(d.context,t,i,s,n),!0;case 6:return d.fn.call(d.context,t,i,s,n,a),!0}for(h=1,l=Array(c-1);h<c;h++)l[h-1]=arguments[h];d.fn.apply(d.context,l)}else{var u,p=d.length;for(h=0;h<p;h++)switch(d[h].once&&this.removeListener(e,d[h].fn,void 0,!0),c){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,t);break;case 3:d[h].fn.call(d[h].context,t,i);break;case 4:d[h].fn.call(d[h].context,t,i,s);break;default:if(!l)for(u=1,l=Array(c-1);u<c;u++)l[u-1]=arguments[u];d[h].fn.apply(d[h].context,l)}}return!0},l.prototype.on=function(e,t,i){return a(this,e,t,i,!1)},l.prototype.once=function(e,t,i){return a(this,e,t,i,!0)},l.prototype.removeListener=function(e,t,i,s){var n=r?r+e:e;if(!this._events[n])return this;if(!t)return o(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||s&&!a.once||i&&a.context!==i||o(this,n);else{for(var l=0,h=[],d=a.length;l<d;l++)(a[l].fn!==t||s&&!a[l].once||i&&a[l].context!==i)&&h.push(a[l]);h.length?this._events[n]=1===h.length?h[0]:h:o(this,n)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}),h("3x2sD",function(e,t){r(e.exports,"groupD8",function(){return u});var i=l("7Qkzy");let s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],o=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],d=[],c=Math.sign;!function(){for(let e=0;e<16;e++){let t=[];h.push(t);for(let i=0;i<16;i++){let r=c(s[e]*s[i]+a[e]*n[i]),l=c(n[e]*s[i]+o[e]*n[i]),h=c(s[e]*a[i]+a[e]*o[i]),d=c(n[e]*a[i]+o[e]*o[i]);for(let e=0;e<16;e++)if(s[e]===r&&n[e]===l&&a[e]===h&&o[e]===d){t.push(e);break}}}for(let e=0;e<16;e++){let t=new i.Matrix;t.set(s[e],n[e],a[e],o[e],0,0),d.push(t)}}();let u={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>s[e],uY:e=>n[e],vX:e=>a[e],vY:e=>o[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>h[e][t],sub:(e,t)=>h[e][u.inv(t)],rotate180:e=>4^e,isVertical:e=>(3&e)==2,byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?u.S:u.N:2*Math.abs(t)<=Math.abs(e)?e>0?u.E:u.W:t>0?e>0?u.SE:u.SW:e>0?u.NE:u.NW,matrixAppendRotationInv:(e,t,i=0,r=0)=>{let s=d[u.inv(t)];s.tx=i,s.ty=r,e.append(s)}}}),h("7Qkzy",function(e,t){r(e.exports,"Matrix",function(){return n});var i=l("7gxUy"),s=l("aSHqW");class n{constructor(e=1,t=0,i=0,r=1,s=0,n=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=n}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,n){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=n,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i}apply(e,t){t=t||new s.Point;let i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new s.Point;let i=this.a,r=this.b,n=this.c,a=this.d,o=this.tx,l=this.ty,h=1/(i*a+-(n*r)),d=e.x,c=e.y;return t.x=a*h*d+-n*h*c+(l*n-o*a)*h,t.y=i*h*c+-r*h*d+(-l*i+o*r)*h,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,n=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=n*t-this.ty*i,this.ty=n*i+this.ty*t,this}append(e){let t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}appendFrom(e,t){let i=e.a,r=e.b,s=e.c,n=e.d,a=e.tx,o=e.ty,l=t.a,h=t.b,d=t.c,c=t.d;return this.a=i*l+r*d,this.b=i*h+r*c,this.c=s*l+n*d,this.d=s*h+n*c,this.tx=a*l+o*d+t.tx,this.ty=a*h+o*c+t.ty,this}setTransform(e,t,i,r,s,n,a,o,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-o)*n,this.d=Math.cos(a-o)*n,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){let t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){let t=this.a,i=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,r=this.b,s=this.c,n=this.d,a=e.pivot,o=-Math.atan2(-s,n),l=Math.atan2(r,t),h=Math.abs(o+l);return h<1e-5||1e-5>Math.abs(i.PI_2-h)?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(s*s+n*n),e.position.x=this.tx+(a.x*t+a.y*s),e.position.y=this.ty+(a.x*r+a.y*n),e}invert(){let e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,n=e*r-t*i;return this.a=r/n,this.b=-t/n,this.c=-i/n,this.d=e/n,this.tx=(i*this.ty-r*s)/n,this.ty=-(e*this.ty-t*s)/n,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return o.identity()}static get shared(){return a.identity()}}let a=new n,o=new n}),h("7gxUy",function(e,t){r(e.exports,"PI_2",function(){return i}),r(e.exports,"RAD_TO_DEG",function(){return s}),r(e.exports,"DEG_TO_RAD",function(){return n});let i=2*Math.PI,s=180/Math.PI,n=Math.PI/180}),h("aSHqW",function(e,t){r(e.exports,"Point",function(){return i});class i{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new i(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return s.x=0,s.y=0,s}}let s=new i}),h("04zBf",function(e,t){r(e.exports,"Rectangle",function(){return n});var i=l("aSHqW");let s=[new i.Point,new i.Point,new i.Point,new i.Point];class n{constructor(e=0,t=0,i=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new n(0,0,0,0)}clone(){return new n(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return!(this.width<=0)&&!(this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i){let{width:r,height:s}=this;if(r<=0||s<=0)return!1;let n=this.x,a=this.y;return e>=n-i/2&&e<=n+r+i/2&&t>=a-i/2&&t<=a+s+i/2&&!(e>n+i/2&&e<n+r-i/2&&t>a+i/2&&t<a+s-i/2)}intersects(e,t){if(!t){let t=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=t)return!1;let r=this.y<e.y?e.y:this.y,s=this.bottom>e.bottom?e.bottom:this.bottom;return s>r}let i=this.left,r=this.right,n=this.top,a=this.bottom;if(r<=i||a<=n)return!1;let o=s[0].set(e.left,e.top),l=s[1].set(e.left,e.bottom),h=s[2].set(e.right,e.top),d=s[3].set(e.right,e.bottom);if(h.x<=o.x||l.y<=o.y)return!1;let c=Math.sign(t.a*t.d-t.b*t.c);if(0===c||(t.apply(o,o),t.apply(l,l),t.apply(h,h),t.apply(d,d),Math.max(o.x,l.x,h.x,d.x)<=i||Math.min(o.x,l.x,h.x,d.x)>=r||Math.max(o.y,l.y,h.y,d.y)<=n||Math.min(o.y,l.y,h.y,d.y)>=a))return!1;let u=c*(l.y-o.y),p=c*(o.x-l.x),g=u*i+p*n,f=u*r+p*n,m=u*i+p*a,x=u*r+p*a;if(Math.max(g,f,m,x)<=u*o.x+p*o.y||Math.min(g,f,m,x)>=u*d.x+p*d.y)return!1;let y=c*(o.y-h.y),b=c*(h.x-o.x),v=y*i+b*n,w=y*r+b*n,_=y*i+b*a,k=y*r+b*a;return!(Math.max(v,w,_,k)<=y*o.x+b*o.y||Math.min(v,w,_,k)>=y*d.x+b*d.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){let t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){let i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}getBounds(e){return(e=e||new n).copyFrom(this),e}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}}),h("hAZ3a",function(e,t){r(e.exports,"uid",function(){return s});let i={default:-1};function s(e="default"){return void 0===i[e]&&(i[e]=-1),++i[e]}}),h("5k13c",function(e,t){r(e.exports,"v8_0_0",function(){return s}),r(e.exports,"deprecation",function(){return n});let i={},s="8.0.0";function n(e,t,r=3){if(i[t])return;let s=Error().stack;void 0===s?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(s=s.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(s))),i[t]=!0}}),h("3P5MJ",function(e,t){r(e.exports,"NOOP",function(){return i});let i=()=>{}}),h("EyB6C",function(e,t){r(e.exports,"BufferImageSource",function(){return n});var i=l("7UyAW"),s=l("ihvxQ");class n extends s.TextureSource{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array?i="rgba32uint":t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array?i="rgba16uint":t instanceof Uint16Array?i="rgba16uint":(Int8Array,i="bgra8unorm")),super({...e,resource:t,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}n.extension=i.ExtensionType.TextureSource}),h("ihvxQ",function(e,t){r(e.exports,"TextureSource",function(){return c});var i=l("jFrz2"),n=l("kBt2l"),a=l("azzuE"),o=l("hAZ3a"),h=l("eDUMw");let d=class e extends s(i){constructor(t={}){super(),this.options=t,this.uid=(0,o.uid)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,o.uid)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...e.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new h.TextureStyle((0,a.definedProps)(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution,t=this.resize(this.resourceWidth/e,this.resourceHeight/e);if(t)return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,o.uid)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i=i||this._resolution,e=e||this.width,t=t||this.height;let r=Math.round(e*i),s=Math.round(t*i);return this.width=r/i,this.height=s/i,this._resolution=i,(this.pixelWidth!==r||this.pixelHeight!==s)&&(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=(0,o.uid)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,n.isPow2)(this.pixelWidth)&&(0,n.isPow2)(this.pixelHeight)}static test(e){throw Error("Unimplemented")}};d.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let c=d}),h("kBt2l",function(e,t){function i(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function s(e){return!(e&e-1)&&!!e}r(e.exports,"nextPow2",function(){return i}),r(e.exports,"isPow2",function(){return s})}),h("azzuE",function(e,t){r(e.exports,"definedProps",function(){return i});function i(e){let t={};for(let i in e)void 0!==e[i]&&(t[i]=e[i]);return t}}),h("eDUMw",function(e,t){r(e.exports,"TextureStyle",function(){return d});var i=l("jFrz2"),n=l("hAZ3a"),a=l("5k13c");let o=Object.create(null),h=class e extends s(i){constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...e.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){(0,a.deprecation)(a.v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(e){let t=o[e];return void 0===t&&(o[e]=(0,n.uid)("resource")),t}(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};h.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let d=h}),h("3XAuw",function(e,t){r(e.exports,"TextureMatrix",function(){return n});var i=l("7Qkzy");let s=new i.Matrix;class n{constructor(e,t){this.mapCoord=new i.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,void 0===t?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){void 0===t&&(t=e);let i=this.mapCoord;for(let r=0;r<e.length;r+=2){let s=e[r],n=e[r+1];t[r]=s*i.a+n*i.c+i.tx,t[r+1]=s*i.b+n*i.d+i.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let i=e.orig,r=e.trim;r&&(s.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(s));let n=e.source,a=this.uClampFrame,o=this.clampMargin/n._resolution,l=this.clampOffset;return a[0]=(e.frame.x+o+l)/n.width,a[1]=(e.frame.y+o+l)/n.height,a[2]=(e.frame.x+e.frame.width-o+l)/n.width,a[3]=(e.frame.y+e.frame.height-o+l)/n.height,this.uClampOffset[0]=l/n.pixelWidth,this.uClampOffset[1]=l/n.pixelHeight,this.isSimple=e.frame.width===n.width&&e.frame.height===n.height&&0===e.rotate,!0}}}),h("aJdxs",function(e,t){r(e.exports,"updateQuadBounds",function(){return i});function i(e,t,i,r){let{width:s,height:n}=i.orig,a=i.trim;if(a){let i=a.width,o=a.height;e.minX=a.x-t._x*s-r,e.maxX=e.minX+i,e.minY=a.y-t._y*n-r,e.maxY=e.minY+o}else e.minX=-t._x*s-r,e.maxX=e.minX+s,e.minY=-t._y*n-r,e.maxY=e.minY+n}}),h("2VOjZ",function(e,t){r(e.exports,"UPDATE_COLOR",function(){return A}),r(e.exports,"UPDATE_BLEND",function(){return S}),r(e.exports,"UPDATE_VISIBLE",function(){return M}),r(e.exports,"Container",function(){return E});var i=l("jFrz2"),n=l("jhEJH"),a=l("2Y2EP"),o=l("7Qkzy"),h=l("7gxUy"),d=l("8tYGw"),c=l("hAZ3a"),u=l("5k13c"),p=l("8G9cp"),g=l("kEBag"),f=l("gIgfG"),m=l("6ODvX"),x=l("jaFVT"),y=l("4Qd7g"),b=l("dA4wx"),v=l("g3yBE"),w=l("i0iae");let _=new d.ObservablePoint(null),k=new d.ObservablePoint(null),P=new d.ObservablePoint(null,1,1),A=1,S=2,M=4;class E extends s(i){constructor(e={}){super(),this.uid=(0,c.uid)("renderable"),this._updateFlags=15,this.isRenderGroupRoot=!1,this.renderGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new o.Matrix,this.relativeGroupTransform=new o.Matrix,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new d.ObservablePoint(this,0,0),this._scale=P,this._pivot=k,this._skew=_,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1,(0,w.assignWithIgnore)(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(e=>this.addChild(e)),this.effects=[],e.parent?.addChild(this)}static mixin(e){Object.defineProperties(E.prototype,Object.getOwnPropertyDescriptors(e))}addChild(...e){if(this.allowChildren||(0,u.deprecation)(u.v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let t=0;t<e.length;t++)this.addChild(e[t]);return e[0]}let t=e[0];return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),0!==t._zIndex&&t.depthOfChildModified()),t}removeChild(...e){if(e.length>1){for(let t=0;t<e.length;t++)this.removeChild(e[t]);return e[0]}let t=e[0],i=this.children.indexOf(t);return i>-1&&(this.children.splice(i,1),this.renderGroup&&this.renderGroup.removeChild(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){if(e&&e===this._skew&&this._updateSkew(),this._didChangeId++,!this.didChange){if(this.didChange=!0,this.isRenderGroupRoot){let e=this.renderGroup.renderGroupParent;e&&e.onChildUpdate(this)}else this.renderGroup&&this.renderGroup.onChildUpdate(this)}}set isRenderGroup(e){if(this.isRenderGroupRoot&&!1===e)throw Error("[Pixi] cannot undo a render group just yet");e&&this.enableRenderGroup()}get isRenderGroup(){return this.isRenderGroupRoot}enableRenderGroup(){if(this.renderGroup&&this.renderGroup.root===this)return;this.isRenderGroupRoot=!0;let e=this.renderGroup;if(e&&e.removeChild(this),this.renderGroup=new v.RenderGroup(this),e){for(let t=0;t<e.renderGroupChildren.length;t++){let i=e.renderGroupChildren[t],r=i.root;for(;r;){if(r===this){this.renderGroup.addRenderGroupChild(i);break}r=r.parent}}e.addRenderGroupChild(this.renderGroup)}this._updateIsSimple(),this.groupTransform=o.Matrix.IDENTITY}_updateIsSimple(){this.isSimple=!this.isRenderGroupRoot&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new o.Matrix),this.renderGroup&&(this.isRenderGroupRoot?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this._worldTransform.appendFrom(this.relativeGroupTransform,this.renderGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*h.RAD_TO_DEG}set angle(e){this.rotation=e*h.DEG_TO_RAD}get pivot(){return this._pivot===k&&(this._pivot=new d.ObservablePoint(this,0,0)),this._pivot}set pivot(e){this._pivot===k&&(this._pivot=new d.ObservablePoint(this,0,0)),"number"==typeof e?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===_&&(this._skew=new d.ObservablePoint(this,0,0)),this._skew}set skew(e){this._skew===_&&(this._skew=new d.ObservablePoint(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===P&&(this._scale=new d.ObservablePoint(this,1,1)),this._scale}set scale(e){this._scale===P&&(this._scale=new d.ObservablePoint(this,0,0)),"number"==typeof e?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){let i,r;let s=this.getLocalBounds();"object"!=typeof e?(i=e,r=t??e):(i=e.width,r=e.height??e.width),void 0!==i&&this._setWidth(i,s.width),void 0!==r&&this._setHeight(r,s.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set("number"==typeof e.x?e.x:this.position.x,"number"==typeof e.y?e.y:this.position.y),this.scale.set("number"==typeof e.scaleX?e.scaleX||1:this.scale.x,"number"==typeof e.scaleY?e.scaleY||1:this.scale.y),this.rotation="number"==typeof e.rotation?e.rotation:this.rotation,this.skew.set("number"==typeof e.skewX?e.skewX:this.skew.x,"number"==typeof e.skewY?e.skewY:this.skew.y),this.pivot.set("number"==typeof e.pivotX?e.pivotX:this.pivot.x,"number"==typeof e.pivotY?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){if((15&this._didLocalTransformChangeId)===this._didChangeId)return;this._didLocalTransformChangeId=this._didChangeId;let e=this.localTransform,t=this._scale,i=this._pivot,r=this._position,s=t._x,n=t._y,a=i._x,o=i._y;e.a=this._cx*s,e.b=this._sx*s,e.c=this._cy*n,e.d=this._sy*n,e.tx=r._x-(a*e.a+o*e.c),e.ty=r._y-(a*e.b+o*e.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=A,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=(0,n.Color).shared.setValue(e??16777215),i=t.toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=A,this._onUpdate())}get tint(){let e=this.localColor;return((255&e)<<16)+(65280&e)+(e>>16&255)}set blendMode(e){this.localBlendMode!==e&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=S,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(e){(2&this.localDisplayStatus)>>1!=(e?1:0)&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=M,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(e){(4&this.localDisplayStatus)>>2!=(e?1:0)&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=M,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(e){(1&this.localDisplayStatus)!=(e?1:0)&&(this._updateFlags|=M,this.localDisplayStatus^=1,this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();let t="boolean"==typeof e?e:e?.children,i=this.removeChildren(0,this.children.length);if(t)for(let t=0;t<i.length;++t)i[t].destroy(e)}}E.mixin(p.childrenHelperMixin),E.mixin(b.toLocalGlobalMixin),E.mixin(x.onRenderMixin),E.mixin(m.measureMixin),E.mixin(g.effectsMixin),E.mixin(f.findMixin),E.mixin(y.sortMixin),E.mixin(a.cullingMixin)}),h("jhEJH",function(e,t){r(e.exports,"Color",function(){return a});var i=l("965hb"),s=l("alPzF");(0,i.extend)([s.default]);let n=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else if(null===t)throw Error("Cannot set Color#value to null");else null!==this._value&&this._isSourceEqual(this._value,t)||(this._normalize(t),this._value=this._cloneSource(t))}get value(){return this._value}_cloneSource(e){if("string"==typeof e||"number"==typeof e||e instanceof Number||null===e);else if(Array.isArray(e)||ArrayBuffer.isView(e))return e.slice(0);else if("object"==typeof e&&null!==e)return{...e};return e}_isSourceEqual(e,t){let i=typeof e,r=typeof t;if(i!==r)return!1;if("number"===i||"string"===i||e instanceof Number);else if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,i)=>e===t[i]);else if(null!==e&&null!==t){let i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every(i=>e[i]===t[i])}return e===t}toRgba(){let[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),(e=e||this._arrayRgb)[0]=Math.round(255*t),e[1]=Math.round(255*i),e[2]=Math.round(255*r),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e=e||this._arrayRgba;let[t,i,r,s]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb;let[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){let[i,r,s,n]=e._temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=r,this._components[2]*=s,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return -16777216+this._int;if(0===e)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=255&this._int;return t&&(i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(255*e<<24)+(i<<16)+(r<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(255*this._components[3]),t=e.toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(t){let r,s,n,a;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){let e=t;r=(e>>16&255)/255,s=(e>>8&255)/255,n=(255&e)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[r,s,n,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[r,s,n,a=255]=t,r/=255,s/=255,n/=255,a/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){let i=e.HEX_PATTERN.exec(t);i&&(t=`#${i[2]}`)}let o=(0,i.colord)(t);o.isValid()&&({r:r,g:s,b:n,a:a}=o.rgba,r/=255,s/=255,n/=255)}if(void 0!==r)this._components[0]=r,this._components[1]=s,this._components[2]=n,this._components[3]=a,this._refreshInt();else throw Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*i|0)}_clamp(e,t=0,i=1){return"number"==typeof e?Math.min(Math.max(e,t),i):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),i)}),e)}static isColorLike(t){return"number"==typeof t||"string"==typeof t||t instanceof Number||t instanceof e||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||void 0!==t.r&&void 0!==t.g&&void 0!==t.b||void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.l||void 0!==t.h&&void 0!==t.s&&void 0!==t.l&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.v||void 0!==t.h&&void 0!==t.s&&void 0!==t.v&&void 0!==t.a}};n.shared=new n,n._temp=new n,n.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let a=n}),h("965hb",function(e,t){r(e.exports,"colord",function(){return E}),r(e.exports,"extend",function(){return T});var i={grad:.9,turn:360,rad:360/(2*Math.PI)},s=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},n=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},a=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},l=function(e){return{r:a(e.r,0,255),g:a(e.g,0,255),b:a(e.b,0,255),a:a(e.a)}},h=function(e){return{r:n(e.r),g:n(e.g),b:n(e.b),a:n(e.a,3)}},d=/^#([0-9a-f]{3,8})$/i,c=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},u=function(e){var t=e.r,i=e.g,r=e.b,s=e.a,n=Math.max(t,i,r),a=n-Math.min(t,i,r),o=a?n===t?(i-r)/a:n===i?2+(r-t)/a:4+(t-i)/a:0;return{h:60*(o<0?o+6:o),s:n?a/n*100:0,v:n/255*100,a:s}},p=function(e){var t=e.h,i=e.s,r=e.v,s=e.a;t=t/360*6,i/=100,r/=100;var n=Math.floor(t),a=r*(1-i),o=r*(1-(t-n)*i),l=r*(1-(1-t+n)*i),h=n%6;return{r:255*[r,o,a,a,l,r][h],g:255*[l,r,r,o,a,a][h],b:255*[a,a,l,r,r,o][h],a:s}},g=function(e){return{h:o(e.h),s:a(e.s,0,100),l:a(e.l,0,100),a:a(e.a)}},f=function(e){return{h:n(e.h),s:n(e.s),l:n(e.l),a:n(e.a,3)}},m=function(e){var t,i;return p((t=e.s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}))},x=function(e){var t,i,r,s;return{h:(t=u(e)).h,s:(s=(200-(i=t.s))*(r=t.v)/100)>0&&s<200?i*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a}},y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_={string:[[function(e){var t=d.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?n(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?n(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||w.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:l({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t,r,s=y.exec(e)||b.exec(e);return s?m(g({h:(t=s[1],void 0===(r=s[2])&&(r="deg"),Number(t)*(i[r]||1)),s:Number(s[3]),l:Number(s[4]),a:void 0===s[5]?1:Number(s[5])/(s[6]?100:1)})):null},"hsl"]],object:[[function(e){var t=e.r,i=e.g,r=e.b,n=e.a;return s(t)&&s(i)&&s(r)?l({r:Number(t),g:Number(i),b:Number(r),a:Number(void 0===n?1:n)}):null},"rgb"],[function(e){var t=e.h,i=e.s,r=e.l,n=e.a;return s(t)&&s(i)&&s(r)?m(g({h:Number(t),s:Number(i),l:Number(r),a:Number(void 0===n?1:n)})):null},"hsl"],[function(e){var t,i=e.h,r=e.s,n=e.v,l=e.a;return s(i)&&s(r)&&s(n)?p({h:o((t={h:Number(i),s:Number(r),v:Number(n),a:Number(void 0===l?1:l)}).h),s:a(t.s,0,100),v:a(t.v,0,100),a:a(t.a)}):null},"hsv"]]},k=function(e,t){for(var i=0;i<t.length;i++){var r=t[i][0](e);if(r)return[r,t[i][1]]}return[null,void 0]},P=function(e,t){var i=x(e);return{h:i.h,s:a(i.s+100*t,0,100),l:i.l,a:i.a}},A=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},S=function(e,t){var i=x(e);return{h:i.h,s:i.s,l:a(i.l+100*t,0,100),a:i.a}},M=function(){function e(e){this.parsed=("string"==typeof e?k(e.trim(),_.string):"object"==typeof e&&null!==e?k(e,_.object):[null,void 0])[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return n(A(this.rgba),2)},e.prototype.isDark=function(){return .5>A(this.rgba)},e.prototype.isLight=function(){return A(this.rgba)>=.5},e.prototype.toHex=function(){var e,t,i,r,s,a;return t=(e=h(this.rgba)).r,i=e.g,r=e.b,a=(s=e.a)<1?c(n(255*s)):"","#"+c(t)+c(i)+c(r)+a},e.prototype.toRgb=function(){return h(this.rgba)},e.prototype.toRgbString=function(){var e,t,i,r,s;return t=(e=h(this.rgba)).r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")"},e.prototype.toHsl=function(){return f(x(this.rgba))},e.prototype.toHslString=function(){var e,t,i,r,s;return t=(e=f(x(this.rgba))).h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)"},e.prototype.toHsv=function(){var e;return{h:n((e=u(this.rgba)).h),s:n(e.s),v:n(e.v),a:n(e.a,3)}},e.prototype.invert=function(){var e;return E({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a})},e.prototype.saturate=function(e){return void 0===e&&(e=.1),E(P(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),E(P(this.rgba,-e))},e.prototype.grayscale=function(){return E(P(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),E(S(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),E(S(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){var t;return"number"==typeof e?E({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):n(this.rgba.a,3)},e.prototype.hue=function(e){var t=x(this.rgba);return"number"==typeof e?E({h:e,s:t.s,l:t.l,a:t.a}):n(t.h)},e.prototype.isEqual=function(e){return this.toHex()===E(e).toHex()},e}(),E=function(e){return e instanceof M?e:new M(e)},C=[],T=function(e){e.forEach(function(e){0>C.indexOf(e)&&(e(M,_),C.push(e))})}}),h("alPzF",function(e,t){r(e.exports,"default",function(){return i});function i(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in i)r[i[s]]=s;var n={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,a=r[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var o=this.toRgb(),l=1/0,h="black";if(!n.length)for(var d in i)n[d]=new e(i[d]).toRgb();for(var c in i){var u=(s=n[c],Math.pow(o.r-s.r,2)+Math.pow(o.g-s.g,2)+Math.pow(o.b-s.b,2));u<l&&(l=u,h=c)}return h}},t.string.push([function(t){var r=t.toLowerCase(),s="transparent"===r?"#0000":i[r];return s?new e(s).toRgb():null},"name"])}}),h("2Y2EP",function(e,t){r(e.exports,"cullingMixin",function(){return i});let i={cullArea:null,cullable:!1,cullableChildren:!0}}),h("8G9cp",function(e,t){r(e.exports,"childrenHelperMixin",function(){return n});var i=l("g7kht"),s=l("5k13c");let n={allowChildren:!0,removeChildren(e=0,t){let r=t??this.children.length,s=r-e,n=[];if(s>0&&s<=r){for(let t=r-1;t>=e;t--){let e=this.children[t];e&&(this.renderGroup&&this.renderGroup.removeChild(e),n.push(e),e.parent=null)}(0,i.removeItems)(this.children,e,r);for(let e=0;e<n.length;++e)this.emit("childRemoved",n[e],this,e),n[e].emit("removed",this);return n}if(0===s&&0===this.children.length)return n;throw RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){let t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){let t=this.children.indexOf(e);if(-1===t)throw Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||(0,s.deprecation)(s.v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:i}=this;if(t<0||t>i.length)throw Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${i.length}`);if(e.parent){let i=e.parent.children.indexOf(e);if(e.parent===this&&i===t)return e;-1!==i&&e.parent.children.splice(i,1)}return t===i.length?i.push(e):i.splice(t,0,e),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;let i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e},removeFromParent(){this.parent?.removeChild(this)}}}),h("g7kht",function(e,t){r(e.exports,"removeItems",function(){return i});function i(e,t,i){let r;let s=e.length;if(t>=s||0===i)return;i=t+i>s?s-t:i;let n=s-i;for(r=t;r<n;++r)e[r]=e[r+i];e.length=n}}),h("kEBag",function(e,t){r(e.exports,"effectsMixin",function(){return a});var i=l("2JVFT"),s=l("ePQDN"),n=l("lDUGZ");let a={_mask:null,_filters:null,effects:[],addEffect(e){let t=this.effects.indexOf(e);-1===t&&(this.effects.push(e),this.effects.sort((e,t)=>e.priority-t.priority),this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(e){let t=this.effects.indexOf(e);-1!==t&&(this.effects.splice(t,1),!this.isRenderGroupRoot&&this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(value){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===value||(this._mask.effect&&(this.removeEffect(this._mask.effect),(0,s.MaskEffectManager).returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=value,null==value))return;let e=(0,s.MaskEffectManager).getMaskEffect(value);this._mask.effect=e,this.addEffect(e)},get mask(){return this._mask?.mask},set filters(value){!Array.isArray(value)&&value&&(value=[value]),this._filters||(this._filters={filters:null,effect:null,filterArea:null});let e=value?.length>0,t=this._filters.effect&&!e||!this._filters.effect&&e;if(value=Array.isArray(value)?value.slice(0):value,this._filters.filters=Object.freeze(value),t){if(e){let e=(0,n.BigPool).get(i.FilterEffect);this._filters.effect=e,this.addEffect(e)}else{let e=this._filters.effect;this.removeEffect(e),e.filterArea=null,e.filters=null,this._filters.effect=null,(0,n.BigPool).return(e)}}e&&(this._filters.effect.filters=value,this._filters.effect.filterArea=this.filterArea)},get filters(){return this._filters?.filters},set filterArea(value){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=value},get filterArea(){return this._filters?.filterArea}}}),h("2JVFT",function(e,t){r(e.exports,"FilterEffect",function(){return i});class i{constructor(e){this.pipe="filter",this.priority=1,this.filters=e?.filters,this.filterArea=e?.filterArea}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}}),h("ePQDN",function(e,t){r(e.exports,"MaskEffectManager",function(){return n});var i=l("7UyAW"),s=l("lDUGZ");let n=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let i=this._tests[t];if(i.test(e))return(0,s.BigPool).get(i.maskClass,e)}return e}returnMaskEffect(e){(0,s.BigPool).return(e)}};(0,i.extensions).handleByList(i.ExtensionType.MaskEffect,n._effectClasses)}),h("lDUGZ",function(e,t){r(e.exports,"BigPool",function(){return s});var i=l("8Aynh");let s=new class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){let i=this.getPool(e);i.prepopulate(t)}get(e,t){let i=this.getPool(e);return i.get(t)}return(e){let t=this.getPool(e.constructor);t.return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new i.Pool(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}}),h("8Aynh",function(e,t){r(e.exports,"Pool",function(){return i});class i{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return t=this._index>0?this._pool[--this._index]:new this._classType,t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}}),h("gIgfG",function(e,t){r(e.exports,"findMixin",function(){return s});var i=l("5k13c");let s={label:null,get name(){return(0,i.deprecation)(i.v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(value){(0,i.deprecation)(i.v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=value},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){let i=this.children;for(let t=0;t<i.length;t++){let r=i[t];if(r.label===e||e instanceof RegExp&&e.test(r.label))return r}if(t)for(let t=0;t<i.length;t++){let r=i[t],s=r.getChildByLabel(e,!0);if(s)return s}return null},getChildrenByLabel(e,t=!1,i=[]){let r=this.children;for(let t=0;t<r.length;t++){let s=r[t];(s.label===e||e instanceof RegExp&&e.test(s.label))&&i.push(s)}if(t)for(let t=0;t<r.length;t++)r[t].getChildrenByLabel(e,!0,i);return i}}}),h("6ODvX",function(e,t){r(e.exports,"measureMixin",function(){return d});var i=l("7Qkzy"),s=l("8Hzvu"),n=l("4sJGs"),a=l("5F219"),o=l("jldoP");let h=new i.Matrix,d={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(e,t){let i=Math.sign(this.scale.x)||1;0!==t?this.scale.x=e/t*i:this.scale.x=i},_setHeight(e,t){let i=Math.sign(this.scale.y)||1;0!==t?this.scale.y=e/t*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new s.Bounds});let e=this._localBoundsCacheData;return e.index=1,e.didChange=!1,e.data[0]!==this._didChangeId>>12&&(e.didChange=!0,e.data[0]=this._didChangeId>>12),(0,o.checkChildrenDidChange)(this,e),e.didChange&&(0,a.getLocalBounds)(this,e.localBounds,h),e.localBounds},getBounds(e,t){return(0,n.getGlobalBounds)(this,e,t||new s.Bounds)}}}),h("8Hzvu",function(e,t){r(e.exports,"Bounds",function(){return a});var i=l("7Qkzy"),s=l("04zBf");let n=new i.Matrix;class a{constructor(e=1/0,t=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n,this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new s.Rectangle);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n,this}set(e,t,i,r){this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}addFrame(e,t,i,r,s){s||(s=this.matrix);let n=s.a,a=s.b,o=s.c,l=s.d,h=s.tx,d=s.ty,c=this.minX,u=this.minY,p=this.maxX,g=this.maxY,f=n*e+o*t+h,m=a*e+l*t+d;f<c&&(c=f),m<u&&(u=m),f>p&&(p=f),m>g&&(g=m),f=n*i+o*t+h,m=a*i+l*t+d,f<c&&(c=f),m<u&&(u=m),f>p&&(p=f),m>g&&(g=m),f=n*e+o*r+h,m=a*e+l*r+d,f<c&&(c=f),m<u&&(u=m),f>p&&(p=f),m>g&&(g=m),f=n*i+o*r+h,m=a*i+l*r+d,f<c&&(c=f),m<u&&(u=m),f>p&&(p=f),m>g&&(g=m),this.minX=c,this.minY=u,this.maxX=p,this.maxY=g}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a:n,b:a,c:o,d:l,tx:h,ty:d}=e,c=n*t+o*i+h,u=a*t+l*i+d;this.minX=c,this.minY=u,this.maxX=c,this.maxY=u,c=n*r+o*i+h,u=a*r+l*i+d,this.minX=c<this.minX?c:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=u>this.maxY?u:this.maxY,c=n*t+o*s+h,u=a*t+l*s+d,this.minX=c<this.minX?c:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=u>this.maxY?u:this.maxY,c=n*r+o*s+h,u=a*r+l*s+d,this.minX=c<this.minX?c:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,r){let s=this.minX,n=this.minY,a=this.maxX,o=this.maxY;r||(r=this.matrix);let l=r.a,h=r.b,d=r.c,c=r.d,u=r.tx,p=r.ty;for(let r=t;r<i;r+=2){let t=e[r],i=e[r+1],g=l*t+d*i+u,f=h*t+c*i+p;s=g<s?g:s,n=f<n?f:n,a=g>a?g:a,o=f>o?f:o}this.minX=s,this.minY=n,this.maxX=a,this.maxY=o}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}}),h("4sJGs",function(e,t){r(e.exports,"getGlobalBounds",function(){return n}),r(e.exports,"updateTransformBackwards",function(){return a});var i=l("7Qkzy"),s=l("fCS7D");function n(e,t,r){let n,o;return r.clear(),n=e.parent?t?e.parent.worldTransform:a(e,o=(0,s.matrixPool).get().identity()):i.Matrix.IDENTITY,function e(t,r,n,a){let o;if(!t.visible||!t.measurable)return;a?o=t.worldTransform:(t.updateLocalTransform(),(o=(0,s.matrixPool).get()).appendFrom(t.localTransform,n));let l=r,h=!!t.effects.length;if(h&&(r=(0,s.boundsPool).get().clear()),t.boundsArea)r.addRect(t.boundsArea,o);else{t.addBounds&&(r.matrix=o,t.addBounds(r));for(let i=0;i<t.children.length;i++)e(t.children[i],r,o,a)}if(h){for(let e=0;e<t.effects.length;e++)t.effects[e].addBounds?.(r);l.addBounds(r,i.Matrix.IDENTITY),(0,s.boundsPool).return(r)}a||(0,s.matrixPool).return(o)}(e,r,n,t),o&&(0,s.matrixPool).return(o),r.isValid||r.set(0,0,0,0),r}function a(e,t){let i=e.parent;return i&&(a(i,t),i.updateLocalTransform(),t.append(i.localTransform)),t}}),h("fCS7D",function(e,t){r(e.exports,"matrixPool",function(){return a}),r(e.exports,"boundsPool",function(){return o});var i=l("7Qkzy"),s=l("8Aynh"),n=l("8Hzvu");let a=new s.Pool(i.Matrix),o=new s.Pool(n.Bounds)}),h("5F219",function(e,t){r(e.exports,"getLocalBounds",function(){return n});var i=l("7Qkzy");l("drBom");var s=l("fCS7D");function n(e,t,r){return t.clear(),r||(r=i.Matrix.IDENTITY),function e(t,r,n,a,o){let l;if(o)l=(0,s.matrixPool).get(),l=n.copyTo(l);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();let e=t.localTransform;(l=(0,s.matrixPool).get()).appendFrom(e,n)}let h=r,d=!!t.effects.length;if(d&&(r=(0,s.boundsPool).get().clear()),t.boundsArea)r.addRect(t.boundsArea,l);else{t.renderPipeId&&(r.matrix=l,t.addBounds(r));let i=t.children;for(let t=0;t<i.length;t++)e(i[t],r,l,a,!1)}if(d){for(let e=0;e<t.effects.length;e++)t.effects[e].addLocalBounds?.(r,a);h.addBounds(r,i.Matrix.IDENTITY),(0,s.boundsPool).return(r)}(0,s.matrixPool).return(l)}(e,t,r,e,!0),t.isValid||t.set(0,0,0,0),t}}),h("drBom",function(e,t){r(e.exports,"warn",function(){return s});let i=0;function s(...e){500!==i&&(500==++i?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...e))}}),h("jldoP",function(e,t){r(e.exports,"checkChildrenDidChange",function(){return function e(t,i){let r=t.children;for(let t=0;t<r.length;t++){let s=r[t],n=(255&s.uid)<<24|16777215&s._didChangeId;i.data[i.index]!==n&&(i.data[i.index]=n,i.didChange=!0),i.index++,s.children.length&&e(s,i)}return i.didChange}})}),h("jaFVT",function(e,t){r(e.exports,"onRenderMixin",function(){return i});let i={_onRender:null,set onRender(func){let e=this.renderGroup;if(!func){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=func},get onRender(){return this._onRender}}}),h("4Qd7g",function(e,t){r(e.exports,"sortMixin",function(){return i});let i={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(value){if(this._zIndex===value)return;this._zIndex=value,this.depthOfChildModified()},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(s))}};function s(e,t){return e._zIndex-t._zIndex}}),h("dA4wx",function(e,t){r(e.exports,"toLocalGlobalMixin",function(){return a});var i=l("7Qkzy"),s=l("aSHqW"),n=l("4sJGs");let a={getGlobalPosition(e=new s.Point,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,r=!1){if(!r){this.updateLocalTransform();let r=(0,n.updateTransformBackwards)(this,new i.Matrix);return r.append(this.localTransform),r.apply(e,t)}return this.worldTransform.apply(e,t)},toLocal(e,t,r,s){if(t&&(e=t.toGlobal(e,r,s)),!s){this.updateLocalTransform();let t=(0,n.updateTransformBackwards)(this,new i.Matrix);return t.append(this.localTransform),t.applyInverse(e,r)}return this.worldTransform.applyInverse(e,r)}}}),h("g3yBE",function(e,t){r(e.exports,"RenderGroup",function(){return n});var i=l("7Qkzy"),s=l("3FZUx");class n{constructor(e){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this._children=[],this.worldTransform=new i.Matrix,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new s.InstructionSet,this._onRenderContainers=[],this.root=e,this.addChild(e)}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.onChildUpdate(e.root),this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){e.root.didChange&&this._removeChildFromUpdate(e.root);let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e!==this.root&&(this._children.push(e),e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e._onRender&&this.addOnRender(e)),e.renderGroup){if(e.renderGroup.root===e){this.addRenderGroupChild(e.renderGroup);return}}else e.renderGroup=this,e.didChange=!0;let t=e.children;e.isRenderGroupRoot||this.onChildUpdate(e);for(let e=0;e<t.length;e++)this.addChild(t[e])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&this.removeOnRender(e),e.renderGroup.root!==e){let t=e.children;for(let e=0;e<t.length;e++)this.removeChild(t[e]);e.didChange&&e.renderGroup._removeChildFromUpdate(e),e.renderGroup=null}else this._removeRenderGroupChild(e.renderGroup);let t=this._children.indexOf(e);t>-1&&this._children.splice(t,1)}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(e.didViewUpdate=!1,this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e))}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}_removeChildFromUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];if(!t)return;let i=t.list.indexOf(e);i>-1&&t.list.splice(i,1),t.index--}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender()}}}),h("3FZUx",function(e,t){r(e.exports,"InstructionSet",function(){return s});var i=l("hAZ3a");class s{constructor(){this.uid=(0,i.uid)("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}}),h("i0iae",function(e,t){r(e.exports,"assignWithIgnore",function(){return i});function i(e,t,i={}){for(let r in t)i[r]||void 0===t[r]||(e[r]=t[r])}}),h("en5ri",function(e,t){r(e.exports,"addMaskBounds",function(){return a});var i=l("8Hzvu"),s=l("4sJGs");let n=new i.Bounds;function a(e,t,i){e.measurable=!0,(0,s.getGlobalBounds)(e,i,n),t.addBoundsMask(n),e.measurable=!1}}),h("9VG9u",function(e,t){r(e.exports,"addMaskLocalBounds",function(){return a});var i=l("5F219"),s=l("fCS7D"),n=l("drBom");function a(e,t,r){let a=(0,s.boundsPool).get();e.measurable=!0;let o=(0,s.matrixPool).get().identity(),l=function e(t,i,r){return t?t!==i&&(e(t.parent,i,r),t.updateLocalTransform(),r.append(t.localTransform)):(0,n.warn)("Mask bounds, renderable is not inside the root container"),r}(e,r,o);(0,i.getLocalBounds)(e,a,l),e.measurable=!1,t.addBoundsMask(a),(0,s.matrixPool).return(o),(0,s.boundsPool).return(a)}}),h("6aJ47",function(e,t){r(e.exports,"ColorMask",function(){return s});var i=l("7UyAW");class s{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return"number"==typeof e}}s.extension=i.ExtensionType.MaskEffect}),h("8tyVB",function(e,t){r(e.exports,"StencilMask",function(){return o});var i=l("7UyAW"),s=l("2VOjZ"),n=l("en5ri"),a=l("9VG9u");class o{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){(0,n.addMaskBounds)(this.mask,e,t)}addLocalBounds(e,t){(0,a.addMaskLocalBounds)(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof s.Container}}o.extension=i.ExtensionType.MaskEffect}),h("6F59Q",function(e,t){r(e.exports,"CanvasSource",function(){return a});var i=l("ecaWJ"),s=l("7UyAW"),n=l("ihvxQ");class a extends n.TextureSource{constructor(e){e.resource||(e.resource=(0,i.DOMAdapter).get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity;let t=e.resource;(this.pixelWidth!==t.width||this.pixelWidth!==t.height)&&this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){let r=super.resize(e,t,i);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}}a.extension=s.ExtensionType.TextureSource}),h("ecaWJ",function(e,t){r(e.exports,"DOMAdapter",function(){return s});let i=l("j71XF").BrowserAdapter,s={get:()=>i,set(e){i=e}}}),h("j71XF",function(e,t){r(e.exports,"BrowserAdapter",function(){return i});let i={createCanvas:(e,t)=>{let i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>{let t=new DOMParser;return t.parseFromString(e,"text/xml")}}}),h("8fdRE",function(e,t){r(e.exports,"ImageSource",function(){return o});var i=l("ecaWJ"),s=l("7UyAW"),n=l("drBom"),a=l("ihvxQ");class o extends a.TextureSource{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){let t=(0,i.DOMAdapter).get().createCanvas(e.resource.width,e.resource.height),r=t.getContext("2d");r.drawImage(e.resource,0,0),e.resource=t,(0,n.warn)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}}o.extension=s.ExtensionType.TextureSource}),h("1VIfK",function(e,t){r(e.exports,"VideoSource",function(){return h});var i=l("7UyAW"),s=l("lyoau"),n=l("7Ozq6"),a=l("ihvxQ");let o=class e extends a.TextureSource{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...e.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==t.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=s.Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await (0,n.detectVideoAlphaMode)(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,void 0!==t.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){let e=this.resource;return e.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){let e=this.resource;e.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){let e=this.resource;e.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&((0,s.Ticker).shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||((0,s.Ticker).shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&((0,s.Ticker).shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||globalThis.VideoFrame&&e instanceof VideoFrame}};o.extension=i.ExtensionType.TextureSource,o.defaultOptions={...a.TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},o.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let h=o}),h("lyoau",function(e,t){r(e.exports,"Ticker",function(){return a});var i=l("fgfeB"),s=l("kWVn0");let n=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s.TickerListener(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=i.UPDATE_PRIORITY.NORMAL){return this._addListener(new s.TickerListener(e,t,r))}addOnce(e,t,r=i.UPDATE_PRIORITY.NORMAL){return this._addListener(new s.TickerListener(e,t,r,!0))}_addListener(e){let t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if((i=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){let e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*e.targetFPMS;let r=this._head,s=r.next;for(;s;)s=s.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){let i=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,i)/1e3,e.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){let t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){let t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};n.targetFPMS=.06;let a=n}),h("fgfeB",function(e,t){r(e.exports,"UPDATE_PRIORITY",function(){return s});var i,s=((i=s||{})[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i)}),h("kWVn0",function(e,t){r(e.exports,"TickerListener",function(){return i});class i{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}}}),h("7Ozq6",function(e,t){let i;async function s(){return i??(i=(async()=>{let e=document.createElement("canvas"),t=e.getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let i=await new Promise(e=>{let t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()});if(!i)return"premultiply-alpha-on-upload";let r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i);let n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(s),t.deleteTexture(r),t.getExtension("WEBGL_lose_context")?.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),i}r(e.exports,"detectVideoAlphaMode",function(){return s})}),h("ioQaX",function(e,t){var i=l("hrglb"),r=l("7UyAW"),s=l("ihvxQ"),n=l("9SDHC");let a=[];(0,r.extensions).handleByList(r.ExtensionType.TextureSource,a),n.Texture.from=function(e,t=!1){return"string"==typeof e?(0,i.Cache).get(e):e instanceof s.TextureSource?new n.Texture({source:e}):function(e={},t=!1){let r=e&&e.resource,s=r?e.resource:e,o=r?e:{resource:e};if(!t&&(0,i.Cache).has(s))return(0,i.Cache).get(s);let l=new n.Texture({source:function(e={}){let t=e&&e.resource,i=t?e.resource:e,r=t?e:{resource:e};for(let e=0;e<a.length;e++){let t=a[e];if(t.test(i))return new t(r)}throw Error(`Could not find a source type for resource: ${r.resource}`)}(o)});return l.on("destroy",()=>{(0,i.Cache).has(s)&&(0,i.Cache).remove(s)}),t||(0,i.Cache).set(s,l),l}(e,t)}}),h("hrglb",function(e,t){r(e.exports,"Cache",function(){return n});var i=l("drBom"),s=l("eOSS3");let n=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||(0,i.warn)(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let r;let n=(0,s.convertToList)(e);for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];if(i.test(t)){r=i.getCacheableAssets(n,t);break}}let a=new Map(Object.entries(r||{}));r||n.forEach(e=>{a.set(e,t)});let o=[...a.keys()],l={cacheKeys:o,keys:n};n.forEach(e=>{this._cacheMap.set(e,l)}),o.forEach(e=>{let s=r?r[e]:t;this._cache.has(e)&&this._cache.get(e)!==s&&(0,i.warn)("[Cache] already has key:",e),this._cache.set(e,a.get(e))})}remove(e){if(!this._cacheMap.has(e)){(0,i.warn)(`[Assets] Asset id ${e} was not found in the Cache`);return}let t=this._cacheMap.get(e),r=t.cacheKeys;r.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}}}),h("eOSS3",function(e,t){r(e.exports,"convertToList",function(){return i});let i=(e,t,i=!1)=>(Array.isArray(e)||(e=[e]),t)?e.map(e=>"string"==typeof e||i?t(e):e):e}),h("fiDYq",function(e,t){var i=l("7UyAW"),r=l("gm5qp");(0,i.extensions).add(r.spritesheetAsset)}),h("gm5qp",function(e,t){r(e.exports,"spritesheetAsset",function(){return u});var i=l("aclJ3"),s=l("if08j"),n=l("kw4Mw"),a=l("7UyAW"),o=l("9SDHC"),h=l("724Hb"),d=l("b4JvI");let c=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],u={extension:a.ExtensionType.Asset,cache:{test:e=>e instanceof d.Spritesheet,getCacheableAssets:(e,t)=>(function e(t,i,r){let s={};if(t.forEach(e=>{s[e]=i}),Object.keys(i.textures).forEach(e=>{s[e]=i.textures[e]}),!r){let r=(0,h.path).dirname(t[0]);i.linkedSheets.forEach((t,n)=>{let a=e([`${r}/${i.data.meta.related_multi_packs[n]}`],t,!0);Object.assign(s,a)})}return s})(e,t,!1)},resolver:{test:e=>{let t=e.split("?")[0],i=t.split("."),r=i.pop(),s=i.pop();return"json"===r&&c.includes(s)},parse:e=>{let t=e.split(".");return{resolution:parseFloat(s.Resolver.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:a.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal},testParse:async(e,t)=>".json"===(0,h.path).extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,i){let r;let{texture:s,imageFilename:a}=t?.data??{},l=(0,h.path).dirname(t.src);if(l&&l.lastIndexOf("/")!==l.length-1&&(l+="/"),s instanceof o.Texture)r=s;else{let s=(0,n.copySearchParams)(l+(a??e.meta.image),t.src),o=await i.load([s]);r=o[s]}let c=new d.Spritesheet(r.source,e);await c.parse();let u=e?.meta?.related_multi_packs;if(Array.isArray(u)){let e=[];for(let r of u){if("string"!=typeof r)continue;let s=l+r;t.data?.ignoreMultiPack||(s=(0,n.copySearchParams)(s,t.src),e.push(i.load({src:s,data:{ignoreMultiPack:!0}})))}let r=await Promise.all(e);c.linkedSheets=r,r.forEach(e=>{e.linkedSheets=[c].concat(c.linkedSheets.filter(t=>t!==e))})}return c},async unload(e,t,i){await i.unload(e.textureSource._sourceOrigin),e.destroy(!1)}}}}),h("aclJ3",function(e,t){r(e.exports,"LoaderParserPriority",function(){return s});var i,s=((i=s||{})[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i)}),h("if08j",function(e,t){r(e.exports,"Resolver",function(){return h});var i=l("drBom"),s=l("724Hb"),n=l("eOSS3"),a=l("gekGQ"),o=l("6KVu0");class h{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){"string"==typeof e?this._defaultSearchParams=e:this._defaultSearchParams=Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}getAlias(e){let{alias:t,src:i}=e,r=(0,n.convertToList)(t||i,e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>e?.src??e):e?.src?e.src:e,!0);return r}addManifest(e){this._manifest&&(0,i.warn)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){let i=[],r=t;Array.isArray(t)||(r=Object.entries(t).map(([e,t])=>"string"==typeof t||Array.isArray(t)?{alias:e,src:t}:{alias:e,...t})),r.forEach(t=>{let r;let s=t.src,n=t.alias;if("string"==typeof n){let t=this._createBundleAssetId(e,n);i.push(t),r=[n,t]}else{let t=n.map(t=>this._createBundleAssetId(e,t));i.push(...t),r=[...n,...t]}this.add({...t,alias:r,src:s})}),this._bundles[e]=i}add(e){let t;let r=[];Array.isArray(e)?r.push(...e):r.push(e),t=e=>{this.hasKey(e)&&(0,i.warn)(`[Resolver] already has key: ${e} overwriting`)};let s=(0,n.convertToList)(r);s.forEach(e=>{let{src:i}=e,{data:r,format:s,loadParser:o}=e,l=(0,n.convertToList)(i).map(e=>"string"==typeof e?(0,a.createStringVariations)(e):Array.isArray(e)?e:[e]),h=this.getAlias(e);Array.isArray(h)?h.forEach(t):t(h);let d=[];l.forEach(e=>{e.forEach(e=>{let t={};if("object"!=typeof e){t.src=e;for(let i=0;i<this._parsers.length;i++){let r=this._parsers[i];if(r.test(e)){t=r.parse(e);break}}}else r=e.data??r,s=e.format??s,o=e.loadParser??o,t={...t,...e};if(!h)throw Error(`[Resolver] alias is undefined for this asset: ${t.src}`);t=this._buildResolvedAsset(t,{aliases:h,data:r,format:s,loadParser:o}),d.push(t)})}),h.forEach(e=>{this._assetMap[e]=d})})}resolveBundle(e){let t=(0,o.isSingleItem)(e);e=(0,n.convertToList)(e);let i={};return e.forEach(e=>{let t=this._bundles[e];if(t){let r=this.resolve(t),s={};for(let t in r){let i=r[t];s[this._extractAssetIdFromBundle(e,t)]=i}i[e]=s}}),t?i[e[0]]:i}resolveUrl(e){let t=this.resolve(e);if("string"!=typeof e){let e={};for(let i in t)e[i]=t[i].src;return e}return t.src}resolve(e){let t=(0,o.isSingleItem)(e);e=(0,n.convertToList)(e);let i={};return e.forEach(e=>{if(!this._resolverHash[e]){if(this._assetMap[e]){let t=this._assetMap[e],i=this._getPreferredOrder(t);i?.priority.forEach(e=>{i.params[e].forEach(i=>{let r=t.filter(t=>!!t[e]&&t[e]===i);r.length&&(t=r)})}),this._resolverHash[e]=t[0]}else this._resolverHash[e]=this._buildResolvedAsset({alias:[e],src:e},{})}i[e]=this._resolverHash[e]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let t=e[0],i=this._preferredOrder.find(e=>e.params.format.includes(t.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){let{aliases:i,data:r,loadParser:n,format:a}=t;return(this._basePath||this._rootPath)&&(e.src=(0,s.path).toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=n??e.loadParser,e.format=a??e.format??e.src.split(".").pop().split("?").shift().split("#").shift(),e}}h.RETINA_PREFIX=/@([0-9\.]+)x/}),h("724Hb",function(e,t){r(e.exports,"path",function(){return a});var i=l("ecaWJ");function s(e){if("string"!=typeof e)throw TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function n(e){let t=e.split("?")[0];return t.split("#")[0]}let a={toPosix:e=>e.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){s(e),e=this.toPosix(e);let t=/^file:\/\/\//.exec(e);if(t)return t[0];let i=/^[^/:]+:\/{0,2}/.exec(e);return i?i[0]:""},toAbsolute(e,t,r){if(s(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;let o=n(this.toPosix(t??(0,i.DOMAdapter).get().getBaseUrl())),l=n(this.toPosix(r??this.rootname(o)));if((e=this.toPosix(e)).startsWith("/"))return a.join(l,e.slice(1));let h=this.isAbsolute(e)?e:this.join(o,e);return h},normalize(e){if(s(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;e=this.toPosix(e);let t="",i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));let r=e.endsWith("/");return((e=function(e,t){let i="",r=0,s=-1,n=0,a=-1;for(let o=0;o<=e.length;++o){if(o<e.length)a=e.charCodeAt(o);else if(47===a)break;else a=47;if(47===a){if(s===o-1||1===n);else if(s!==o-1&&2===n){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){let e=i.lastIndexOf("/");if(e!==i.length-1){-1===e?(i="",r=0):r=(i=i.slice(0,e)).length-1-i.lastIndexOf("/"),s=o,n=0;continue}}else if(2===i.length||1===i.length){i="",r=0,s=o,n=0;continue}}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+=`/${e.slice(s+1,o)}`:i=e.slice(s+1,o),r=o-s-1;s=o,n=0}else 46===a&&-1!==n?++n:n=-1}return i}(e,!1)).length>0&&r&&(e+="/"),i)?`/${e}`:t+e},isAbsolute(e){return s(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){let t;if(0===e.length)return".";for(let i=0;i<e.length;++i){let r=e[i];if(s(r),r.length>0){if(void 0===t)t=r;else{let s=e[i-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}}return void 0===t?".":this.normalize(t)},dirname(e){if(s(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0),i=47===t,r=-1,n=!0,a=this.getProtocol(e),o=e;e=e.slice(a.length);for(let i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!n){r=i;break}}else n=!1;return -1===r?i?"/":this.isUrl(o)?a+e:a:i&&1===r?"//":a+e.slice(0,r)},rootname(e){s(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){let i=e.indexOf("/",t.length);(t=-1!==i?e.slice(0,i):e).endsWith("/")||(t+="/")}return t},basename(e,t){let i;s(e),t&&s(t),e=n(this.toPosix(e));let r=0,a=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let s=t.length-1,n=-1;for(i=e.length-1;i>=0;--i){let l=e.charCodeAt(i);if(47===l){if(!o){r=i+1;break}}else -1===n&&(o=!1,n=i+1),s>=0&&(l===t.charCodeAt(s)?-1==--s&&(a=i):(s=-1,a=n))}return r===a?a=n:-1===a&&(a=e.length),e.slice(r,a)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){r=i+1;break}}else -1===a&&(o=!1,a=i+1);return -1===a?"":e.slice(r,a)},extname(e){s(e),e=n(this.toPosix(e));let t=-1,i=0,r=-1,a=!0,o=0;for(let s=e.length-1;s>=0;--s){let n=e.charCodeAt(s);if(47===n){if(!a){i=s+1;break}continue}-1===r&&(a=!1,r=s+1),46===n?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1)}return -1===t||-1===r||0===o||1===o&&t===r-1&&t===i+1?"":e.slice(t,r)},parse(e){let t;s(e);let i={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return i;let r=(e=n(this.toPosix(e))).charCodeAt(0),a=this.isAbsolute(e);i.root=this.rootname(e),t=a||this.hasProtocol(e)?1:0;let o=-1,l=0,h=-1,d=!0,c=e.length-1,u=0;for(;c>=t;--c){if(47===(r=e.charCodeAt(c))){if(!d){l=c+1;break}continue}-1===h&&(d=!1,h=c+1),46===r?-1===o?o=c:1!==u&&(u=1):-1!==o&&(u=-1)}return -1===o||-1===h||0===u||1===u&&o===h-1&&o===l+1?-1!==h&&(0===l&&a?i.base=i.name=e.slice(1,h):i.base=i.name=e.slice(l,h)):(0===l&&a?(i.name=e.slice(1,o),i.base=e.slice(1,h)):(i.name=e.slice(l,o),i.base=e.slice(l,h)),i.ext=e.slice(o,h)),i.dir=this.dirname(e),i},sep:"/",delimiter:":",joinExtensions:[".html"]}}),h("gekGQ",function(e,t){r(e.exports,"createStringVariations",function(){return i});function i(e){let t=e.match(/\{(.*?)\}/g),i=[];if(t){let r=[];t.forEach(e=>{let t=e.substring(1,e.length-1).split(",");r.push(t)}),function e(t,i,r,s,n){let a=i[r];for(let o=0;o<a.length;o++){let l=a[o];r<i.length-1?e(t.replace(s[r],l),i,r+1,s,n):n.push(t.replace(s[r],l))}}(e,r,0,t,i)}else i.push(e);return i}}),h("6KVu0",function(e,t){r(e.exports,"isSingleItem",function(){return i});let i=e=>!Array.isArray(e)}),h("kw4Mw",function(e,t){r(e.exports,"copySearchParams",function(){return i});let i=(e,t)=>{let i=t.split("?")[1];return i&&(e+=`?${i}`),e}}),h("b4JvI",function(e,t){r(e.exports,"Spritesheet",function(){return a});var i=l("04zBf"),s=l("9SDHC");let n=class e{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof s.Texture?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;let i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let r=t,n=e.BATCH_SIZE;for(;r-t<n&&r<this._frameKeys.length;){let e=this._frameKeys[r],t=this._frames[e],n=t.frame;if(n){let r=null,a=null,o=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,l=new i.Rectangle(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);r=t.rotated?new i.Rectangle(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new i.Rectangle(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(a=new i.Rectangle(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[e]=new s.Texture({source:this.textureSource,frame:r,orig:l,trim:a,rotate:t.rotated?2:0,defaultAnchor:t.anchor,defaultBorders:t.borders,label:e.toString()})}r++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){let r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};n.BATCH_SIZE=1e3;let a=n}),h("5Ihtu",function(e,t){r(e.exports,"AbstractRenderer",function(){return g});var i=l("jhEJH"),n=l("2VOjZ"),a=l("vw0TX"),o=l("5k13c"),h=l("5lQxh"),d=l("bhpqy"),c=l("jFrz2");let u=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],p=class e extends s(c){constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name;let t=[...u,...e.runners??[]];this._addRunners(...t),this._addSystems(e.systems),this._addPipes(e.renderPipes,e.renderPipeAdaptors),this._unsafeEvalCheck()}async init(t={}){for(let e in this._systemsHash){let i=this._systemsHash[e],r=i.constructor.defaultOptions;t={...r,...t}}t={...e.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let e=0;e<this.runners.init.items.length;e++)await this.runners.init.items[e].init(t);this._initOptions=t}render(e,t){let r=e;if(r instanceof n.Container&&(r={container:r},t&&((0,o.deprecation)(o.v8_0_0,"passing a second argument is deprecated, please use render options instead"),r.target=t.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor=this.background.colorRgba),r.clearColor){let e=Array.isArray(r.clearColor)&&4===r.clearColor.length;r.clearColor=e?r.clearColor:(0,i.Color).shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(e,t,i){this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height)}clear(e={}){e.target||(e.target=this.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=h.CLEAR.ALL);let{clear:t,clearColor:r,target:s}=e;(0,i.Color).shared.setValue(r??this.background.colorRgba),this.renderTarget.clear(s,t,(0,i.Color).shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(e=>{this.runners[e]=new d.SystemRunner(e)})}_addSystems(e){let t;for(t in e){let i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){let i=new e(this);if(this[t])throw Error(`Whoops! The name "${t}" is already in use`);for(let e in this[t]=i,this._systemsHash[t]=i,this.runners)this.runners[e].add(i);return this}_addPipes(e,t){let i=t.reduce((e,t)=>(e[t.name]=t.value,e),{});e.forEach(e=>{let t=e.value,r=e.name,s=i[r];this.renderPipes[r]=new t(this,s?new s:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!(0,a.unsafeEvalSupported)())throw Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};p.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let g=p}),h("vw0TX",function(e,t){let i;function s(){if("boolean"==typeof i)return i;try{let e=Function("param1","param2","param3","return param1[param2] === param3;");i=!0===e({a:"b"},"a","b")}catch(e){i=!1}return i}r(e.exports,"unsafeEvalSupported",function(){return s})}),h("5lQxh",function(e,t){r(e.exports,"CLEAR",function(){return s});var i,s=((i=s||{})[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i)}),h("bhpqy",function(e,t){r(e.exports,"SystemRunner",function(){return i});class i{constructor(e){this.items=[],this._name=e}emit(e,t,i,r,s,n,a,o){let{name:l,items:h}=this;for(let d=0,c=h.length;d<c;d++)h[d][l](e,t,i,r,s,n,a,o);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return -1!==t&&this.items.splice(t,1),this}contains(e){return -1!==this.items.indexOf(e)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}}),h("jY7nr",function(e,t){var i=l("jn42J");e.exports=Promise.all([i("dM4dt"),i("6v9PQ"),i("5j4zo")]).then(()=>l("kyo1I"))}),h("6S0zo",function(e,t){var i=l("jn42J");e.exports=Promise.all([i("dM4dt"),i("6v9PQ"),i("1qBk8")]).then(()=>l("ly3RE"))}),h("2fYDh",function(e,t){r(e.exports,"GraphicsContextSystem",function(){return g});var i=l("7UyAW"),s=l("7uomH"),n=l("4g9O0"),a=l("4uG2f"),o=l("3FZUx"),h=l("lDUGZ"),d=l("77MuI");class c{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class u{constructor(){this.geometry=new s.BatchGeometry,this.instructions=new o.InstructionSet}init(){this.instructions.reset()}}let p=class e{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(t){e.defaultOptions.bezierSmoothness=t?.bezierSmoothness??e.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),(0,d.buildContextBatches)(e,t);let i=e.batchMode;e.customShader||"no-batch"===i?t.isBatchable=!1:"auto"===i&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_returnActiveBatchers(){for(let e=0;e<this._activeBatchers.length;e++)(0,h.BigPool).return(this._activeBatchers[e]);this._activeBatchers.length=0}_initContextRenderData(e){let t=(0,h.BigPool).get(u),{batches:i,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,o=r.indices.length;for(let e=0;e<i.length;e++)i[e].applyTransform=!1;let l=(0,h.BigPool).get(a.Batcher);this._activeBatchers.push(l),l.ensureAttributeBuffer(s),l.ensureIndexBuffer(o),l.begin();for(let e=0;e<i.length;e++){let t=i[e];l.add(t)}l.finish(t.instructions);let d=t.geometry;d.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),d.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);let c=l.batches;for(let e=0;e<c.length;e++){let t=c[e];t.bindGroup=(0,n.getTextureBatchBindGroup)(t.textures.textures,t.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){let t=new c;return this._gpuContextHash[e.uid]=t,e.on("update",this.onGraphicsContextUpdate,this),e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextUpdate(e){this._needsContextNeedsRebuild.push(e)}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("update",this.onGraphicsContextUpdate,this),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let t=this._gpuContextHash[e.uid];!t.isBatchable&&this._graphicsDataContextHash[e.uid]&&((0,h.BigPool).return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(e=>{(0,h.BigPool).return(e)})}destroy(){for(let e of this._needsContextNeedsRebuild)this._gpuContextHash[e.uid]&&this.onGraphicsContextDestroy(e);this._needsContextNeedsRebuild.length=0}};p.extension={type:[i.ExtensionType.WebGLSystem,i.ExtensionType.WebGPUSystem,i.ExtensionType.CanvasSystem],name:"graphicsContext"},p.defaultOptions={bezierSmoothness:.5};let g=p}),h("7uomH",function(e,t){r(e.exports,"BatchGeometry",function(){return h});var i=l("2TTe1"),s=l("19Nl8"),n=l("fMoug");let a=new Float32Array(1),o=new Uint32Array(1);class h extends n.Geometry{constructor(){let e=new i.Buffer({data:a,label:"attribute-batch-buffer",usage:s.BufferUsage.VERTEX|s.BufferUsage.COPY_DST,shrinkToFit:!1}),t=new i.Buffer({data:o,label:"index-batch-buffer",usage:s.BufferUsage.INDEX|s.BufferUsage.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:24,offset:0,location:1},aUV:{buffer:e,format:"float32x2",stride:24,offset:8,location:3},aColor:{buffer:e,format:"unorm8x4",stride:24,offset:16,location:0},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:24,offset:20,location:2}},indexBuffer:t})}}}),h("2TTe1",function(e,t){r(e.exports,"Buffer",function(){return o});var i=l("jFrz2"),n=l("hAZ3a"),a=l("19Nl8");class o extends s(i){constructor(e){let{data:t,size:i}=e,{usage:r,label:s,shrinkToFit:a}=e;super(),this.uid=(0,n.uid)("buffer"),this._resourceType="buffer",this._resourceId=(0,n.uid)("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i=i??t?.byteLength;let o=!!t;this.descriptor={size:i,usage:r,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get static(){return!!(this.descriptor.usage&a.BufferUsage.STATIC)}set static(e){e?this.descriptor.usage|=a.BufferUsage.STATIC:this.descriptor.usage&=~a.BufferUsage.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}let r=this._data;if(this._data=e,r.length!==e.length){!this.shrinkToFit&&e.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=(0,n.uid)("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}}),h("19Nl8",function(e,t){r(e.exports,"BufferUsage",function(){return s});var i,s=((i=s||{})[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i)}),h("fMoug",function(e,t){r(e.exports,"Geometry",function(){return c});var i=l("jFrz2"),n=l("8Hzvu"),a=l("hAZ3a"),o=l("2TTe1"),h=l("2TGkA"),d=l("1sD6M");class c extends s(i){constructor(e){let{attributes:t,indexBuffer:i,topology:r}=e;for(let i in super(),this.uid=(0,a.uid)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new n.Bounds,this._boundsDirty=!0,this.attributes=t,this.buffers=[],this.instanceCount=e.instanceCount||1,t){var s;let e=t[i]=(((s=t[i])instanceof o.Buffer||Array.isArray(s)||s.BYTES_PER_ELEMENT)&&(s={buffer:s}),s.buffer=(0,h.ensureIsBuffer)(s.buffer,!1),s),r=this.buffers.indexOf(e.buffer);-1===r&&(this.buffers.push(e.buffer),e.buffer.on("update",this.onBufferUpdate,this),e.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=(0,h.ensureIsBuffer)(i,!0),this.buffers.push(this.indexBuffer)),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e],i=t.buffer;return i.data.length/(t.stride/4||t.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,(0,d.getGeometryBounds)(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}}),h("2TGkA",function(e,t){r(e.exports,"ensureIsBuffer",function(){return n});var i=l("2TTe1"),s=l("19Nl8");function n(e,t){if(!(e instanceof i.Buffer)){let r=t?s.BufferUsage.INDEX:s.BufferUsage.VERTEX;e instanceof Array&&(t?(e=new Uint32Array(e),r=s.BufferUsage.INDEX|s.BufferUsage.COPY_DST):(e=new Float32Array(e),r=s.BufferUsage.VERTEX|s.BufferUsage.COPY_DST)),e=new i.Buffer({data:e,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:r})}return e}}),h("1sD6M",function(e,t){r(e.exports,"getGeometryBounds",function(){return i});function i(e,t,i){let r=e.getAttribute(t);if(!r)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;let s=r.buffer.data,n=1/0,a=1/0,o=-1/0,l=-1/0,h=s.BYTES_PER_ELEMENT,d=(r.offset||0)/h,c=(r.stride||8)/h;for(let e=d;e<s.length;e+=c){let t=s[e],i=s[e+1];t>o&&(o=t),i>l&&(l=i),t<n&&(n=t),i<a&&(a=i)}return i.minX=n,i.minY=a,i.maxX=o,i.maxY=l,i}}),h("4g9O0",function(e,t){r(e.exports,"getTextureBatchBindGroup",function(){return o});var i=l("9lsxC"),s=l("9SDHC"),n=l("3O2zM");let a={};function o(e,t){let r=0;for(let i=0;i<t;i++)r=31*r+e[i].uid>>>0;return a[r]||function(e,t){let r={},o=0;for(let t=0;t<n.MAX_TEXTURES;t++){let i=t<e.length?e[t]:s.Texture.EMPTY.source;r[o++]=i.source,r[o++]=i.style}let l=new i.BindGroup(r);return a[t]=l,l}(e,r)}}),h("9lsxC",function(e,t){r(e.exports,"BindGroup",function(){return i});class i{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let i in e){let r=e[i];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){let i=this.resources[t];e!==i&&(i&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){let t=this.resources;for(let i in t)t[i]._touched=e}destroy(){let e=this.resources;for(let t in e){let i=e[t];i.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}}}),h("3O2zM",function(e,t){r(e.exports,"MAX_TEXTURES",function(){return i});let i=16}),h("4uG2f",function(e,t){r(e.exports,"Batcher",function(){return p});var i=l("hAZ3a"),s=l("hqu6V"),n=l("69zdr"),a=l("i1d1I"),o=l("dUx9L"),h=l("3O2zM");class d{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let c=0,u=class e{constructor(t={}){this.uid=(0,i.uid)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0,t={...e.defaultOptions,...t};let{vertexSize:r,indexSize:n}=t;this.attributeBuffer=new s.ViewableBuffer(r*this._vertexSize*4),this.indexBuffer=new Uint16Array(n)}begin(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e.indexStart=this.indexSize,e.location=this.attributeSize,e.batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.vertexSize*this._vertexSize}checkAndUpdateTexture(e,t){let i=e.batch.textures.ids[t._source.uid];return(!!i||0===i)&&(e.textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0,e.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,e.location,e.textureId)}break(e){let t=this._elements,i=this._textureBatchPool[this._textureBatchPoolIndex++]||new o.BatchTextureArray;if(i.clear(),!t[this.elementStart])return;let r=t[this.elementStart],s=(0,a.getAdjustedBlendModeBlend)(r.blendMode,r.texture._source);4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let n=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer,p=this._batchIndexSize,g=this._batchIndexStart,f="startBatch",m=this._batchPool[this._batchPoolIndex++]||new d;for(let r=this.elementStart;r<this.elementSize;++r){let x=t[r];t[r]=null;let y=x.texture,b=y._source,v=(0,a.getAdjustedBlendModeBlend)(x.blendMode,b),w=s!==v;if(b._batchTick===c&&!w){x.textureId=b._textureBindLocation,p+=x.indexSize,x.packAttributes(n,l,x.location,x.textureId),x.packIndex(u,x.indexStart,x.location/this._vertexSize),x.batch=m;continue}b._batchTick=c,(i.count>=h.MAX_TEXTURES||w)&&(this._finishBatch(m,g,p-g,i,s,e,f),f="renderBatch",g=p,s=v,(i=this._textureBatchPool[this._textureBatchPoolIndex++]||new o.BatchTextureArray).clear(),m=this._batchPool[this._batchPoolIndex++]||new d,++c),x.textureId=b._textureBindLocation=i.count,i.ids[b.uid]=i.count,i.textures[i.count++]=b,x.batch=m,p+=x.indexSize,x.packAttributes(n,l,x.location,x.textureId),x.packIndex(u,x.indexStart,x.location/this._vertexSize)}i.count>0&&(this._finishBatch(m,g,p-g,i,s,e,f),g=p,++c),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,t,i,r,s,n,a){e.gpuBindGroup=null,e.action=a,e.batcher=this,e.textures=r,e.blendMode=s,e.start=t,e.size=i,++c,n.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){4*e<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*e)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=Math.max(e,2*this.attributeBuffer.size),i=new s.ViewableBuffer(t);(0,n.fastCopy)(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){let t=this.indexBuffer,i=Math.max(e,1.5*t.length);i+=i%2;let r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let e=0;e<t.length;e++)r[e]=t[e];else(0,n.fastCopy)(t.buffer,r.buffer);this.indexBuffer=r}destroy(){for(let e=0;e<this.batches.length;e++)this.batches[e].destroy();this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};u.defaultOptions={vertexSize:4,indexSize:6};let p=u}),h("hqu6V",function(e,t){r(e.exports,"ViewableBuffer",function(){return i});class i{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(`${e} isn't a valid view type`)}}}}),h("69zdr",function(e,t){r(e.exports,"fastCopy",function(){return i});function i(e,t){let i=e.byteLength/8|0,r=new Float64Array(e,0,i),s=new Float64Array(t,0,i);s.set(r);let n=e.byteLength-8*i;if(n>0){let r=new Uint8Array(e,8*i,n),s=new Uint8Array(t,8*i,n);s.set(r)}}}),h("i1d1I",function(e,t){r(e.exports,"getAdjustedBlendModeBlend",function(){return s});var i=l("dmXNi");function s(e,t){return"no-premultiply-alpha"===t.alphaMode&&i.BLEND_TO_NPM[e]||e}}),h("dmXNi",function(e,t){r(e.exports,"BLEND_TO_NPM",function(){return i}),r(e.exports,"STENCIL_MODES",function(){return n});let i={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var s,n=((s=n||{})[s.DISABLED=0]="DISABLED",s[s.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",s[s.MASK_ACTIVE=2]="MASK_ACTIVE",s[s.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",s[s.NONE=4]="NONE",s)}),h("dUx9L",function(e,t){r(e.exports,"BatchTextureArray",function(){return i});class i{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}}),h("77MuI",function(e,t){r(e.exports,"buildContextBatches",function(){return y});var i=l("04zBf"),s=l("hexTl"),n=l("lVbEk"),a=l("9SDHC"),o=l("lDUGZ"),h=l("cT42u"),d=l("13ziE"),c=l("bCRLA"),u=l("4s6NH"),p=l("1TEhy"),g=l("bzfki"),f=l("kkAm0");let m={rectangle:p.buildRectangle,polygon:u.buildPolygon,triangle:g.buildTriangle,circle:d.buildCircle,ellipse:d.buildCircle,roundedRectangle:d.buildCircle},x=new i.Rectangle;function y(e,t){let{geometryData:i,batches:r}=t;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let t=0;t<e.instructions.length;t++){let s=e.instructions[t];if("texture"===s.action)(function(e,t,i){let{vertices:r,uvs:s,indices:a}=i,l=a.length,d=r.length/2,c=[],u=m.rectangle,p=e.image;x.x=e.dx,x.y=e.dy,x.width=e.dw,x.height=e.dh;let g=e.transform;u.build(x,c),g&&(0,n.transformVertices)(c,g),u.triangulate(c,r,2,d,a,l);let f=p.uvs;s.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);let y=(0,o.BigPool).get(h.BatchableGraphics);y.indexOffset=l,y.indexSize=a.length-l,y.vertexOffset=d,y.vertexSize=r.length/2-d,y.color=e.style,y.alpha=e.alpha,y.texture=p,y.geometryData=i,t.push(y)})(s.data,r,i);else if("fill"===s.action||"stroke"===s.action){let e="stroke"===s.action,t=s.data.path.shapePath,n=s.data.style,a=s.data.hole;e&&a&&b(a.shapePath,n,null,!0,r,i),b(t,n,a,e,r,i)}}}function b(e,t,i,r,l,d){let{vertices:u,uvs:p,indices:g}=d,x=e.shapePrimitives.length-1;e.shapePrimitives.forEach(({shape:e,transform:y},b)=>{let v=g.length,w=u.length/2,_=[],k=m[e.type];if(k.build(e,_),y&&(0,n.transformVertices)(_,y),r){let i=e.closePath??!0;(0,c.buildLine)(_,t,!1,i,u,2,w,g,v)}else if(i&&x===b){0!==x&&console.warn("[Pixi Graphics] only the last shape have be cut out");let e=[],t=_.slice(),r=function(e){if(!e)return[];let t=e.shapePrimitives,i=[];for(let e=0;e<t.length;e++){let r=t[e].shape,s=[],n=m[r.type];n.build(r,s),i.push(s)}return i}(i.shapePath);r.forEach(i=>{e.push(t.length/2),t.push(...i)}),(0,f.triangulateWithHoles)(t,e,u,2,w,g,v)}else k.triangulate(_,u,2,w,g,v);let P=p.length/2,A=t.texture;if(A!==a.Texture.WHITE){let e=t.matrix;y&&e.append(y.clone().invert()),(0,s.buildUvs)(u,2,w,p,P,2,u.length/2-w,e)}else(0,s.buildSimpleUvs)(p,P,2,u.length/2-w);let S=(0,o.BigPool).get(h.BatchableGraphics);S.indexOffset=v,S.indexSize=g.length-v,S.vertexOffset=w,S.vertexSize=u.length/2-w,S.color=t.color,S.alpha=t.alpha,S.texture=A,S.geometryData=d,l.push(S)})}}),h("hexTl",function(e,t){function i(e,t,i,r,s,n,a,o=null){let l=0;i*=t,s*=n;let h=o.a,d=o.b,c=o.c,u=o.d,p=o.tx,g=o.ty;for(;l<a;){let a=e[i],o=e[i+1];r[s]=h*a+c*o+p,r[s+1]=d*a+u*o+g,s+=n,i+=t,l++}}function s(e,t,i,r){let s=0;for(t*=i;s<r;)e[t]=0,e[t+1]=0,t+=i,s++}r(e.exports,"buildUvs",function(){return i}),r(e.exports,"buildSimpleUvs",function(){return s})}),h("lVbEk",function(e,t){r(e.exports,"transformVertices",function(){return i});function i(e,t,i,r,s){let n=t.a,a=t.b,o=t.c,l=t.d,h=t.tx,d=t.ty;i=i||0,r=r||2,s=s||e.length/r-i;let c=i*r;for(let t=0;t<s;t++){let t=e[c],i=e[c+1];e[c]=n*t+o*i+h,e[c+1]=a*t+l*i+d,c+=r}}}),h("cT42u",function(e,t){r(e.exports,"BatchableGraphics",function(){return s});var i=l("bNLlW");class s{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(e,t,i){let r=this.geometryData.indices;for(let s=0;s<this.indexSize;s++)e[t++]=r[s+this.indexOffset]+i-this.vertexOffset}packAttributes(e,t,r,s){let n=this.geometryData,a=this.renderable,o=n.vertices,l=n.uvs,h=2*this.vertexOffset,d=(this.vertexOffset+this.vertexSize)*2,c=this.color,u=c>>16|65280&c|(255&c)<<16;if(this.applyTransform){let n=(0,i.mixColors)(u,a.groupColor)+(this.alpha*a.groupAlpha*255<<24),c=a.groupTransform,p=s<<16|65535&this.roundPixels,g=c.a,f=c.b,m=c.c,x=c.d,y=c.tx,b=c.ty;for(let i=h;i<d;i+=2){let s=o[i],a=o[i+1];e[r]=g*s+m*a+y,e[r+1]=f*s+x*a+b,e[r+2]=l[i],e[r+3]=l[i+1],t[r+4]=n,t[r+5]=p,r+=6}}else{let i=u+(255*this.alpha<<24);for(let n=h;n<d;n+=2)e[r]=o[n],e[r+1]=o[n+1],e[r+2]=l[n],e[r+3]=l[n+1],t[r+4]=i,t[r+5]=s<<16,r+=6}}get vertSize(){return this.vertexSize}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.vertexOffset=this.vertexOffset,e.vertexSize=this.vertexSize,e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData}reset(){this.applyTransform=!0}}}),h("bNLlW",function(e,t){r(e.exports,"mixColors",function(){return s});var i=l("aEF4c");function s(e,t){return 16777215===e||16777215===t?e+t-16777215:(0,i.mixHexColors)(e,t,.5)}}),h("aEF4c",function(e,t){r(e.exports,"mixHexColors",function(){return i});function i(e,t,i){let r=e>>16&255,s=e>>8&255,n=255&e;return(r+((t>>16&255)-r)*i<<16)+(s+((t>>8&255)-s)*i<<8)+(n+((255&t)-n)*i)}}),h("13ziE",function(e,t){r(e.exports,"buildCircle",function(){return i});let i={build(e,t){let i,r,s,n,a,o;if("circle"===e.type)i=e.x,r=e.y,a=o=e.radius,s=n=0;else if("ellipse"===e.type)i=e.x,r=e.y,a=e.halfWidth,o=e.halfHeight,s=n=0;else{let t=e.width/2,l=e.height/2;i=e.x+t,r=e.y+l,a=o=Math.max(0,Math.min(e.radius,Math.min(t,l))),s=t-a,n=l-o}if(!(a>=0&&o>=0&&s>=0&&n>=0))return t;let l=Math.ceil(2.3*Math.sqrt(a+o)),h=8*l+(s?4:0)+(n?4:0);if(0===h)return t;if(0===l)return t[0]=t[6]=i+s,t[1]=t[3]=r+n,t[2]=t[4]=i-s,t[5]=t[7]=r-n,t;let d=0,c=4*l+(s?2:0)+2,u=c,p=h,g=s+a,f=n,m=i+g,x=i-g,y=r+f;if(t[d++]=m,t[d++]=y,t[--c]=y,t[--c]=x,n){let e=r-f;t[u++]=x,t[u++]=e,t[--p]=e,t[--p]=m}for(let e=1;e<l;e++){let h=Math.PI/2*(e/l),g=s+Math.cos(h)*a,f=n+Math.sin(h)*o,m=i+g,x=i-g,y=r+f,b=r-f;t[d++]=m,t[d++]=y,t[--c]=y,t[--c]=x,t[u++]=x,t[u++]=b,t[--p]=b,t[--p]=m}g=s,f=n+o,m=i+g,x=i-g,y=r+f;let b=r-f;return t[d++]=m,t[d++]=y,t[--p]=b,t[--p]=m,s&&(t[d++]=x,t[d++]=y,t[--p]=b,t[--p]=x),t},triangulate(e,t,i,r,s,n){if(0===e.length)return;let a=0,o=0;for(let t=0;t<e.length;t+=2)a+=e[t],o+=e[t+1];a/=e.length/2,o/=e.length/2;let l=r;t[l*i]=a,t[l*i+1]=o;let h=l++;for(let r=0;r<e.length;r+=2)t[l*i]=e[r],t[l*i+1]=e[r+1],r>0&&(s[n++]=l,s[n++]=h,s[n++]=l-1),l++;s[n++]=h+1,s[n++]=h,s[n++]=l-1}}}),h("bCRLA",function(e,t){r(e.exports,"buildLine",function(){return h});var i=l("aSHqW"),s=l("jmRoO"),n=l("1gLx2");function a(e,t,i,r,s,n,a,o){let l,h;a?(l=r,h=-i):(l=-r,h=i);let d=e-i*s+l,c=t-r*s+h,u=e+i*n+l,p=t+r*n+h;return o.push(d,c),o.push(u,p),2}function o(e,t,i,r,s,n,a,o){let l=i-e,h=r-t,d=Math.atan2(l,h),c=Math.atan2(s-e,n-t);o&&d<c?d+=2*Math.PI:!o&&d>c&&(c+=2*Math.PI);let u=d,p=c-d,g=Math.sqrt(l*l+h*h),f=(15*Math.abs(p)*Math.sqrt(g)/Math.PI>>0)+1,m=p/f;if(u+=m,o){a.push(e,t),a.push(i,r);for(let i=1,r=u;i<f;i++,r+=m)a.push(e,t),a.push(e+Math.sin(r)*g,t+Math.cos(r)*g);a.push(e,t),a.push(s,n)}else{a.push(i,r),a.push(e,t);for(let i=1,r=u;i<f;i++,r+=m)a.push(e+Math.sin(r)*g,t+Math.cos(r)*g),a.push(e,t);a.push(s,n),a.push(e,t)}return 2*f}function h(e,t,r,l,h,d,c,u,p){let g=s.closePointEps;if(0===e.length)return;let f=t.alignment;if(.5!==t.alignment){let t=(0,n.getOrientationOfPoints)(e);r&&(t*=-1),f=(f-.5)*t+.5}let m=new i.Point(e[0],e[1]),x=new i.Point(e[e.length-2],e[e.length-1]),y=Math.abs(m.x-x.x)<g&&Math.abs(m.y-x.y)<g;if(l){e=e.slice(),y&&(e.pop(),e.pop(),x.set(e[e.length-2],e[e.length-1]));let t=(m.x+x.x)*.5,i=(x.y+m.y)*.5;e.unshift(t,i),e.push(t,i)}let b=e.length/2,v=e.length,w=h.length/2,_=t.width/2,k=_*_,P=t.miterLimit*t.miterLimit,A=e[0],S=e[1],M=e[2],E=e[3],C=0,T=0,I=-(S-E),B=A-M,L=0,R=0,O=Math.sqrt(I*I+B*B);I/=O,B/=O,I*=_,B*=_;let F=f,D=(1-F)*2,N=2*F;l||("round"===t.cap?v+=o(A-I*(D-N)*.5,S-B*(D-N)*.5,A-I*D,S-B*D,A+I*N,S+B*N,h,!0)+2:"square"===t.cap&&(v+=a(A,S,I,B,D,N,!0,h))),h.push(A-I*D,S-B*D),h.push(A+I*N,S+B*N);for(let i=1;i<b-1;++i){A=e[(i-1)*2],S=e[(i-1)*2+1],M=e[2*i],E=e[2*i+1],C=e[(i+1)*2],T=e[(i+1)*2+1],O=Math.sqrt((I=-(S-E))*I+(B=A-M)*B),I/=O,B/=O,I*=_,B*=_,O=Math.sqrt((L=-(E-T))*L+(R=M-C)*R),L/=O,R/=O,L*=_,R*=_;let r=M-A,s=S-E,n=M-C,a=T-E,l=r*n+s*a,d=s*n-a*r,c=d<0;if(Math.abs(d)<.001*Math.abs(l)){h.push(M-I*D,E-B*D),h.push(M+I*N,E+B*N),l>=0&&("round"===t.join?v+=o(M,E,M-I*D,E-B*D,M-L*D,E-R*D,h,!1)+4:v+=2,h.push(M-L*N,E-R*N),h.push(M+L*D,E+R*D));continue}let u=(-I+A)*(-B+E)-(-I+M)*(-B+S),p=(-L+C)*(-R+E)-(-L+M)*(-R+T),g=(r*p-n*u)/d,f=(a*u-s*p)/d,m=(g-M)*(g-M)+(f-E)*(f-E),x=M+(g-M)*D,y=E+(f-E)*D,b=M-(g-M)*N,w=E-(f-E)*N,F=Math.min(r*r+s*s,n*n+a*a),U=c?D:N,G=F+U*U*k,z=m<=G;z?"bevel"===t.join||m/k>P?(c?(h.push(x,y),h.push(M+I*N,E+B*N),h.push(x,y),h.push(M+L*N,E+R*N)):(h.push(M-I*D,E-B*D),h.push(b,w),h.push(M-L*D,E-R*D),h.push(b,w)),v+=2):"round"===t.join?c?(h.push(x,y),h.push(M+I*N,E+B*N),v+=o(M,E,M+I*N,E+B*N,M+L*N,E+R*N,h,!0)+4,h.push(x,y),h.push(M+L*N,E+R*N)):(h.push(M-I*D,E-B*D),h.push(b,w),v+=o(M,E,M-I*D,E-B*D,M-L*D,E-R*D,h,!1)+4,h.push(M-L*D,E-R*D),h.push(b,w)):(h.push(x,y),h.push(b,w)):(h.push(M-I*D,E-B*D),h.push(M+I*N,E+B*N),"round"===t.join?c?v+=o(M,E,M+I*N,E+B*N,M+L*N,E+R*N,h,!0)+2:v+=o(M,E,M-I*D,E-B*D,M-L*D,E-R*D,h,!1)+2:"miter"===t.join&&m/k<=P&&(c?(h.push(b,w),h.push(b,w)):(h.push(x,y),h.push(x,y)),v+=2),h.push(M-L*D,E-R*D),h.push(M+L*N,E+R*N),v+=2)}A=e[(b-2)*2],S=e[(b-2)*2+1],M=e[(b-1)*2],O=Math.sqrt((I=-(S-(E=e[(b-1)*2+1])))*I+(B=A-M)*B),I/=O,B/=O,I*=_,B*=_,h.push(M-I*D,E-B*D),h.push(M+I*N,E+B*N),l||("round"===t.cap?v+=o(M-I*(D-N)*.5,E-B*(D-N)*.5,M-I*D,E-B*D,M+I*N,E+B*N,h,!1)+2:"square"===t.cap&&(v+=a(M,E,I,B,D,N,!1,h)));let U=s.curveEps*s.curveEps;for(let e=w;e<v+w-2;++e)A=h[2*e],S=h[2*e+1],M=h[(e+1)*2],E=h[(e+1)*2+1],C=h[(e+2)*2],Math.abs(A*(E-(T=h[(e+2)*2+1]))+M*(T-S)+C*(S-E))<U||u.push(e,e+1,e+2)}}),h("jmRoO",function(e,t){r(e.exports,"closePointEps",function(){return i}),r(e.exports,"curveEps",function(){return s});let i=1e-4,s=1e-4}),h("1gLx2",function(e,t){r(e.exports,"getOrientationOfPoints",function(){return i});function i(e){let t=e.length;if(t<6)return 1;let i=0;for(let r=0,s=e[t-2],n=e[t-1];r<t;r+=2){let t=e[r],a=e[r+1];i+=(t-s)*(a+n),s=t,n=a}return i<0?-1:1}}),h("4s6NH",function(e,t){r(e.exports,"buildPolygon",function(){return n});var i=l("kkAm0");let s=[],n={build(e,t){for(let i=0;i<e.points.length;i++)t[i]=e.points[i];return t},triangulate(e,t,r,n,a,o){(0,i.triangulateWithHoles)(e,s,t,r,n,a,o)}}}),h("kkAm0",function(e,t){r(e.exports,"triangulateWithHoles",function(){return n});var i=l("85hPF");function n(e,t,r,n,a,o,l){let h=s(i)(e,t,2);if(!h)return;for(let e=0;e<h.length;e+=3)o[l++]=h[e]+a,o[l++]=h[e+1]+a,o[l++]=h[e+2]+a;let d=a*n;for(let t=0;t<e.length;t+=2)r[d]=e[t],r[d+1]=e[t+1],d+=n}}),h("85hPF",function(e,t){function i(e,t,i){i=i||2;var c,u,f,x,y,b,v,w=t&&t.length,_=w?t[0]*i:e.length,k=r(e,0,_,i,!0),P=[];if(!k||k.next===k.prev)return P;if(w&&(k=function(e,t,i,a){var h,d,c,u,f,m=[];for(h=0,d=t.length;h<d;h++)c=t[h]*a,u=h<d-1?t[h+1]*a:e.length,(f=r(e,c,u,a,!1))===f.next&&(f.steiner=!0),m.push(function(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e)return i}(f));for(m.sort(n),h=0;h<m.length;h++)i=function(e,t){var i=function(e,t){var i,r,s,n=t,a=e.x,h=e.y,d=-1/0;do{if(h<=n.y&&h>=n.next.y&&n.next.y!==n.y){var c=n.x+(h-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=a&&c>d&&(d=c,s=n.x<n.next.x?n:n.next,c===a))return s}n=n.next}while(n!==t)if(!s)return null;var u,g=s,f=s.x,m=s.y,x=1/0;n=s;do a>=n.x&&n.x>=f&&a!==n.x&&o(h<m?a:d,h,f,m,h<m?d:a,h,n.x,n.y)&&(u=Math.abs(h-n.y)/(a-n.x),p(n,e)&&(u<x||u===x&&(n.x>s.x||n.x===s.x&&(i=s,r=n,0>l(i.prev,i,r.prev)&&0>l(r.next,i,i.next))))&&(s=n,x=u)),n=n.next;while(n!==g)return s}(e,t);if(!i)return t;var r=g(i,e);return s(r,r.next),s(i,i.next)}(m[h],i);return i}(e,t,k,i)),e.length>80*i){c=f=e[0],u=x=e[1];for(var A=i;A<_;A+=i)y=e[A],b=e[A+1],y<c&&(c=y),b<u&&(u=b),y>f&&(f=y),b>x&&(x=b);v=0!==(v=Math.max(f-c,x-u))?32767/v:0}return function e(t,i,r,n,c,u,f){if(t){!f&&u&&function(e,t,i,r){var s=e;do 0===s.z&&(s.z=a(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e)s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,i,r,s,n,a,o,l,h=1;do{for(i=e,e=null,n=null,a=0;i;){for(a++,r=i,o=0,t=0;t<h&&(o++,r=r.nextZ);t++);for(l=h;o>0||l>0&&r;)0!==o&&(0===l||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,l--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;i=r}n.nextZ=null,h*=2}while(a>1)}(s)}(t,n,c,u);for(var x,y,b=t;t.prev!==t.next;){if(x=t.prev,y=t.next,u?function(e,t,i,r){var s=e.prev,n=e.next;if(l(s,e,n)>=0)return!1;for(var h=s.x,d=e.x,c=n.x,u=s.y,p=e.y,g=n.y,f=h<d?h<c?h:c:d<c?d:c,m=u<p?u<g?u:g:p<g?p:g,x=h>d?h>c?h:c:d>c?d:c,y=u>p?u>g?u:g:p>g?p:g,b=a(f,m,t,i,r),v=a(x,y,t,i,r),w=e.prevZ,_=e.nextZ;w&&w.z>=b&&_&&_.z<=v;){if(w.x>=f&&w.x<=x&&w.y>=m&&w.y<=y&&w!==s&&w!==n&&o(h,u,d,p,c,g,w.x,w.y)&&l(w.prev,w,w.next)>=0||(w=w.prevZ,_.x>=f&&_.x<=x&&_.y>=m&&_.y<=y&&_!==s&&_!==n&&o(h,u,d,p,c,g,_.x,_.y)&&l(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;w&&w.z>=b;){if(w.x>=f&&w.x<=x&&w.y>=m&&w.y<=y&&w!==s&&w!==n&&o(h,u,d,p,c,g,w.x,w.y)&&l(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=x&&_.y>=m&&_.y<=y&&_!==s&&_!==n&&o(h,u,d,p,c,g,_.x,_.y)&&l(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}(t,n,c,u):function(e){var t=e.prev,i=e.next;if(l(t,e,i)>=0)return!1;for(var r=t.x,s=e.x,n=i.x,a=t.y,h=e.y,d=i.y,c=r<s?r<n?r:n:s<n?s:n,u=a<h?a<d?a:d:h<d?h:d,p=r>s?r>n?r:n:s>n?s:n,g=a>h?a>d?a:d:h>d?h:d,f=i.next;f!==t;){if(f.x>=c&&f.x<=p&&f.y>=u&&f.y<=g&&o(r,a,s,h,n,d,f.x,f.y)&&l(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}(t)){i.push(x.i/r|0),i.push(t.i/r|0),i.push(y.i/r|0),m(t),t=y.next,b=y.next;continue}if((t=y)===b){f?1===f?e(t=function(e,t,i){var r=e;do{var n=r.prev,a=r.next.next;!h(n,a)&&d(n,r,r.next,a)&&p(n,a)&&p(a,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(a.i/i|0),m(r),m(r.next),r=e=a),r=r.next}while(r!==e)return s(r)}(s(t),i,r),i,r,n,c,u,2):2===f&&function(t,i,r,n,a,o){var c=t;do{for(var u,f,m=c.next.next;m!==c.prev;){if(c.i!==m.i&&(u=c,f=m,u.next.i!==f.i&&u.prev.i!==f.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&d(i,i.next,e,t))return!0;i=i.next}while(i!==e)return!1}(u,f)&&(p(u,f)&&p(f,u)&&function(e,t){var i=e,r=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e)return r}(u,f)&&(l(u.prev,u,f.prev)||l(u,f.prev,f))||h(u,f)&&l(u.prev,u,u.next)>0&&l(f.prev,f,f.next)>0))){var x=g(c,m);c=s(c,c.next),x=s(x,x.next),e(c,i,r,n,a,o,0),e(x,i,r,n,a,o,0);return}m=m.next}c=c.next}while(c!==t)}(t,i,r,n,c,u):e(s(t),i,r,n,c,u,1);break}}}}(k,P,i,c,u,v,0),P}function r(e,t,i,r,s){var n,a;if(s===y(e,t,i,r)>0)for(n=t;n<i;n+=r)a=f(n,e[n],e[n+1],a);else for(n=i-r;n>=t;n-=r)a=f(n,e[n],e[n+1],a);return a&&h(a,a.next)&&(m(a),a=a.next),a}function s(e,t){if(!e)return e;t||(t=e);var i,r=e;do if(i=!1,!r.steiner&&(h(r,r.next)||0===l(r.prev,r,r.next))){if(m(r),(r=t=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==t)return t}function n(e,t){return e.x-t.x}function a(e,t,i,r,s){return(e=((e=((e=((e=((e=(e-i)*s|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(t=((t=((t=((t=((t=(t-r)*s|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)<<1}function o(e,t,i,r,s,n,a,o){return(s-a)*(t-o)>=(e-a)*(n-o)&&(e-a)*(r-o)>=(i-a)*(t-o)&&(i-a)*(n-o)>=(s-a)*(r-o)}function l(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function h(e,t){return e.x===t.x&&e.y===t.y}function d(e,t,i,r){var s=u(l(e,t,i)),n=u(l(e,t,r)),a=u(l(i,r,e)),o=u(l(i,r,t));return!!(s!==n&&a!==o||0===s&&c(e,i,t)||0===n&&c(e,r,t)||0===a&&c(i,e,r)||0===o&&c(i,t,r))}function c(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function u(e){return e>0?1:e<0?-1:0}function p(e,t){return 0>l(e.prev,e,e.next)?l(e,t,e.next)>=0&&l(e,e.prev,t)>=0:0>l(e,t,e.prev)||0>l(e,e.next,t)}function g(e,t){var i=new x(e.i,e.x,e.y),r=new x(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function f(e,t,i,r){var s=new x(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function m(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function x(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(e,t,i,r){for(var s=0,n=t,a=i-r;n<i;n+=r)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}e.exports=i,e.exports.default=i,i.deviation=function(e,t,i,r){var s=t&&t.length,n=s?t[0]*i:e.length,a=Math.abs(y(e,0,n,i));if(s)for(var o=0,l=t.length;o<l;o++){var h=t[o]*i,d=o<l-1?t[o+1]*i:e.length;a-=Math.abs(y(e,h,d,i))}var c=0;for(o=0;o<r.length;o+=3){var u=r[o]*i,p=r[o+1]*i,g=r[o+2]*i;c+=Math.abs((e[u]-e[g])*(e[p+1]-e[u+1])-(e[u]-e[p])*(e[g+1]-e[u+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},i.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)i.vertices.push(e[s][n][a]);s>0&&(r+=e[s-1].length,i.holes.push(r))}return i}}),h("1TEhy",function(e,t){r(e.exports,"buildRectangle",function(){return i});let i={build(e,t){let i=e.x,r=e.y,s=e.width,n=e.height;return s>=0&&n>=0&&(t[0]=i,t[1]=r,t[2]=i+s,t[3]=r,t[4]=i+s,t[5]=r+n,t[6]=i,t[7]=r+n),t},triangulate(e,t,i,r,s,n){let a=0;t[(r*=i)+a]=e[0],t[r+a+1]=e[1],a+=i,t[r+a]=e[2],t[r+a+1]=e[3],a+=i,t[r+a]=e[6],t[r+a+1]=e[7],a+=i,t[r+a]=e[4],t[r+a+1]=e[5],a+=i;let o=r/i;s[n++]=o,s[n++]=o+1,s[n++]=o+2,s[n++]=o+1,s[n++]=o+3,s[n++]=o+2}}}),h("bzfki",function(e,t){r(e.exports,"buildTriangle",function(){return i});let i={build:(e,t)=>(t[0]=e.x,t[1]=e.y,t[2]=e.x2,t[3]=e.y2,t[4]=e.x3,t[5]=e.y3,t),triangulate(e,t,i,r,s,n){let a=0;t[(r*=i)+a]=e[0],t[r+a+1]=e[1],a+=i,t[r+a]=e[2],t[r+a+1]=e[3],a+=i,t[r+a]=e[4],t[r+a+1]=e[5];let o=r/i;s[n++]=o,s[n++]=o+1,s[n++]=o+2}}}),h("L5EZj",function(e,t){r(e.exports,"FillGradient",function(){return c});var i=l("jhEJH"),s=l("ecaWJ"),n=l("7Qkzy"),a=l("8fdRE"),o=l("9SDHC"),h=l("hAZ3a");let d=class e{constructor(e,t,i,r){this.uid=(0,h.uid)("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=e,this.y0=t,this.x1=i,this.y1=r}addColorStop(e,t){return this.gradientStops.push({offset:e,color:(0,i.Color).shared.setValue(t).toHex()}),this}buildLinearGradient(){let t=e.defaultTextureSize,{gradientStops:i}=this,r=(0,s.DOMAdapter).get().createCanvas();r.width=t,r.height=t;let l=r.getContext("2d"),h=l.createLinearGradient(0,0,e.defaultTextureSize,1);for(let e=0;e<i.length;e++){let t=i[e];h.addColorStop(t.offset,t.color)}l.fillStyle=h,l.fillRect(0,0,t,t),this.texture=new o.Texture({source:new a.ImageSource({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:d,y0:c,x1:u,y1:p}=this,g=new n.Matrix,f=u-d,m=p-c;g.translate(-d,-c),g.scale(1/t,1/t),g.rotate(-Math.atan2(m,f)),g.scale(256/Math.sqrt(f*f+m*m),1),this.transform=g}};d.defaultTextureSize=256;let c=d}),h("eNUtr",function(e,t){r(e.exports,"FillPattern",function(){return a});var i=l("7Qkzy"),s=l("hAZ3a");let n={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class a{constructor(e,t){this.uid=(0,s.uid)("fillPattern"),this.transform=new i.Matrix,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=n[t].addressModeU,e.source.style.addressModeV=n[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height)}}}),h("kJqVK",function(e,t){r(e.exports,"Graphics",function(){return a});var i=l("5k13c"),s=l("2VOjZ"),n=l("jxcfX");class a extends s.Container{constructor(e){e instanceof n.GraphicsContext&&(e={context:e});let{context:t,roundPixels:i,...r}=e||{};super({label:"Graphics",...r}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,t?this._context=t:this._context=this._ownedContext=new n.GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(e){e.addBounds(this._context.bounds)}containsPoint(e){return this._context.containsPoint(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(!0===e||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){if(e)return new a(this._context.clone());this._ownedContext=null;let t=new a(this._context);return t}lineStyle(e,t,r){(0,i.deprecation)(i.v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let s={};return e&&(s.width=e),t&&(s.color=t),r&&(s.alpha=r),this.context.strokeStyle=s,this}beginFill(e,t){(0,i.deprecation)(i.v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let r={};return e&&(r.color=e),t&&(r.alpha=t),this.context.fillStyle=r,this}endFill(){(0,i.deprecation)(i.v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let e=this.context.strokeStyle;return(e.width!==n.GraphicsContext.defaultStrokeStyle.width||e.color!==n.GraphicsContext.defaultStrokeStyle.color||e.alpha!==n.GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return(0,i.deprecation)(i.v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}}),h("jxcfX",function(e,t){r(e.exports,"GraphicsContext",function(){return b});var i=l("jFrz2"),n=l("jhEJH"),a=l("7Qkzy"),o=l("aSHqW"),h=l("9SDHC"),d=l("hAZ3a"),c=l("5k13c"),u=l("8Hzvu"),p=l("5CrWR"),g=l("8TSDI"),f=l("paKC6");let m=new o.Point,x=new a.Matrix,y=class e extends s(i){constructor(){super(...arguments),this.uid=(0,d.uid)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new p.GraphicsPath,this._transform=new a.Matrix,this._fillStyle={...e.defaultFillStyle},this._strokeStyle={...e.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new u.Bounds,this._boundsDirty=!0}clone(){let t=new e;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultStrokeStyle),this}texture(e,t,i,r,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:r||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?(0,n.Color).shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new p.GraphicsPath,this}fill(t,i){let r;let s=this.instructions[this.instructions.length-1];return(r=0===this._tick&&s&&"stroke"===s.action?s.data.path:this._activePath.clone())&&(null!=t&&(void 0!==i&&"number"==typeof t&&((0,c.deprecation)(c.v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:i}),this._fillStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(o.Point.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(t){let i;let r=this.instructions[this.instructions.length-1];return(i=0===this._tick&&r&&"fill"===r.action?r.data.path:this._activePath.clone())&&(null!=t&&(this._strokeStyle=(0,f.convertFillInputToFillStyle)(t,e.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&("stroke"===t.action||"fill"===t.action)){if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}}return this._initNextPathLocation(),this}arc(e,t,i,r,s,n){this._tick++;let a=this._transform;return this._activePath.arc(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,i,r,s,n),this}arcTo(e,t,i,r,s){this._tick++;let n=this._transform;return this._activePath.arcTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*i+n.c*r+n.tx,n.b*i+n.d*r+n.ty,s),this}arcToSvg(e,t,i,r,s,n,a){this._tick++;let o=this._transform;return this._activePath.arcToSvg(e,t,i,r,s,o.a*n+o.c*a+o.tx,o.b*n+o.d*a+o.ty),this}bezierCurveTo(e,t,i,r,s,n,a){this._tick++;let o=this._transform;return this._activePath.bezierCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,o.a*s+o.c*n+o.tx,o.b*s+o.d*n+o.ty,a),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,i,r){return this._tick++,this._activePath.ellipse(e,t,i,r,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*e+i.c*t+i.tx,n=i.b*e+i.d*t+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=s,r[0].data[1]=n):this._activePath.moveTo(s,n),this}quadraticCurveTo(e,t,i,r,s){this._tick++;let n=this._transform;return this._activePath.quadraticCurveTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*i+n.c*r+n.tx,n.b*i+n.d*r+n.ty,s),this}rect(e,t,i,r){return this._tick++,this._activePath.rect(e,t,i,r,this._transform.clone()),this}roundRect(e,t,i,r,s){return this._tick++,this._activePath.roundRect(e,t,i,r,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,r,s=0,n){return this._tick++,this._activePath.regularPoly(e,t,i,r,s,n),this}roundPoly(e,t,i,r,s,n){return this._tick++,this._activePath.roundPoly(e,t,i,r,s,n),this}roundShape(e,t,i,r){return this._tick++,this._activePath.roundShape(e,t,i,r),this}filletRect(e,t,i,r,s){return this._tick++,this._activePath.filletRect(e,t,i,r,s),this}chamferRect(e,t,i,r,s,n){return this._tick++,this._activePath.chamferRect(e,t,i,r,s,n),this}star(e,t,i,r,s=0,n=0){return this._tick++,this._activePath.star(e,t,i,r,s,n,this._transform.clone()),this}svg(e){return this._tick++,(0,g.SVGParser)(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,r,s,n){return e instanceof a.Matrix?this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty):this._transform.set(e,t,i,r,s,n),this}transform(e,t,i,r,s,n){return e instanceof a.Matrix?this._transform.append(e):(x.set(e,t,i,r,s,n),this._transform.append(x)),this}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],r=i.action;if("fill"===r){let t=i.data;e.addBounds(t.path.bounds)}else if("texture"===r){let t=i.data;e.addFrame(t.dx,t.dy,t.dx+t.dw,t.dy+t.dh,t.transform)}if("stroke"===r){let t=i.data,r=t.style.width/2,s=t.path.bounds;e.addFrame(s.minX-r,s.minY-r,s.maxX+r,s.maxY+r)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;let t=this.instructions,i=!1;for(let r=0;r<t.length;r++){let s=t[r],n=s.data,a=n.path;if(!s.action||!a)continue;let o=n.style,l=a.shapePath.shapePrimitives;for(let t=0;t<l.length;t++){let r=l[t].shape;if(!o||!r)continue;let a=l[t].transform,h=a?a.applyInverse(e,m):e;i="fill"===s.action?r.contains(h.x,h.y):r.strokeContains(h.x,h.y,o.width);let d=n.hole;if(d){let e=d.shapePath?.shapePrimitives;if(e)for(let t=0;t<e.length;t++)e[t].shape.contains(h.x,h.y)&&(i=!1)}if(i)return!0}}return i}destroy(e=!1){this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners();let t="boolean"==typeof e?e:e?.texture;if(t){let t="boolean"==typeof e?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};y.defaultFillStyle={color:16777215,alpha:1,texture:h.Texture.WHITE,matrix:null,fill:null},y.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:h.Texture.WHITE,matrix:null,fill:null};let b=y}),h("5CrWR",function(e,t){r(e.exports,"GraphicsPath",function(){return h});var i=l("aSHqW"),s=l("hAZ3a"),n=l("drBom"),a=l("6nulR"),o=l("kTsNM");class h{constructor(e){this.instructions=[],this.uid=(0,s.uid)("graphicsPath"),this._dirty=!0,"string"==typeof e?(0,a.SVGToGraphicsPath)(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new o.ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,r,s,n){let a=this.instructions[this.instructions.length-1],o=this.getLastPoint(i.Point.shared),l=0,h=0;if(a&&"bezierCurveTo"===a.action){l=a.data[2],h=a.data[3];let e=o.x,t=o.y;l=e+(e-l),h=t+(t-h)}else l=o.x,h=o.y;return this.instructions.push({action:"bezierCurveTo",data:[l,h,e,t,r,s,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,r){let s=this.instructions[this.instructions.length-1],n=this.getLastPoint(i.Point.shared),a=0,o=0;if(s&&"quadraticCurveTo"===s.action){a=s.data[0],o=s.data[1];let e=n.x,t=n.y;a=e+(e-a),o=t+(t-o)}else a=n.x,o=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,t,r]}),this._dirty=!0,this}rect(e,t,i,r,s){return this.instructions.push({action:"rect",data:[e,t,i,r,s]}),this._dirty=!0,this}circle(e,t,i,r){return this.instructions.push({action:"circle",data:[e,t,i,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,r,s,n,a){s=s||r/2;let o=-1*Math.PI/2+n,l=2*i,h=2*Math.PI/l,d=[];for(let i=0;i<l;i++){let n=i%2?s:r,a=i*h+o;d.push(e+n*Math.cos(a),t+n*Math.sin(a))}return this.poly(d,!0,a),this}clone(e=!1){let t=new h;if(e)for(let e=0;e<this.instructions.length;e++){let i=this.instructions[e];t.instructions.push({action:i.action,data:i.data.slice()})}else t.instructions=this.instructions.slice();return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,i=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty,l=0,h=0,c=0,u=0,p=0,g=0,f=0,m=0;for(let x=0;x<this.instructions.length;x++){let y=this.instructions[x],b=y.data;switch(y.action){case"moveTo":case"lineTo":l=b[0],h=b[1],b[0]=t*l+r*h+a,b[1]=i*l+s*h+o;break;case"bezierCurveTo":c=b[0],u=b[1],p=b[2],g=b[3],l=b[4],h=b[5],b[0]=t*c+r*u+a,b[1]=i*c+s*u+o,b[2]=t*p+r*g+a,b[3]=i*p+s*g+o,b[4]=t*l+r*h+a,b[5]=i*l+s*h+o;break;case"quadraticCurveTo":c=b[0],u=b[1],l=b[2],h=b[3],b[0]=t*c+r*u+a,b[1]=i*c+s*u+o,b[2]=t*l+r*h+a,b[3]=i*l+s*h+o;break;case"arcToSvg":l=b[5],h=b[6],f=b[0],m=b[1],b[0]=t*f+r*m,b[1]=i*f+s*m,b[5]=t*l+r*h+a,b[6]=i*l+s*h+o;break;case"circle":b[4]=d(b[3],e);break;case"rect":b[4]=d(b[4],e);break;case"ellipse":b[8]=d(b[8],e);break;case"roundRect":b[5]=d(b[5],e);break;case"addPath":b[0].transform(e);break;case"poly":b[2]=d(b[2],e);break;default:(0,n.warn)("unknown transform action",y.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;"closePath"===i.action;){if(--t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e)}return e}}function d(e,t){return e?e.prepend(t):t.clone()}}),h("6nulR",function(e,t){r(e.exports,"SVGToGraphicsPath",function(){return a});var i=l("kWhte"),n=l("drBom");function a(e,t){let r=s(i)(e),a=[],o=null,l=0,h=0;for(let e=0;e<r.length;e++){let i=r[e],s=i[0];switch(s){case"M":l=i[1],h=i[2],t.moveTo(l,h);break;case"m":l+=i[1],h+=i[2],t.moveTo(l,h);break;case"H":l=i[1],t.lineTo(l,h);break;case"h":l+=i[1],t.lineTo(l,h);break;case"V":h=i[1],t.lineTo(l,h);break;case"v":h+=i[1],t.lineTo(l,h);break;case"L":l=i[1],h=i[2],t.lineTo(l,h);break;case"l":l+=i[1],h+=i[2],t.lineTo(l,h);break;case"C":l=i[5],h=i[6],t.bezierCurveTo(i[1],i[2],i[3],i[4],l,h);break;case"c":t.bezierCurveTo(l+i[1],h+i[2],l+i[3],h+i[4],l+i[5],h+i[6]),l+=i[5],h+=i[6];break;case"S":l=i[3],h=i[4],t.bezierCurveToShort(i[1],i[2],l,h);break;case"s":t.bezierCurveToShort(l+i[1],h+i[2],l+i[3],h+i[4]),l+=i[3],h+=i[4];break;case"Q":l=i[3],h=i[4],t.quadraticCurveTo(i[1],i[2],l,h);break;case"q":t.quadraticCurveTo(l+i[1],h+i[2],l+i[3],h+i[4]),l+=i[3],h+=i[4];break;case"T":l=i[1],h=i[2],t.quadraticCurveToShort(l,h);break;case"t":l+=i[1],h+=i[2],t.quadraticCurveToShort(l,h);break;case"A":l=i[6],h=i[7],t.arcToSvg(i[1],i[2],i[3],i[4],i[5],l,h);break;case"a":l+=i[6],h+=i[7],t.arcToSvg(i[1],i[2],i[3],i[4],i[5],l,h);break;case"Z":case"z":t.closePath(),a.length>0&&((o=a.pop())?(l=o.startX,h=o.startY):(l=0,h=0)),o=null;break;default:(0,n.warn)(`Unknown SVG path command: ${s}`)}"Z"!==s&&"z"!==s&&null===o&&(o={startX:l,startY:h},a.push(o))}return t}}),h("kWhte",function(e,t){e.exports=function(e){var t=[];return e.replace(r,function(e,r,n){var a,o=r.toLowerCase();for(n=(a=n.match(s))?a.map(Number):[],"m"==o&&n.length>2&&(t.push([r].concat(n.splice(0,2))),o="l",r="m"==r?"l":"L");;){if(n.length==i[o])return n.unshift(r),t.push(n);if(n.length<i[o])throw Error("malformed path data");t.push([r].concat(n.splice(0,i[o])))}}),t};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig}),h("kTsNM",function(e,t){r(e.exports,"ShapePath",function(){return x});var i=l("4Xrcx"),s=l("gbh0Q"),n=l("5Sytt"),a=l("04zBf"),o=l("u2HYO"),h=l("8Hzvu"),d=l("g31Cz"),c=l("8xsDb"),u=l("74aVy"),p=l("1fAMb"),g=l("fnVqM"),f=l("eN5hP");let m=new a.Rectangle;class x{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new h.Bounds,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==e||s!==t)&&i.push(e,t),this}arc(e,t,i,r,s,n){this._ensurePoly(!1);let a=this._currentPoly.points;return(0,u.buildArc)(a,e,t,i,r,s,n),this}arcTo(e,t,i,r,s){this._ensurePoly();let n=this._currentPoly.points;return(0,p.buildArcTo)(n,e,t,i,r,s),this}arcToSvg(e,t,i,r,s,n,a){let o=this._currentPoly.points;return(0,g.buildArcToSvg)(o,this._currentPoly.lastX,this._currentPoly.lastY,n,a,e,t,i,r,s),this}bezierCurveTo(e,t,i,r,s,n,a){this._ensurePoly();let o=this._currentPoly;return(0,d.buildAdaptiveBezier)(this._currentPoly.points,o.lastX,o.lastY,e,t,i,r,s,n,a),this}quadraticCurveTo(e,t,i,r,s){this._ensurePoly();let n=this._currentPoly;return(0,c.buildAdaptiveQuadratic)(this._currentPoly.points,n.lastX,n.lastY,e,t,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0)).transform(t);for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,r,s){return this.drawShape(new a.Rectangle(e,t,i,r),s),this}circle(e,t,r,s){return this.drawShape(new i.Circle(e,t,r),s),this}poly(e,t,i){let r=new n.Polygon(e);return r.closePath=t,this.drawShape(r,i),this}regularPoly(e,t,i,r,s=0,n){r=Math.max(0|r,3);let a=-1*Math.PI/2+s,o=2*Math.PI/r,l=[];for(let s=0;s<r;s++){let r=s*o+a;l.push(e+i*Math.cos(r),t+i*Math.sin(r))}return this.poly(l,!0,n),this}roundPoly(e,t,i,r,s,n=0,a){if(r=Math.max(0|r,3),s<=0)return this.regularPoly(e,t,i,r,n);let o=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,o);let l=-1*Math.PI/2+n,h=2*Math.PI/r,d=(r-2)*Math.PI/r/2;for(let n=0;n<r;n++){let r=n*h+l,o=e+i*Math.cos(r),c=t+i*Math.sin(r),u=r+Math.PI+d,p=r-Math.PI-d,g=o+s*Math.cos(u),f=c+s*Math.sin(u),m=o+s*Math.cos(p),x=c+s*Math.sin(p);0===n?this.moveTo(g,f):this.lineTo(g,f),this.quadraticCurveTo(o,c,m,x,a)}return this.closePath()}roundShape(e,t,i=!1,r){return e.length<3?this:(i?(0,f.roundedShapeQuadraticCurve)(this,e,t,r):(0,f.roundedShapeArc)(this,e,t),this.closePath())}filletRect(e,t,i,r,s){if(0===s)return this.rect(e,t,i,r);let n=Math.min(i,r)/2,a=Math.min(n,Math.max(-n,s)),o=e+i,l=t+r,h=a<0?-a:0,d=Math.abs(a);return this.moveTo(e,t+d).arcTo(e+h,t+h,e+d,t,d).lineTo(o-d,t).arcTo(o-h,t+h,o,t+d,d).lineTo(o,l-d).arcTo(o-h,l-h,e+i-d,l,d).lineTo(e+d,l).arcTo(e+h,l-h,e,l-d,d).closePath()}chamferRect(e,t,i,r,s,n){if(s<=0)return this.rect(e,t,i,r);let a=Math.min(s,Math.min(i,r)/2),o=e+i,l=t+r,h=[e+a,t,o-a,t,o,t+a,o,l-a,o-a,l,e+a,l,e,l-a,e,t+a];for(let e=h.length-1;e>=2;e-=2)h[e]===h[e-2]&&h[e-1]===h[e-3]&&h.splice(e-1,2);return this.poly(h,!0,n)}ellipse(e,t,i,r,n){return this.drawShape(new s.Ellipse(e,t,i,r),n),this}roundRect(e,t,i,r,s,n){return this.drawShape(new o.RoundedRectangle(e,t,i,r,s),n),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),(i=new n.Polygon).points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new n.Polygon,e)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let t=e.shape.x,i=e.shape.y;if(!e.transform.isIdentity()){let r=e.transform,s=t;t=r.a*t+r.c*i+r.tx,i=r.b*s+r.d*i+r.ty}this._currentPoly.points.push(t,i)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let i=0;i<t.length;i++){let r=t[i],s=r.shape.getBounds(m);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}}}),h("4Xrcx",function(e,t){r(e.exports,"Circle",function(){return s});var i=l("04zBf");class s{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new s(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=i}strokeContains(e,t,i){if(0===this.radius)return!1;let r=this.x-e,s=this.y-t,n=this.radius,a=i/2,o=Math.sqrt(r*r+s*s);return o<n+a&&o>n-a}getBounds(e){return(e=e||new i.Rectangle).x=this.x-this.radius,e.y=this.y-this.radius,e.width=2*this.radius,e.height=2*this.radius,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),h("gbh0Q",function(e,t){r(e.exports,"Ellipse",function(){return s});var i=l("04zBf");class s{constructor(e=0,t=0,i=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=r}clone(){return new s(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(e,t,i){let{halfWidth:r,halfHeight:s}=this;if(r<=0||s<=0)return!1;let n=i/2,a=r-n,o=s-n,l=r+n,h=s+n,d=e-this.x,c=t-this.y;return d*d/(a*a)+c*c/(o*o)>1&&d*d/(l*l)+c*c/(h*h)<=1}getBounds(){return new i.Rectangle(this.x-this.halfWidth,this.y-this.halfHeight,2*this.halfWidth,2*this.halfHeight)}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}}),h("5Sytt",function(e,t){r(e.exports,"Polygon",function(){return n});var i=l("iCqeS"),s=l("04zBf");class n{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){let e=[];for(let i=0,r=t.length;i<r;i++)e.push(t[i].x,t[i].y);t=e}this.points=t,this.closePath=!0}clone(){let e=this.points.slice(),t=new n(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1,r=this.points.length/2;for(let s=0,n=r-1;s<r;n=s++){let r=this.points[2*s],a=this.points[2*s+1],o=this.points[2*n],l=this.points[2*n+1],h=a>t!=l>t&&e<(o-r)*((t-a)/(l-a))+r;h&&(i=!i)}return i}strokeContains(e,t,r){let s=r/2,n=s*s,{points:a}=this,o=a.length-(this.closePath?0:2);for(let r=0;r<o;r+=2){let s=a[r],o=a[r+1],l=a[(r+2)%a.length],h=a[(r+3)%a.length],d=(0,i.squaredDistanceToLineSegment)(e,t,s,o,l,h);if(d<=n)return!0}return!1}getBounds(e){e=e||new s.Rectangle;let t=this.points,i=1/0,r=-1/0,n=1/0,a=-1/0;for(let e=0,s=t.length;e<s;e+=2){let s=t[e],o=t[e+1];i=s<i?s:i,r=s>r?s:r,n=o<n?o:n,a=o>a?o:a}return e.x=i,e.width=r-i,e.y=n,e.height=a-n,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}}),h("iCqeS",function(e,t){r(e.exports,"squaredDistanceToLineSegment",function(){return i});function i(e,t,i,r,s,n){let a,o;let l=s-i,h=n-r,d=l*l+h*h,c=-1;0!==d&&(c=((e-i)*l+(t-r)*h)/d),c<0?(a=i,o=r):c>1?(a=s,o=n):(a=i+c*l,o=r+c*h);let u=e-a,p=t-o;return u*u+p*p}}),h("u2HYO",function(e,t){r(e.exports,"RoundedRectangle",function(){return n});var i=l("04zBf");let s=(e,t,i,r,s,n)=>{let a=e-i,o=t-r,l=Math.sqrt(a*a+o*o);return l>=s-n&&l<=s+n};class n{constructor(e=0,t=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=r,this.radius=s}getBounds(e){return(e=e||new i.Rectangle).x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new n(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=t-(this.y+i),n=i*i;if(r*r+s*s<=n||(r=e-(this.x+this.width-i))*r+s*s<=n||r*r+(s=t-(this.y+this.height-i))*s<=n||(r=e-(this.x+i))*r+s*s<=n)return!0}return!1}strokeContains(e,t,i){let{x:r,y:n,width:a,height:o,radius:l}=this,h=i/2,d=r+l,c=n+l,u=a-2*l,p=o-2*l,g=r+a,f=n+o;return(e>=r-h&&e<=r+h||e>=g-h&&e<=g+h)&&t>=c&&t<=c+p||(t>=n-h&&t<=n+h||t>=f-h&&t<=f+h)&&e>=d&&e<=d+u||e<d&&t<c&&s(e,t,d,c,l,h)||e>g-l&&t<c&&s(e,t,g-l,c,l,h)||e>g-l&&t>f-l&&s(e,t,g-l,f-l,l,h)||e<d&&t>f-l&&s(e,t,d,f-l,l,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}}),h("g31Cz",function(e,t){r(e.exports,"buildAdaptiveBezier",function(){return s});var i=l("2fYDh");function s(e,t,r,s,n,a,o,l,h,d){let c=Math.min(.99,Math.max(0,d??i.GraphicsContextSystem.defaultOptions.bezierSmoothness)),u=(1-c)/1;return function e(t,i,r,s,n,a,o,l,h,d,c){if(c>8)return;let u=(t+r)/2,p=(i+s)/2,g=(r+n)/2,f=(s+a)/2,m=(n+o)/2,x=(a+l)/2,y=(u+g)/2,b=(p+f)/2,v=(g+m)/2,w=(f+x)/2,_=(y+v)/2,k=(b+w)/2;if(c>0){let e=o-t,c=l-i,u=Math.abs((r-o)*c-(s-l)*e),p=Math.abs((n-o)*c-(a-l)*e);if(u>11920929e-14&&p>11920929e-14){if((u+p)*(u+p)<=d*(e*e+c*c)){h.push(_,k);return}}else if(u>11920929e-14){if(u*u<=d*(e*e+c*c)){h.push(_,k);return}}else if(p>11920929e-14){if(p*p<=d*(e*e+c*c)){h.push(_,k);return}}else if((e=_-(t+o)/2)*e+(c=k-(i+l)/2)*c<=d){h.push(_,k);return}}e(t,i,u,p,y,b,_,k,h,d,c+1),e(_,k,v,w,m,x,o,l,h,d,c+1)}(t,r,s,n,a,o,l,h,e,u*=u,0),e.push(l,h),e}}),h("8xsDb",function(e,t){r(e.exports,"buildAdaptiveQuadratic",function(){return s});var i=l("2fYDh");function s(e,t,r,s,n,a,o,l){let h=Math.min(.99,Math.max(0,l??i.GraphicsContextSystem.defaultOptions.bezierSmoothness)),d=(1-h)/1;return function e(t,i,r,s,n,a,o,l,h){if(h>8)return;let d=(i+s)/2,c=(r+n)/2,u=(s+a)/2,p=(n+o)/2,g=(d+u)/2,f=(c+p)/2,m=a-i,x=o-r,y=Math.abs((s-a)*x-(n-o)*m);if(y>11920929e-14){if(y*y<=l*(m*m+x*x)){t.push(g,f);return}}else if((m=g-(i+a)/2)*m+(x=f-(r+o)/2)*x<=l){t.push(g,f);return}e(t,i,r,d,c,g,f,l,h+1),e(t,g,f,u,p,a,o,l,h+1)}(e,t,r,s,n,a,o,d*=d,0),e.push(a,o),e}}),h("74aVy",function(e,t){r(e.exports,"buildArc",function(){return i});function i(e,t,i,r,s,n,a,o){let l=Math.abs(s-n);!a&&s>n?l=2*Math.PI-l:a&&n>s&&(l=2*Math.PI-l),o=Math.max(o=o||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(l/Math.PI))),3);let h=l/o,d=s;h*=a?-1:1;for(let s=0;s<o+1;s++){let s=Math.cos(d),n=Math.sin(d),a=t+s*r,o=i+n*r;e.push(a,o),d+=h}}}),h("1fAMb",function(e,t){r(e.exports,"buildArcTo",function(){return s});var i=l("74aVy");function s(e,t,r,s,n,a){let o=e[e.length-2],l=e[e.length-1],h=l-r,d=o-t,c=n-r,u=s-t,p=Math.abs(h*u-d*c);if(p<1e-8||0===a){(e[e.length-2]!==t||e[e.length-1]!==r)&&e.push(t,r);return}let g=h*h+d*d,f=c*c+u*u,m=h*c+d*u,x=a*Math.sqrt(g)/p,y=a*Math.sqrt(f)/p,b=x*m/g,v=y*m/f,w=x*u+y*d,_=x*c+y*h;(0,i.buildArc)(e,w+t,_+r,a,Math.atan2(h*(y+b)-_,d*(y+b)-w),Math.atan2(c*(x+v)-_,u*(x+v)-w),d*c>u*h)}}),h("fnVqM",function(e,t){r(e.exports,"buildArcToSvg",function(){return d});var i=l("g31Cz");let s=2*Math.PI,n={centerX:0,centerY:0,ang1:0,ang2:0},a=({x:e,y:t},i,r,s,n,a,o,l)=>{e*=i,t*=r;let h=s*e-n*t,d=n*e+s*t;return l.x=h+a,l.y=d+o,l},o=(e,t,i,r)=>{let s=e*i+t*r;return s>1&&(s=1),s<-1&&(s=-1),(e*r-t*i<0?-1:1)*Math.acos(s)},h=(e,t,i,r,n,a,l,h,d,c,u,p,g)=>{let f=Math.pow(n,2),m=Math.pow(a,2),x=Math.pow(u,2),y=Math.pow(p,2),b=f*m-f*y-m*x;b<0&&(b=0),b/=f*y+m*x,b=Math.sqrt(b)*(l===h?-1:1);let v=b*n/a*p,w=-(b*a)/n*u,_=(u-v)/n,k=(p-w)/a,P=o(1,0,_,k),A=o(_,k,(-u-v)/n,(-p-w)/a);0===h&&A>0&&(A-=s),1===h&&A<0&&(A+=s),g.centerX=c*v-d*w+(e+i)/2,g.centerY=d*v+c*w+(t+r)/2,g.ang1=P,g.ang2=A};function d(e,t,r,o,l,d,c,u=0,p=0,g=0){if(0===d||0===c)return;let f=Math.sin(u*s/360),m=Math.cos(u*s/360),x=m*(t-o)/2+f*(r-l)/2,y=-f*(t-o)/2+m*(r-l)/2;if(0===x&&0===y)return;d=Math.abs(d),c=Math.abs(c);let b=Math.pow(x,2)/Math.pow(d,2)+Math.pow(y,2)/Math.pow(c,2);b>1&&(d*=Math.sqrt(b),c*=Math.sqrt(b)),h(t,r,o,l,d,c,p,g,f,m,x,y,n);let{ang1:v,ang2:w}=n,{centerX:_,centerY:k}=n,P=Math.abs(w)/(s/4);1e-7>Math.abs(1-P)&&(P=1);let A=Math.max(Math.ceil(P),1);w/=A;let S=e[e.length-2],M=e[e.length-1],E={x:0,y:0};for(let t=0;t<A;t++){let t=function(e,t){let i=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=Math.cos(e),s=Math.sin(e),n=Math.cos(e+t),a=Math.sin(e+t);return[{x:r-s*i,y:s+r*i},{x:n+a*i,y:a-n*i},{x:n,y:a}]}(v,w),{x:r,y:s}=a(t[0],d,c,m,f,_,k,E),{x:n,y:o}=a(t[1],d,c,m,f,_,k,E),{x:l,y:h}=a(t[2],d,c,m,f,_,k,E);(0,i.buildAdaptiveBezier)(e,S,M,r,s,n,o,l,h),S=l,M=h,v+=w}}}),h("eN5hP",function(e,t){function i(e,t,i){let r=(e,t)=>{let i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return{len:s,nx:i/s,ny:r/s}},s=(t,i)=>{0===t?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y)},n=t[t.length-1];for(let a=0;a<t.length;a++){let o;let l=t[a%t.length],h=l.radius??i;if(h<=0){s(a,l),n=l;continue}let d=t[(a+1)%t.length],c=r(l,n),u=r(l,d);if(c.len<1e-4||u.len<1e-4){s(a,l),n=l;continue}let p=Math.asin(c.nx*u.ny-c.ny*u.nx),g=1,f=!1;c.nx*u.nx- -(c.ny*u.ny)<0?p<0?p=Math.PI+p:(p=Math.PI-p,g=-1,f=!0):p>0&&(g=-1,f=!0);let m=p/2,x=Math.abs(Math.cos(m)*h/Math.sin(m));o=x>Math.min(c.len/2,u.len/2)?Math.abs((x=Math.min(c.len/2,u.len/2))*Math.sin(m)/Math.cos(m)):h;let y=l.x+u.nx*x+-u.ny*o*g,b=l.y+u.ny*x+u.nx*o*g,v=Math.atan2(c.ny,c.nx)+Math.PI/2*g,w=Math.atan2(u.ny,u.nx)-Math.PI/2*g;0===a&&e.moveTo(y+Math.cos(v)*o,b+Math.sin(v)*o),e.arc(y,b,o,v,w,f),n=l}}function s(e,t,i,r){let s=(e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),n=(e,t,i)=>({x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}),a=t.length;for(let o=0;o<a;o++){let l,h;let d=t[(o+1)%a],c=d.radius??i;if(c<=0){0===o?e.moveTo(d.x,d.y):e.lineTo(d.x,d.y);continue}let u=t[o],p=t[(o+2)%a],g=s(u,d);if(g<1e-4)l=d;else{let e=Math.min(g/2,c);l=n(d,u,e/g)}let f=s(p,d);if(f<1e-4)h=d;else{let e=Math.min(f/2,c);h=n(d,p,e/f)}0===o?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y),e.quadraticCurveTo(d.x,d.y,h.x,h.y,r)}}r(e.exports,"roundedShapeArc",function(){return i}),r(e.exports,"roundedShapeQuadraticCurve",function(){return s})}),h("8TSDI",function(e,t){r(e.exports,"SVGParser",function(){return n});var i=l("jhEJH"),s=l("5CrWR");function n(e,t){if("string"==typeof e){let t=document.createElement("div");t.innerHTML=e.trim(),e=t.querySelector("svg")}let r={context:t,path:new s.GraphicsPath};return function e(t,r,n,o){let l,h,d,c,u,p,g,f,m,x,y,b,v,w,_,k;let P=t.children,{fillStyle:A,strokeStyle:S}=function(e){let t=e.getAttribute("style"),r={},s={},n=!1,o=!1;if(t){let e=t.split(";");for(let t=0;t<e.length;t++){let a=e[t],[l,h]=a.split(":");switch(l){case"stroke":"none"!==h&&(r.color=(0,i.Color).shared.setValue(h).toNumber(),o=!0);break;case"stroke-width":r.width=Number(h);break;case"fill":"none"!==h&&(n=!0,s.color=(0,i.Color).shared.setValue(h).toNumber());break;case"fill-opacity":s.alpha=Number(h);break;case"stroke-opacity":r.alpha=Number(h);break;case"opacity":s.alpha=Number(h),r.alpha=Number(h)}}}else{let t=e.getAttribute("stroke");t&&"none"!==t&&(o=!0,r.color=(0,i.Color).shared.setValue(t).toNumber(),r.width=a(e,"stroke-width",1));let l=e.getAttribute("fill");l&&"none"!==l&&(n=!0,s.color=(0,i.Color).shared.setValue(l).toNumber())}return{strokeStyle:o?r:null,fillStyle:n?s:null}}(t);switch(A&&n?n={...n,...A}:A&&(n=A),S&&o?o={...o,...S}:S&&(o=S),r.context.fillStyle=n,r.context.strokeStyle=o,t.nodeName.toLowerCase()){case"path":v=t.getAttribute("d"),w=new s.GraphicsPath(v),r.context.path(w),n&&r.context.fill(),o&&r.context.stroke();break;case"circle":g=a(t,"cx",0),f=a(t,"cy",0),m=a(t,"r",0),r.context.ellipse(g,f,m,m),n&&r.context.fill(),o&&r.context.stroke();break;case"rect":l=a(t,"x",0),h=a(t,"y",0),_=a(t,"width",0),k=a(t,"height",0),x=a(t,"rx",0),y=a(t,"ry",0),x||y?r.context.roundRect(l,h,_,k,x||y):r.context.rect(l,h,_,k),n&&r.context.fill(),o&&r.context.stroke();break;case"ellipse":g=a(t,"cx",0),f=a(t,"cy",0),x=a(t,"rx",0),y=a(t,"ry",0),r.context.beginPath(),r.context.ellipse(g,f,x,y),n&&r.context.fill(),o&&r.context.stroke();break;case"line":d=a(t,"x1",0),c=a(t,"y1",0),u=a(t,"x2",0),p=a(t,"y2",0),r.context.beginPath(),r.context.moveTo(d,c),r.context.lineTo(u,p),o&&r.context.stroke();break;case"polygon":b=t.getAttribute("points").match(/\d+/g).map(e=>parseInt(e,10)),r.context.poly(b,!0),n&&r.context.fill(),o&&r.context.stroke();break;case"polyline":b=t.getAttribute("points").match(/\d+/g).map(e=>parseInt(e,10)),r.context.poly(b,!1),o&&r.context.stroke();break;case"g":case"svg":break;default:console.info(`[SVG parser] <${t.nodeName}> elements unsupported`)}for(let t=0;t<P.length;t++)e(P[t],r,n,o)}(e,r,null,null),t}function a(e,t,i){let r=e.getAttribute(t);return r?Number(r):i}}),h("paKC6",function(e,t){r(e.exports,"convertFillInputToFillStyle",function(){return h});var i=l("jhEJH"),s=l("7Qkzy"),n=l("9SDHC"),a=l("L5EZj"),o=l("eNUtr");function h(e,t){let r,l;if(null==e)return null;if(e?.fill?(l=e.fill,r={...t,...e}):(l=e,r=t),(0,i.Color).isColorLike(l)){let e=(0,i.Color).shared.setValue(l??0),t={...r,color:e.toNumber(),alpha:1===e.alpha?r.alpha:e.alpha,texture:n.Texture.WHITE};return t}if(l instanceof o.FillPattern){let e=l;return{...r,color:16777215,texture:e.texture,matrix:e.transform,fill:r.fill??null}}if(l instanceof a.FillGradient){let e=l;return e.buildLinearGradient(),{...r,color:16777215,texture:e.texture,matrix:e.transform}}let h={...t,...e};if(h.texture){if(h.texture!==n.Texture.WHITE){let e=h.matrix?.invert()||new s.Matrix;e.scale(1/h.texture.frame.width,1/h.texture.frame.height),h.matrix=e}let e=h.texture.source.style;"clamp-to-edge"===e.addressMode&&(e.addressMode="repeat")}let d=(0,i.Color).shared.setValue(h.color);return h.alpha*=d.alpha,h.color=d.toNumber(),h.matrix=h.matrix?h.matrix.clone():null,h}}),h("8Ebx7",function(e,t){r(e.exports,"CanvasTextMetrics",function(){return o});var i=l("ecaWJ"),s=l("5j1om");let n={willReadFrequently:!0},a=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(void 0!==t){let r=(0,i.DOMAdapter).get().getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return t}constructor(e,t,i,r,s,n,a,o,l){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=s,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=l}static measureText(t=" ",i,r=e._canvas,n=i.wordWrap){let a=`${t}:${i.styleKey}`;if(e._measurementCache[a])return e._measurementCache[a];let o=(0,s.fontStringFromTextStyle)(i),l=e.measureFont(o);0===l.fontSize&&(l.fontSize=i.fontSize,l.ascent=i.fontSize);let h=e.__context;h.font=o;let d=n?e._wordWrap(t,i,r):t,c=d.split(/(?:\r\n|\r|\n)/),u=Array(c.length),p=0;for(let t=0;t<c.length;t++){let r=e._measureText(c[t],i.letterSpacing,h);u[t]=r,p=Math.max(p,r)}let g=i._stroke?.width||0,f=p+g;i.dropShadow&&(f+=i.dropShadow.distance);let m=i.lineHeight||l.fontSize+g,x=Math.max(m,l.fontSize+2*g)+(c.length-1)*(m+i.leading);i.dropShadow&&(x+=i.dropShadow.distance);let y=new e(t,i,f,x,c,u,m+i.leading,p,l);return y}static _measureText(t,i,r){let s=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let n=r.measureText(t).width;return n>0&&(s?n-=i:n+=(e.graphemeSegmenter(t).length-1)*i),n}static _wordWrap(t,i,r=e._canvas){let s=r.getContext("2d",n),a=0,o="",l="",h=Object.create(null),{letterSpacing:d,whiteSpace:c}=i,u=e._collapseSpaces(c),p=e._collapseNewlines(c),g=!u,f=i.wordWrapWidth+d,m=e._tokenize(t);for(let t=0;t<m.length;t++){let r=m[t];if(e._isNewline(r)){if(!p){l+=e._addLine(o),g=!u,o="",a=0;continue}r=" "}if(u){let t=e.isBreakingSpace(r),i=e.isBreakingSpace(o[o.length-1]);if(t&&i)continue}let n=e._getFromCache(r,d,h,s);if(n>f){if(""!==o&&(l+=e._addLine(o),o="",a=0),e.canBreakWords(r,i.breakWords)){let t=e.wordWrapSplit(r);for(let n=0;n<t.length;n++){let c=t[n],u=c,p=1;for(;t[n+p];){let s=t[n+p];if(e.canBreakChars(u,s,r,n,i.breakWords))break;c+=s,u=s,p++}n+=p-1;let m=e._getFromCache(c,d,h,s);m+a>f&&(l+=e._addLine(o),g=!1,o="",a=0),o+=c,a+=m}}else{o.length>0&&(l+=e._addLine(o),o="",a=0);let i=t===m.length-1;l+=e._addLine(r,!i),g=!1,o="",a=0}}else n+a>f&&(g=!1,l+=e._addLine(o),o="",a=0),(o.length>0||!e.isBreakingSpace(r)||g)&&(o+=r,a+=n)}return l+e._addLine(o,!1)}static _addLine(t,i=!0){return t=e._trimRight(t),t=i?`${t}
`:t}static _getFromCache(t,i,r,s){let n=r[t];return"number"!=typeof n&&(n=e._measureText(t,i,s)+i,r[t]=n),n}static _collapseSpaces(e){return"normal"===e||"pre-line"===e}static _collapseNewlines(e){return"normal"===e}static _trimRight(t){if("string"!=typeof t)return"";for(let i=t.length-1;i>=0;i--){let r=t[i];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static _isNewline(t){return"string"==typeof t&&e._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,i){return"string"==typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){let i=[],r="";if("string"!=typeof t)return i;for(let s=0;s<t.length;s++){let n=t[s],a=t[s+1];if(e.isBreakingSpace(n,a)||e._isNewline(n)){""!==r&&(i.push(r),r=""),i.push(n);continue}r+=n}return""!==r&&i.push(r),i}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,s){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];let i=e._context;i.font=t;let r=i.measureText(e.METRICS_STRING+e.BASELINE_SYMBOL),s={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return e._fonts[t]=s,s}static clearMetrics(t=""){t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let t;try{let r=new OffscreenCanvas(0,0),s=r.getContext("2d",n);if(s?.measureText)return e.__canvas=r,r;t=(0,i.DOMAdapter).get().createCanvas()}catch(e){t=(0,i.DOMAdapter).get().createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}static get _context(){return e.__context||(e.__context=e._canvas.getContext("2d",n)),e.__context}};a.METRICS_STRING="|\xc9q\xc5",a.BASELINE_SYMBOL="M",a.BASELINE_MULTIPLIER=1.4,a.HEIGHT_MULTIPLIER=2,a.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let e=new Intl.Segmenter;return t=>[...e.segment(t)].map(e=>e.segment)}return e=>[...e]})(),a.experimentalLetterSpacing=!1,a._fonts={},a._newlines=[10,13],a._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],a._measurementCache={};let o=a}),h("5j1om",function(e,t){r(e.exports,"fontStringFromTextStyle",function(){return s});let i=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function s(e){let t="number"==typeof e.fontSize?`${e.fontSize}px`:e.fontSize,r=e.fontFamily;Array.isArray(e.fontFamily)||(r=e.fontFamily.split(","));for(let e=r.length-1;e>=0;e--){let t=r[e].trim();/([\"\'])[^\'\"]+\1/.test(t)||i.includes(t)||(t=`"${t}"`),r[e]=t}return`${e.fontStyle} ${e.fontVariant} ${e.fontWeight} ${t} ${r.join(",")}`}}),h("iL5W8",function(e,t){r(e.exports,"TextStyle",function(){return p});var i=l("jFrz2"),n=l("jhEJH"),a=l("5k13c"),o=l("L5EZj"),h=l("jxcfX"),d=l("paKC6"),c=l("fbAxm");let u=class e extends s(i){constructor(t={}){super(),function(e){if("boolean"==typeof e.dropShadow&&e.dropShadow){let t=p.defaultDropShadow;e.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness){(0,a.deprecation)(a.v8_0_0,"strokeThickness is now a part of stroke");let t=e.stroke;e.stroke={color:t,width:e.strokeThickness}}if(Array.isArray(e.fill)){(0,a.deprecation)(a.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`");let t=new o.FillGradient(0,0,0,1.7*e.fontSize),i=e.fill.map(e=>(0,n.Color).shared.setValue(e).toNumber());i.forEach((r,s)=>{let n=e.fillGradientStops[s]??s/i.length;t.addColorStop(n,r)}),e.fill={fill:t}}}(t);let i={...e.defaultTextStyle,...t};for(let e in i)this[e]=i[e];this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){null!==t&&"object"==typeof t?this._dropShadow={...e.defaultDropShadow,...t}:this._dropShadow=t?{...e.defaultDropShadow}:null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){"string"==typeof e?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._fill=(0,d.convertFillInputToFillStyle)(0===e?"black":e,h.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._stroke=(0,d.convertFillInputToFillStyle)(e,h.GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,c.generateTextStyleKey)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let t=e.defaultTextStyle;for(let e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new e({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){this.removeAllListeners();let t="boolean"==typeof e?e:e?.texture;if(t){let t="boolean"==typeof e?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(t),this._originalFill?.texture&&this._originalFill.texture.destroy(t),this._stroke?.texture&&this._stroke.texture.destroy(t),this._originalStroke?.texture&&this._originalStroke.texture.destroy(t)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};u.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},u.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let p=u}),h("fbAxm",function(e,t){r(e.exports,"generateTextStyleKey",function(){return s});let i=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function s(e){var t,r;let s=[],a=0;for(let t=0;t<i.length;t++){let r=i[t];s[a++]=e[r]}return a=n(e._fill,s,a),t=e._stroke,r=a,t&&(r=n(t,s,r),s[r++]=t.width,s[r++]=t.alignment,s[r++]=t.cap,s[r++]=t.join,s[r++]=t.miterLimit),a=r,s.join("-")}function n(e,t,i){return e&&(t[i++]=e.color,t[i++]=e.alpha,t[i++]=e.fill?.uid),i}}),h("9fBFD",function(e,t){r(e.exports,"flatProducts",function(){return s});let i={membranes:{onePiece:{thickness_1_14:[{sku:"FP-114-055",id:"17400",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 0.55m",price:5.2195,stock:1e3,stockLimit:0,weight:"0.8525",length:"0.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-105",id:"17401",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 1.05m",price:9.9645,stock:1e3,stockLimit:0,weight:"1.6275",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-152",id:"17402",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 1.52m",price:14.4248,stock:1e3,stockLimit:0,weight:"2.356",length:"0.75",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-205",id:"17403",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 2.05m",price:19.4545,stock:1e3,stockLimit:0,weight:"3.1775",length:"0.99",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-255",id:"17404",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 2.55m",price:24.1995,stock:1e3,stockLimit:0,weight:"3.9525",length:"0.8333",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-305",id:"17405",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 3.05m",price:28.9445,stock:1e3,stockLimit:0,weight:"4.7275",length:"0.99",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-355",id:"17406",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 3.55m",price:33.6895,stock:1e3,stockLimit:0,weight:"5.5025",length:"0.875",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-405",id:"17407",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 4.05m",price:38.4345,stock:1e3,stockLimit:0,weight:"6.2775",length:"0.99",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-458",id:"17408",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 4.58m",price:43.4642,stock:1e3,stockLimit:0,weight:"7.099",length:"0.75",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-505",id:"17409",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 5.05m",price:47.9245,stock:1e3,stockLimit:0,weight:"7.8275",length:"0.8333",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-555",id:"17410",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 5.55m",price:52.6695,stock:1e3,stockLimit:0,weight:"8.6025",length:"0.9166",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"},{sku:"FP-114-610",id:"17411",name:"1.14mm Standard FlexiProof One Piece EPDM Membrane - 6.10m",price:57.889,stock:1e3,stockLimit:0,weight:"9.455",length:"0.99",width:"0.3",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-membrane_2-150x150.png"}],thickness_1_52:[{sku:"FP-152-055",id:"17388",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 0.55m",price:6.5945,stock:1e3,stockLimit:0,weight:"1.1275",length:"0.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-105",id:"17389",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 1.05m",price:12.5895,stock:1e3,stockLimit:0,weight:"2.1525",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-152",id:"26603",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 1.52m",price:18.2248,stock:1e3,stockLimit:0,weight:"3.1775",length:"0.75",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-205",id:"26604",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 2.05m",price:24.5795,stock:1e3,stockLimit:0,weight:"4.2025",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-255",id:"26611",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 2.55m",price:30.5745,stock:1e3,stockLimit:0,weight:"5.2275",length:"0.8333",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-305",id:"17393",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 3.05m",price:36.5695,stock:1e3,stockLimit:0,weight:"6.2525",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-355",id:"17394",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 3.55m",price:42.5645,stock:1e3,stockLimit:0,weight:"7.2775",length:"0.875",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-405",id:"26605",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 4.05m",price:48.5595,stock:1e3,stockLimit:0,weight:"8.3025",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-458",id:"17396",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 4.58m",price:54.9142,stock:1e3,stockLimit:0,weight:"9.389",length:"0.75",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-505",id:"17397",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 5.05m",price:60.5495,stock:1e3,stockLimit:0,weight:"10.3525",length:"0.8333",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-555",id:"17398",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 5.55m",price:66.5445,stock:1e3,stockLimit:0,weight:"11.3775",length:"0.9166",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"},{sku:"FP-152-610",id:"17399",name:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane - 6.10m",price:73.139,stock:1e3,stockLimit:0,weight:"12.505",length:"1",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/One-Piece-EPDM-150x150.png"}]},fleeceBacked:{thickness_1_20:[{sku:"FB-120-075-1M",id:"21871",name:"2.6mm FlexiProof Fleece Backed EPDM - per linear m - 0.75m",price:16.11,stock:1e3,stockLimit:0,weight:"1.5",length:"0.75",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/fleece1-150x150.jpg"},{sku:"FB-120-152-1M",id:"21872",name:"2.6mm FlexiProof Fleece Backed EPDM - per linear m - 1.52m",price:32.6648,stock:1e3,stockLimit:0,weight:"3",length:"1.6",width:"0.3",height:"0.3",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/fleece1-150x150.jpg"}]}},adhesives:{deck:{waterBased:{onePiece:[{sku:"2001FP-025L",id:"17418",name:"Water Based Deck Adhesive - 2.5L",price:24,stock:1e3,stockLimit:0,weight:"2.7",length:"0.11",width:"0.15",height:"0.21",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/2.5l-water-based-deck-adhesive-one-piece-150x150.png"},{sku:"2001FP-050L",id:"17419",name:"Water Based Deck Adhesive - 5L",price:45,stock:1e3,stockLimit:0,weight:"5.25",length:"0.14",width:"0.19",height:"0.25",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/5l-water-based-deck-adhesive-one-piece-150x150.png"},{sku:"2001FP-100L",id:"17415",name:"Water Based Deck Adhesive - 10L",price:85,stock:1e3,stockLimit:0,weight:"10.55",length:"0.18",width:"0.23",height:"0.3",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/10l-water-based-deck-adhesive-150x150.png"},{sku:"2001FP-150L",id:"17417",name:"Water Based Deck Adhesive - 15L",price:130,stock:1e3,stockLimit:0,weight:"15.85",length:"0.23",width:"0.25",height:"0.34",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/15l-water-based-deck-adhesive-150x150.png"}],fleeceBacked:[{sku:"2001FB-050L",id:"21908",name:"Water Based Deck Adhesive - 5L",price:40,stock:1e3,stockLimit:0,weight:"5.25",length:"0.14",width:"0.19",height:"0.25",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/5l-water-based-deck-adhesive-fleece-backed-150x150.png"},{sku:"2001FB-075L",id:"21909",name:"Water Based Deck Adhesive - 7.5L",price:62,stock:1e3,stockLimit:0,weight:"7.9",length:"0.35",width:"0.35",height:"0.4",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/7.5l-water-based-deck-adhesive-one-piece-1-150x150.png"},{sku:"2001FB-100L",id:"21910",name:"Water Based Deck Adhesive - 10L",price:80,stock:1e3,stockLimit:0,weight:"10.4",length:"0.14",width:"0.3",height:"0.3",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-fleece-backed-water-based-deck-adhesive-grouped-150x150.png"},{sku:"2001FB-150L",id:"21911",name:"Water Based Deck Adhesive - 15L",price:115,stock:1e3,stockLimit:0,weight:"15.8",length:"0.4",width:"0.4",height:"0.6",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/15l-water-based-deck-adhesive-one-piece-150x150.png"}]},contactBonding:{onePiece:[{sku:"2002FP-010L",id:"17430",name:"Contact Bonding Adhesive - 1L",price:12,stock:1e3,stockLimit:0,weight:"1",length:"0.11",width:"0.11",height:"0.12",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/1l-contact-bonding-adhesive-flexiproof-150x150.png"},{sku:"2002FP-025L",id:"17431",name:"Contact Bonding Adhesive - 2.5L",price:26,stock:1e3,stockLimit:0,weight:"2.55",length:"0.2",width:"0.19",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/2.5l-contact-bonding-adhesive-flexiproof-150x150.png"},{sku:"2002FP-050L",id:"17432",name:"Contact Bonding Adhesive - 5L",price:47,stock:1e3,stockLimit:0,weight:"4.85",length:"0.2",width:"0.19",height:"0.24",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/5l-contact-bonding-adhesive-flexiproof-150x150.png"}],fleeceBacked:[]},pu:{onePiece:[],fleeceBacked:[{sku:"2011-6KG",id:"22088",name:"6kg PU Decking Adhesive",price:77,stock:1e3,stockLimit:0,weight:"6.45",length:"0.12",width:"0.19",height:"0.26",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-pu-adhesive-fleece-backed-150x150.png"}]}},primers:{onePiece:[{sku:"2003FP-0250ML",id:"17412",name:"EPDM Primer - 250ml",price:7.5,stock:1e3,stockLimit:0,weight:"0.25",length:"0.08",width:"0.08",height:"0.08",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/250ml-flexiproof-epdm-primer-150x150.png"},{sku:"2003FP-0500ML",id:"17413",name:"EPDM Primer - 500ml",price:12,stock:1e3,stockLimit:0,weight:"0.5",length:"0.09",width:"0.09",height:"0.1",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/250ml-flexiproof-epdm-primer-150x150.png"},{sku:"2003FP-1000ML",id:"17414",name:"EPDM Primer - 1L",price:21.5,stock:1e3,stockLimit:0,weight:"0.95",length:"0.12",width:"0.12",height:"0.12",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/1l-flexiproof-epdm-primer-150x150.png"}],fleeceBacked:[]},sealants:{lapEdge:[{sku:"2004FP",id:"17361",name:"Lap Edge Sealant",price:9,stock:1e3,stockLimit:0,weight:"0.45",length:"0.05",width:"0.05",height:"0.22",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-lap-edge-sealant-150x150.png"}],waterBlock:[{sku:"2005FP",id:"17362",name:"Water Block Mastic",price:7.75,stock:1e3,stockLimit:0,weight:"0.5",length:"0.05",width:"0.05",height:"0.25",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-water-block-mastic-150x150.png"}],msPolymer:[{sku:"2005MS",id:"26702",name:"MS Polymer Sealant",price:10.5,stock:1e3,stockLimit:0,weight:"0.4",length:"0.05",width:"0.05",height:"0.22",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/04/flexiproof-ms-polymer-sealant-150x150.png"}],blackSilicone:[{sku:"2008",id:"17210",name:"Black Silicone",price:5,stock:1e3,stockLimit:0,weight:"0.45",length:"0.05",width:"0.05",height:"0.22",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/silirublmn_300ml_1-150x150.jpg"}]}},tapes:{cured:[{sku:"3002-06IN-1M",id:"17368",name:'6" Cover Tape - per linear m',price:10,stock:1e3,stockLimit:0,weight:"0.3",length:"0.15",width:"",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/6inch_cover_tape__2-150x150.jpg"},{sku:"3002-12IN-1M",id:"21892",name:'12" Cover Tape - per linear m',price:20,stock:1e3,stockLimit:0,weight:"0.8",length:"0.15",width:"",height:"0.3",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9_inch_cropped_2-150x150.jpg"}],uncured:[{sku:"3003-05IN-1M",id:"24251",name:'5" Uncured Flashing Tape - per linear m',price:8.5,stock:1e3,stockLimit:0,weight:"0.5",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9_inch_cropped_1-150x150.jpg"},{sku:"3003-09IN-1M",id:"17369",name:'9" Uncured Flashing Tape - per linear m',price:18,stock:1e3,stockLimit:0,weight:"0.5",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9_inch_cropped_1-150x150.jpg"},{sku:"3003-12IN-1M",id:"24049",name:'12" Uncured Flashing Tape - per linear m',price:24,stock:1e3,stockLimit:0,weight:"0.7",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9_inch_cropped-150x150.jpg"},{sku:"3003-18IN-1M",id:"22175",name:'18" Uncured Flashing Tape - per linear m',price:27,stock:1e3,stockLimit:0,weight:"1",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9_inch_cropped-150x150.jpg"}],seam:[{sku:"3001-1M",id:"17364",name:'3" Seam Tape - per linear m',price:4.25,stock:1e3,stockLimit:0,weight:"0.1",length:"0.1",width:"0.001",height:"0.08",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/3inch_seam_tape_cropped_1_1-scaled-1-150x150.png"}],mechanical:[{sku:"3004-06IN-1M",id:"22080",name:'6" Mechanical Tape - per linear m',price:12,stock:1e3,stockLimit:0,weight:"0.3",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/mechanical-russ-tape-fixing-for-epdm-rubber-roofing-membrane-1-150x150.jpg"}]},trims:{edges:{kerb:{cellular:{black:{sku:"4900-LENB",id:"26958",name:"2.5m Raised Kerb Trim [Integra Trim Cellular]",price:16.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/Raised-Kerb-Hollow-3-150x150.jpg"}},solid:{black:{sku:"4800-LENB",id:"26965",name:"Raised Kerb Trim (Integra Trim Solid)",price:18.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/A-150x150.jpg"},grey:{sku:"4800-LENG",id:"26968",name:"Raised Kerb Trim (Integra Trim Solid)",price:18.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/A-150x150.jpg"}}},gutter:{cellular:{black:{sku:"4902-LENB",id:"26972",name:"2.5m Gutter Drip Trim [Integra Trim Cellular] - Black",price:16.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/flexiproof-celluar-150x150.png"}},solid:{black:{sku:"4802-LENB",id:"26979",name:"Gutter Drip Trim (Integra Trim Solid) - Black",price:18.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Image-1-150x150.jpg"},grey:{sku:"4802-LENG",id:"26982",name:"Gutter Drip Trim (Integra Trim Solid) - Anthracite Grey",price:18.99,stock:1e3,stockLimit:0,weight:"2",length:"2.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Image-1-150x150.jpg"}}}},wall:{standard:[{sku:"4004-HALF",id:"17297",name:"Metal Wall Flashing Trim - 25/100/1500mm",price:6.99,stock:1e3,stockLimit:0,weight:"1.5",length:"1.5",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/wall-trim-2_1-150x150.png"},{sku:"4004",id:"17295",name:"Metal Wall Flashing Trim - 25/100/3000mm",price:10,stock:1e3,stockLimit:0,weight:"2",length:"3",width:"0.1",height:"0.04",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/wall-trim-2-150x150.png"}],deep:[{sku:"4004D",id:"17296",name:"Metal Wall Flashing Trim - 38/100/3000mm",price:10.99,stock:1e3,stockLimit:0,weight:"2",length:"3",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/wall_flashing-150x150.png"}]},joins:{terminationBar:[{sku:"4003",id:"17211",name:"3m Termination Bar with fixings",price:17,stock:1e3,stockLimit:0,weight:"1.2",length:"3",width:"0.02",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/termination-bar-for-classicbond-epdm-flat-rubber-roofing-150x150.jpg"}]}},corners:{kerb:{internal:{cellular:{black:{sku:"4900-INTB",id:"44117",name:"Raised Kerb Internal Corner Profile (Integra Trim Cellular) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Raised-Kerb-Interla-corner-150x150.jpg"}},solid:{black:{sku:"4800-INTB",id:"44129",name:"Raised Kerb Internal Corner Profile (Integra Trim Solid) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Raised-Kerb-Interla-corner-150x150.jpg"},grey:{sku:"4800-INTG",id:"44128",name:"Raised Kerb Internal Corner Profile (Integra Trim Solid) - Anthracite Grey",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Raised-Kerb-Interla-corner-150x150.jpg"}}},external:{cellular:{black:{sku:"4900-EXTB",id:"44138",name:"Raised Kerb External Corner (Integra Trim Cellular) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/Raised-Kerb-External-Corner-150x150.jpg"}},solid:{black:{sku:"4800-EXTB",id:"44107",name:"Raised Kerb External Corner Profile (Integra Trim Solid) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/Raised-Kerb-External-Corner-150x150.jpg"},grey:{sku:"4800-EXTG",id:"44108",name:"Raised Kerb External Corner Profile (Integra Trim Solid) - Anthracite Grey",price:3.19,stock:1e3,stockLimit:0,weight:"0.1",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/Raised-Kerb-External-Corner-150x150.jpg"}}}},gutter:{internal:{cellular:{black:{sku:"4902-INTB",id:"44123",name:"Gutter Drip Internal Corner Profile (Integra Trim Cellular) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-Internal-Corner-150x150.jpg"}},solid:{black:{sku:"4802-INTB",id:"44132",name:"Gutter Drip Internal Corner Profile (Integra Trim Solid) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-Internal-Corner-150x150.jpg"},grey:{sku:"4802-INTG",id:"44133",name:"Gutter Drip Internal Corner Profile (Integra Trim Solid) - Anthracite Grey",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-Internal-Corner-150x150.jpg"}}},external:{cellular:{black:{sku:"4902-EXTB",id:"44122",name:"Gutter Drip External Corner Profiles (Integra Trim Cellular) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"50",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-External-Corner-150x150.jpg"}},solid:{black:{sku:"4802-EXTB",id:"44134",name:"Gutter Drip External Corner Profile (Integra Trim Solid) - Black",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-External-Corner-150x150.jpg"},grey:{sku:"4802-EXTG",id:"44135",name:"Gutter Drip External Corner Profile (Integra Trim Solid) - Anthracite Grey",price:3.19,stock:1e3,stockLimit:0,weight:"",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/05/Gutter-Drip-External-Corner-150x150.jpg"}}}}},drains:{balcony:[{sku:"5011-SET",id:"25847",name:"Balcony Outlet & Grate - Outlet &amp; Grate",price:18.5,stock:1e3,stockLimit:0,weight:"0.8",length:"1",width:"0.3",height:"0.2",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/tph_outlet_65x100_epdm-scaled-1-150x150.jpg"}],horizontal:[{sku:"5006",id:"25776",name:"100mm Horizontal Flat Roof Outlet - Outlet &amp; Grate",price:19.5,stock:1e3,stockLimit:0,weight:"1",length:"0.8",width:"0.4",height:"0.2",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/rubber-roofing-horizontal-drain-outlet-150x150.jpg"},{sku:"5006-EXTENDER",id:"23833",name:"Horizontal Drain Extender",price:24.99,stock:1e3,stockLimit:0,weight:"1",length:"1",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/10/20220506_135000026_iOS-150x150.png"}],pipeSeal:[{sku:"5003",id:"27292",name:"Large Pipe Seal (25-152mm) - Pipe Seal &amp; Jubilee Clamp",price:36.75,stock:1e3,stockLimit:0,weight:"1",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/pipe_boot_large_2-scaled-1-150x150.jpg"}],pipeBox:[{sku:"5010-100-SINGLE",id:"17256",name:"Pipe Box Pocket - 100mm",price:24,stock:1e3,stockLimit:0,weight:"0.8333",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/pipe_box_pocket_4-scaled-1-150x150.jpg"},{sku:"5010-150-SINGLE",id:"17254",name:"Pipe Box Pocket - 150mm",price:26.5,stock:1e3,stockLimit:0,weight:"1.1",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/pipe_box_pocket-scaled-1-150x150.jpg"},{sku:"5010-200-SINGLE",id:"17255",name:"Pipe Box Pocket - 200mm",price:30,stock:1e3,stockLimit:0,weight:"1.4",length:"",width:"",height:"",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/pipe_box_pocket_1-scaled-1-150x150.jpg"}],internal:[{sku:"5004-068MM",id:"23846",name:"EPDM Internal Drain Outlet",price:18.5,stock:1e3,stockLimit:0,weight:"0.8",length:"0.4",width:"0.3",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/internal_outlet-150x150.jpg"},{sku:"5004-100MM",id:"23848",name:"EPDM Internal Drain Outlet",price:19.5,stock:1e3,stockLimit:0,weight:"0.8",length:"0.4",width:"0.3",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/internal_outlet-150x150.jpg"},{sku:"5004-110MM",id:"23850",name:"EPDM Internal Drain Outlet",price:20.5,stock:1e3,stockLimit:0,weight:"0.8",length:"0.4",width:"0.3",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/internal_outlet-150x150.jpg"}],top:[{sku:"5005",id:"17219",name:"Top Drain 110MM",price:63,stock:1e3,stockLimit:0,weight:"1.5",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/rubber-32-scaled-1-1-150x150.jpg"}],breather:[{sku:"5008",id:"17263",name:"Flat Roof Breather Vent",price:16,stock:1e3,stockLimit:0,weight:"1",length:"0.6",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/breather-vent-150x150.png"}]},extras:{tools:{rollers:{adhesive:[{sku:"T001",id:"17203",name:"9 Inch Roller Frame & Sleeve With Tray (Deck Adhesive)",price:3.5,stock:1e3,stockLimit:0,weight:"0.5",length:"0.4",width:"0.3",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/9-inch-roller-tray-set-scaled-1-150x150.jpg"},{sku:"T002",id:"17204",name:"Contact Bonding Adhesive Roller Set (Tray, 2 Heads, Handle)",price:3.5,stock:1e3,stockLimit:0,weight:"1",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/img_3380_clipped_rev_1-150x150.png"},{sku:"T003",id:"17205",name:'4" Blue Stripe Contact Bonding Adhesive Head',price:.99,stock:1e3,stockLimit:0,weight:"0.05",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/blue_stripe_4inch_roller_head-150x150.jpg"},{sku:"T020",id:"23838",name:"1-2m Extension Pole",price:2.99,stock:1e3,stockLimit:0,weight:"2",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/10/har5336711k-150x150.jpg"}],rubber:[{sku:"T004",id:"17206",name:"Brass Penny Roller",price:15,stock:1e3,stockLimit:0,weight:"0.6",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/img_2592-150x150.jpg"},{sku:"T005",id:"17207",name:"Contractor Grade Silicone Seam Roller",price:18,stock:1e3,stockLimit:0,weight:"0.6",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/contractor-grade-epdm-seam-roller-flat-rubber-roofing-150x150.jpg"},{sku:"T006",id:"17208",name:"Harris Seriously Good Soft Seam Roller",price:2.99,stock:1e3,stockLimit:0,weight:"0.1",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/harris-rubber-roofing-seam-roller-150x150.jpg"},{sku:"TDUAL",id:"24031",name:"Combi Roller",price:27,stock:1e3,stockLimit:0,weight:"0.325",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/01/20220505_162323356_iOS-150x150.png"}]},brushes:[{sku:"T007",id:"17209",name:"EPDM Roofing Brush",price:.99,stock:1e3,stockLimit:0,weight:"0.1",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/epdm-flat-rubber-roofing-hand-brush_1-150x150.jpg"}],scissors:[{sku:"T022",id:"26697",name:'10" Basic Scissors',price:2.99,stock:1e3,stockLimit:0,weight:"0.2",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/04/Seriously-Good-Paperhanging-Scissors-12in-150x150.png"},{sku:"T023",id:"17265",name:"Heavy Duty Membrane Scissors",price:15,stock:1e3,stockLimit:0,weight:"0.6",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/04/heavy-duty-epdm-rubber-roofing-scissors-150x150.jpg"}],scrubbers:[{sku:"SCRUB-HANDLE",id:"26685",name:"Scrubber Handle",price:3.75,stock:1e3,stockLimit:0,weight:"0.5",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/04/scrubber-handle-150x150.png"},{sku:"SCRUB-PAD",id:"26684",name:"Scrubber Pad",price:.75,stock:1e3,stockLimit:0,weight:"0.01",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/04/scrubber-pad-150x150.png"}],other:[{sku:"RRD-TAPE",id:"26698",name:"5m Tape Measure",price:6,stock:1e3,stockLimit:0,weight:"0.2",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/04/20220505_162439240_iOS-150x150.png"},{sku:"TROLL",id:"17337",name:"White Centrefeed Roll",price:4.99,stock:1e3,stockLimit:0,weight:"1",length:"0",width:"0",height:"0",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/white_centrefeed_2_ply_rolls-150x150.jpg"}],kits:[{sku:"TKIT1",id:"17240",name:"DIY Installation Kit",price:18.99,stock:1e3,stockLimit:0,weight:"1.6",length:"0.4",width:"0.3",height:"0.15",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/diy-tool-kit2-scaled-1-150x150.jpg"},{sku:"PROKIT",id:"17264",name:"Professional Installation Kit",price:45,stock:1e3,stockLimit:0,weight:"2",length:"0.4",width:"0.3",height:"0.16",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2021/03/gopr2179_t-150x150.png"}]},cleaners:[{sku:"2006FP-1L",id:"25827",name:"Membrane Cleaner",price:11.99,stock:1e3,stockLimit:0,weight:"0.85",length:"0.07",width:"0.12",height:"0.16",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/02/epdm-membrane-cleaner-150x150.png"}],joiners:{kerb:{cellular:{},solid:{}},gutter:{cellular:{},solid:{}}},fixings:{kerb:{black:{sku:"KERB-FIX-8-B",id:"24039",name:"Kerb Fixing Pack - Black",price:1,stock:1e3,stockLimit:0,weight:"0.01",length:"0.01",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/01/20220505_162612005_iOS-150x150.png"},grey:{sku:"KERB-FIX-8-G",id:"24040",name:"Kerb Fixing Pack - Anthracite Grey",price:1,stock:1e3,stockLimit:0,weight:"0.01",length:"0.01",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/01/20220505_162612005_iOS-150x150.png"}},gutter:{black:{sku:"GUTTER-FIX-8-B",id:"24042",name:"Gutter Fixing Pack - Black",price:1.25,stock:1e3,stockLimit:0,weight:"0.01",length:"0.01",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/01/20220505_162552810_iOS-150x150.png"},grey:{sku:"GUTTER-FIX-8-G",id:"24043",name:"Gutter Fixing Pack - Anthracite Grey",price:1.25,stock:1e3,stockLimit:0,weight:"0.01",length:"0.01",width:"0.01",height:"0.01",imageUrl:"https://staging.rubberroofingdirect.co.uk/wp-content/uploads/2022/01/20220505_162552810_iOS-150x150.png"}}}}},s=[...Object.values(i.membranes.onePiece.thickness_1_14),...Object.values(i.membranes.onePiece.thickness_1_52),...Object.values(i.membranes.fleeceBacked.thickness_1_20),...Object.values(i.adhesives.deck.waterBased.onePiece),...Object.values(i.adhesives.deck.waterBased.fleeceBacked),...Object.values(i.adhesives.deck.contactBonding.onePiece),...Object.values(i.adhesives.deck.contactBonding.fleeceBacked),...Object.values(i.adhesives.deck.pu.onePiece),...Object.values(i.adhesives.deck.pu.fleeceBacked),...Object.values(i.adhesives.primers.onePiece),...Object.values(i.adhesives.primers.fleeceBacked),...Object.values(i.adhesives.sealants.lapEdge),...Object.values(i.adhesives.sealants.waterBlock),...Object.values(i.adhesives.sealants.msPolymer),...Object.values(i.adhesives.sealants.blackSilicone),...Object.values(i.tapes.cured),...Object.values(i.tapes.uncured),...Object.values(i.tapes.seam),...Object.values(i.tapes.mechanical),i.trims.edges.kerb.cellular.black,i.trims.edges.kerb.solid.black,i.trims.edges.kerb.solid.grey,i.trims.edges.gutter.cellular.black,i.trims.edges.gutter.solid.black,i.trims.edges.gutter.solid.grey,...Object.values(i.trims.wall.standard),...Object.values(i.trims.wall.deep),...Object.values(i.trims.joins.terminationBar),i.corners.kerb.internal.cellular.black,i.corners.kerb.internal.solid.black,i.corners.kerb.internal.solid.grey,i.corners.kerb.external.cellular.black,i.corners.kerb.external.solid.black,i.corners.kerb.external.solid.grey,i.corners.gutter.internal.cellular.black,i.corners.gutter.internal.solid.black,i.corners.gutter.internal.solid.grey,i.corners.gutter.external.cellular.black,i.corners.gutter.external.solid.black,i.corners.gutter.external.solid.grey,...Object.values(i.drains.balcony),...Object.values(i.drains.horizontal),...Object.values(i.drains.pipeSeal),...Object.values(i.drains.pipeBox),...Object.values(i.drains.internal),...Object.values(i.drains.top),...Object.values(i.drains.breather),...Object.values(i.extras.tools.rollers.adhesive),...Object.values(i.extras.tools.rollers.rubber),...Object.values(i.extras.tools.brushes),...Object.values(i.extras.tools.scissors),...Object.values(i.extras.tools.scrubbers),...Object.values(i.extras.tools.other),...Object.values(i.extras.tools.kits),...Object.values(i.extras.cleaners),i.extras.fixings.kerb.black,i.extras.fixings.kerb.grey,i.extras.fixings.gutter.black,i.extras.fixings.gutter.grey]}),h("iNpSr",function(e,t){l("lCkOv")}),h("lCkOv",function(e,t){r(e.exports,"UNITS",function(){return i}),r(e.exports,"UNIT_TYPES",function(){return s});let i={length:{metre:"m",millimetre:"mm",inch:"in"},volume:{litre:"L",millilitre:"ml"},mass:{kilogram:"kg"},custom:{spray:"SPRAY",tank:"TANK",single:"SINGLE"}},s={length:"length",area:"area",volume:"volume",mass:"mass"}}),function(){var e=function(e,t){var i=function(e){for(var t=0,i=e.length;t<i;t++)r(e[t])},r=function(e){var t=e.target,i=e.attributeName,r=e.oldValue;t.attributeChangedCallback(i,r,t.getAttribute(i))};return function(s,n){var a=s.constructor.observedAttributes;return a&&e(n).then(function(){new t(i).observe(s,{attributes:!0,attributeOldValue:!0,attributeFilter:a});for(var e=0,n=a.length;e<n;e++)s.hasAttribute(a[e])&&r({target:s,attributeName:a[e],oldValue:null})}),s}};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function i(e,i){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,i){if(e){if("string"==typeof e)return t(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,i)}}(e))||i&&e&&"number"==typeof e.length){r&&(e=r);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}var r="querySelectorAll",s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MutationObserver,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["*"],a=function t(s,n,a,o,l,h){var d,c=i(s);try{for(c.s();!(d=c.n()).done;){var u=d.value;(h||r in u)&&(l?a.has(u)||(a.add(u),o.delete(u),e(u,l)):o.has(u)||(o.add(u),a.delete(u),e(u,l)),h||t(u[r](n),n,a,o,l,!0))}}catch(e){c.e(e)}finally{c.f()}},o=new s(function(e){if(n.length){var t,r=n.join(","),s=new Set,o=new Set,l=i(e);try{for(l.s();!(t=l.n()).done;){var h=t.value,d=h.addedNodes,c=h.removedNodes;a(c,r,s,o,!1,!1),a(d,r,s,o,!0,!1)}}catch(e){l.e(e)}finally{l.f()}}}),l=o.observe;return(o.observe=function(e){return l.call(o,e,{subtree:!0,childList:!0})})(t),o},n="querySelectorAll",a=self,o=a.document,l=a.Element,h=a.MutationObserver,d=a.Set,c=a.WeakMap,u=function(e){return n in e},p=[].filter,g=function(e){var t=new c,i=function(i,r){var s;if(r)for(var n,o=i.matches||i.webkitMatchesSelector||i.msMatchesSelector,l=0,h=a.length;l<h;l++)o.call(i,n=a[l])&&(t.has(i)||t.set(i,new d),(s=t.get(i)).has(n)||(s.add(n),e.handle(i,r,n)));else t.has(i)&&(s=t.get(i),t.delete(i),s.forEach(function(t){e.handle(i,r,t)}))},r=function(e){for(var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=0,s=e.length;r<s;r++)i(e[r],t)},a=e.query,g=e.root||o,f=s(i,g,h,a),m=l.prototype.attachShadow;return m&&(l.prototype.attachShadow=function(e){var t=m.call(this,e);return f.observe(t),t}),a.length&&r(g[n](a)),{drop:function(e){for(var i=0,r=e.length;i<r;i++)t.delete(e[i])},flush:function(){for(var e=f.takeRecords(),t=0,i=e.length;t<i;t++)r(p.call(e[t].removedNodes,u),!1),r(p.call(e[t].addedNodes,u),!0)},observer:f,parse:r}},f=self,m=f.document,x=f.Map,y=f.MutationObserver,b=f.Object,v=f.Set,WeakMap=f.WeakMap,Element=f.Element,w=f.HTMLElement,Node=f.Node,_=f.Error,k=f.TypeError,Reflect=f.Reflect,P=b.defineProperty,A=b.keys,S=b.getOwnPropertyNames,M=b.setPrototypeOf,E=!self.customElements,C=function(e){for(var t=A(e),i=[],r=new v,s=t.length,n=0;n<s;n++){i[n]=e[t[n]];try{delete e[t[n]]}catch(e){r.add(n)}}return function(){for(var n=0;n<s;n++)r.has(n)||(e[t[n]]=i[n])}};if(E){var T=function(){var e=this.constructor;if(!B.has(e))throw new k("Illegal constructor");var t=B.get(e);return N?G(N,t):G(M(I.call(m,t),e.prototype),t)},I=m.createElement,B=new x,L=new x,R=new x,O=new x,F=[],D=g({query:F,handle:function(e,t,i){var r=R.get(i);if(t&&!r.isPrototypeOf(e)){var s=C(e);N=M(e,r);try{new r.constructor}finally{N=null,s()}}var n="".concat(t?"":"dis","connectedCallback");n in r&&e[n]()}}).parse,N=null,U=function(e){if(!L.has(e)){var t,i=new Promise(function(e){t=e});L.set(e,{$:i,_:t})}return L.get(e).$},G=e(U,y);self.customElements={define:function(e,t){if(O.has(e))throw new _('the name "'.concat(e,'" has already been used with this registry'));B.set(t,e),R.set(e,t.prototype),O.set(e,t),F.push(e),U(e).then(function(){D(m.querySelectorAll(e))}),L.get(e)._(t)},get:function(e){return O.get(e)},whenDefined:U},P(T.prototype=w.prototype,"constructor",{value:T}),self.HTMLElement=T,m.createElement=function(e,t){var i=t&&t.is,r=i?O.get(i):O.get(e);return r?new r:I.call(m,e)},"isConnected"in Node.prototype||P(Node.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(E=!self.customElements.get("extends-br"))try{var z=function e(){return self.Reflect.construct(HTMLBRElement,[],e)};z.prototype=HTMLLIElement.prototype;var j="extends-br";self.customElements.define("extends-br",z,{extends:"br"}),E=0>m.createElement("br",{is:j}).outerHTML.indexOf(j);var W=self.customElements,V=W.get,q=W.whenDefined;self.customElements.whenDefined=function(e){var t=this;return q.call(this,e).then(function(i){return i||V.call(t,e)})}}catch(e){}if(E){var H=function(e){el(Q.get(e).querySelectorAll(this),e.isConnected)},X=self.customElements,Y=m.createElement,$=X.define,K=X.get,J=X.upgrade,Z=(Reflect||{construct:function(e){return e.call(this)}}).construct,Q=new WeakMap,ee=new v,et=new x,ei=new x,er=new x,es=new x,en=[],ea=[],eo=function(e){return es.get(e)||K.call(X,e)},el=g({query:ea,handle:function(e,t,i){var r=er.get(i);if(t&&!r.isPrototypeOf(e)){var s=C(e);ep=M(e,r);try{new r.constructor}finally{ep=null,s()}}var n="".concat(t?"":"dis","connectedCallback");n in r&&e[n]()}}).parse,eh=g({query:en,handle:function(e,t){Q.has(e)&&(t?ee.add(e):ee.delete(e),ea.length&&H.call(ea,e))}}).parse,ed=Element.prototype.attachShadow;ed&&(Element.prototype.attachShadow=function(e){var t=ed.call(this,e);return Q.set(this,t),t});var ec=function(e){if(!ei.has(e)){var t,i=new Promise(function(e){t=e});ei.set(e,{$:i,_:t})}return ei.get(e).$},eu=e(ec,y),ep=null;S(self).filter(function(e){return/^HTML.*Element$/.test(e)}).forEach(function(e){var t=self[e];function i(){var e=this.constructor;if(!et.has(e))throw new k("Illegal constructor");var i=et.get(e),r=i.is,s=i.tag;if(!r)return Z.call(this,t,[],e);if(ep)return eu(ep,r);var n=Y.call(m,s);return n.setAttribute("is",r),eu(M(n,e.prototype),r)}P(i.prototype=t.prototype,"constructor",{value:i}),P(self,e,{value:i})}),m.createElement=function(e,t){var i=t&&t.is;if(i){var r=es.get(i);if(r&&et.get(r).tag===e)return new r}var s=Y.call(m,e);return i&&s.setAttribute("is",i),s},X.get=eo,X.whenDefined=ec,X.upgrade=function(e){var t=e.getAttribute("is");if(t){var i=es.get(t);if(i){eu(M(e,i.prototype),t);return}}J.call(X,e)},X.define=function(e,t,i){if(eo(e))throw new _("'".concat(e,"' has already been defined as a custom element"));var r,s=i&&i.extends;et.set(t,s?{is:e,tag:s}:{is:"",tag:e}),s?(r="".concat(s,'[is="').concat(e,'"]'),er.set(r,t.prototype),es.set(e,t),ea.push(r)):($.apply(X,arguments),en.push(r=e)),ec(e).then(function(){s?(el(m.querySelectorAll(r)),ee.forEach(H,[r])):eh(m.querySelectorAll(r))}),ei.get(e)._(t)}}}();var d=l("7UyAW");const c={extension:{type:d.ExtensionType.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await l("3Lm7a")}};var d=l("7UyAW");const u={extension:{type:d.ExtensionType.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await l("eAzCZ")}};var d=l("7UyAW");l("eOqm1"),l("fiDYq");var d=(l("7UyAW"),l("7UyAW"));const p=[];async function g(e){if(e)for(let e=0;e<p.length;e++){let t=p[e];if(t.value.test()){await t.value.load();return}}}(0,d.extensions).handleByNamedList(d.ExtensionType.Environment,p);var f=l("ecaWJ"),m=l("5Ihtu"),f=l("ecaWJ");async function x(e={}){return void 0!==t?t:t=await (async()=>{let t=(0,f.DOMAdapter).get().getNavigator().gpu;if(!t)return!1;try{let t=await navigator.gpu.requestAdapter(e);return await t.requestDevice(),!0}catch(e){return!1}})()}var m=l("5Ihtu");const y=["webgl","webgpu","canvas"];async function b(t){let i,r=[];t.preference?(r.push(t.preference),y.forEach(e=>{e!==t.preference&&r.push(e)})):r=y.slice(),await g(t.manageImports??!0);let s={};for(let n=0;n<r.length;n++){let a=r[n];if("webgpu"===a&&await x()){let{WebGPURenderer:e}=await l("jY7nr");i=e,s={...t,...t.webgpu};break}if("webgl"===a&&function(t){return void 0!==e?e:e=(()=>{let e={stencil:!0,failIfMajorPerformanceCaveat:t??m.AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat};try{if(!(0,f.DOMAdapter).get().getWebGLRenderingContext())return!1;let t=(0,f.DOMAdapter).get().createCanvas(),i=t.getContext("webgl",e),r=!!i?.getContextAttributes()?.stencil;if(i){let e=i.getExtension("WEBGL_lose_context");e&&e.loseContext()}return i=null,r}catch(e){return!1}})()}(t.failIfMajorPerformanceCaveat??m.AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:e}=await l("6S0zo");i=e,s={...t,...t.webgl};break}if("canvas"===a){s={...t};break}}delete s.webgpu,delete s.webgl;let n=new i;return await n.init(s),n}var v=l("2VOjZ"),w=l("5k13c");const _=class e{constructor(...e){this.stage=new v.Container,void 0!==e[0]&&(0,w.deprecation)(w.v8_0_0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await b(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return(0,w.deprecation)(w.v8_0_0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,i=!1){let r=e._plugins.slice(0);r.reverse(),r.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(t),this.renderer=null}};_._plugins=[],(0,d.extensions).handleByList(d.ExtensionType.Application,_._plugins);var d=l("7UyAW"),k=l("drBom");class P{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}var A=l("hrglb"),d=l("7UyAW"),S=l("9SDHC");const M={extension:d.ExtensionType.CacheParser,test:e=>Array.isArray(e)&&e.every(e=>e instanceof S.Texture),getCacheableAssets:(e,t)=>{let i={};return e.forEach(e=>{t.forEach((t,r)=>{i[e+(0===r?"":r+1)]=t})}),i}};var d=l("7UyAW");async function E(e){if("Image"in globalThis)return new Promise(t=>{let i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let t=await (await fetch(e)).blob();await createImageBitmap(t)}catch(e){return!1}return!0}return!1}const C={extension:{type:d.ExtensionType.DetectionParser,priority:1},test:async()=>E("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter(e=>"avif"!==e)};var d=l("7UyAW");const T=["png","jpg","jpeg"],I={extension:{type:d.ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...T],remove:async e=>e.filter(e=>!T.includes(e))};var d=l("7UyAW");const B="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function L(e){if(B)return!1;let t=document.createElement("video");return""!==t.canPlayType(e)}const R={extension:{type:d.ExtensionType.DetectionParser,priority:0},test:async()=>L("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter(e=>"mp4"!==e&&"m4v"!==e)};var d=l("7UyAW");const O={extension:{type:d.ExtensionType.DetectionParser,priority:0},test:async()=>L("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter(e=>"ogv"!==e)};var d=l("7UyAW");const F={extension:{type:d.ExtensionType.DetectionParser,priority:0},test:async()=>L("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter(e=>"webm"!==e)};var d=l("7UyAW");const D={extension:{type:d.ExtensionType.DetectionParser,priority:0},test:async()=>E("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter(e=>"webp"!==e)};var k=l("drBom"),N=l("724Hb"),U=l("eOSS3"),G=l("6KVu0");class z{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let i={promise:null,parser:null};return i.promise=(async()=>{let r=null,s=null;if(!t.loadParser||(s=this._parserHash[t.loadParser])||(0,k.warn)(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`),!s){for(let i=0;i<this.parsers.length;i++){let r=this.parsers[i];if(r.load&&r.test?.(e,t,this)){s=r;break}}if(!s)return(0,k.warn)(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,t,this),i.parser=s;for(let e=0;e<this.parsers.length;e++){let s=this.parsers[e];s.parse&&s.parse&&await s.testParse?.(r,t,this)&&(r=await s.parse(r,t,this)||r,i.parser=s)}return r})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0,r={},s=(0,G.isSingleItem)(e),n=(0,U.convertToList)(e,e=>({alias:[e],src:e})),a=n.length,o=n.map(async e=>{let s=(0,N.path).toAbsolute(e.src);if(!r[e.src])try{this.promiseCache[s]||(this.promiseCache[s]=this._getLoadPromiseAndParser(s,e)),r[e.src]=await this.promiseCache[s].promise,t&&t(++i/a)}catch(t){throw delete this.promiseCache[s],delete r[e.src],Error(`[Loader.load] Failed to load ${s}.
${t}`)}});return await Promise.all(o),s?r[n[0].src]:r}async unload(e){let t=(0,U.convertToList)(e,e=>({alias:[e],src:e})),i=t.map(async e=>{let t=(0,N.path).toAbsolute(e.src),i=this.promiseCache[t];if(i){let r=await i.promise;delete this.promiseCache[t],await i.parser?.unload?.(r,e,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name?e[t.name]&&(0,k.warn)(`[Assets] loadParser name conflict "${t.name}"`):(0,k.warn)("[Assets] loadParser should have a name"),{...e,[t.name]:t}),{})}}var f=l("ecaWJ"),d=l("7UyAW");function j(e,t){if(Array.isArray(t)){for(let i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}var N=l("724Hb");function W(e,t){let i=e.split("?")[0],r=(0,N.path).extname(i).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var V=l("aclJ3");const q={extension:{type:d.ExtensionType.LoadParser,priority:V.LoaderParserPriority.Low},name:"loadJson",test:e=>j(e,"application/json")||W(e,".json"),async load(e){let t=await (0,f.DOMAdapter).get().fetch(e),i=await t.json();return i}};var f=l("ecaWJ"),d=l("7UyAW"),V=l("aclJ3");const H={name:"loadTxt",extension:{type:d.ExtensionType.LoadParser,priority:V.LoaderParserPriority.Low},test:e=>j(e,"text/plain")||W(e,".txt"),async load(e){let t=await (0,f.DOMAdapter).get().fetch(e),i=await t.text();return i}};var f=l("ecaWJ"),d=l("7UyAW"),k=l("drBom"),N=l("724Hb"),A=l("hrglb"),V=l("aclJ3");const X=["normal","bold","100","200","300","400","500","600","700","800","900"],Y=[".ttf",".otf",".woff",".woff2"],$=["font/ttf","font/otf","font/woff","font/woff2"],K=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,J=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/,Z={extension:{type:d.ExtensionType.LoadParser,priority:V.LoaderParserPriority.Low},name:"loadWebFont",test:e=>j(e,$)||W(e,Y),async load(e,t){let i=(0,f.DOMAdapter).get().getFontFaceSet();if(i){let r=[],s=t.data?.family??function(e){let t=(0,N.path).extname(e),i=(0,N.path).basename(e,t),r=i.replace(/(-|_)/g," "),s=r.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)),n=s.length>0;for(let e of s)if(!e.match(K)){n=!1;break}let a=s.join(" ");return n||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}(e),n=t.data?.weights?.filter(e=>X.includes(e))??["normal"],a=t.data??{};for(let t=0;t<n.length;t++){let o=n[t],l=new FontFace(s,`url(${J.test(e)?e:encodeURI(e)})`,{...a,weight:o});await l.load(),i.add(l),r.push(l)}return(0,A.Cache).set(`${s}-and-url`,{url:e,fontFaces:r}),1===r.length?r[0]:r}return(0,k.warn)("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(e=>{(0,A.Cache).remove(e.family),(0,f.DOMAdapter).get().getFontFaceSet().delete(e)})}};var f=l("ecaWJ"),d=l("7UyAW"),Q=l("8fdRE"),ee=l("jxcfX"),et=l("if08j");function ei(e,t=1){let i=et.Resolver.RETINA_PREFIX?.exec(e);return i?parseFloat(i[1]):t}var V=l("aclJ3"),S=l("9SDHC"),k=l("drBom"),A=l("hrglb");function er(e,t,i){e.label=i,e._sourceOrigin=i;let r=new S.Texture({source:e,label:i}),s=()=>{delete t.promiseCache[i],(0,A.Cache).has(i)&&(0,A.Cache).remove(i)};return r.source.once("destroy",()=>{t.promiseCache[i]&&((0,k.warn)("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),r.once("destroy",()=>{e.destroyed||((0,k.warn)("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),r}const es={extension:{type:d.ExtensionType.LoadParser,priority:V.LoaderParserPriority.Low},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:e=>j(e,"image/svg+xml")||W(e,".svg"),async load(e,t,i){return t.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?ea(e):en(e,t,i,this.config.crossOrigin)},unload(e){e.destroy(!0)}};async function en(e,t,i,r){let s=await (0,f.DOMAdapter).get().fetch(e),n=await s.blob(),a=URL.createObjectURL(n),o=new Image;o.src=a,o.crossOrigin=r,await o.decode(),URL.revokeObjectURL(a);let l=document.createElement("canvas"),h=l.getContext("2d"),d=t.data?.resolution||ei(e),c=t.data?.width??o.width,u=t.data?.height??o.height;l.width=c*d,l.height=u*d,h.drawImage(o,0,0,c*d,u*d);let{parseAsGraphicsContext:p,...g}=t.data,m=new Q.ImageSource({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:d,...g});return er(m,i,e)}async function ea(e){let t=await (0,f.DOMAdapter).get().fetch(e),i=await t.text(),r=new ee.GraphicsContext;return r.svg(i),r}var f=l("ecaWJ"),d=l("7UyAW"),Q=l("8fdRE");let eo=null;class el{constructor(){eo||(eo=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function")\n          return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(eo)}}el.revokeObjectURL=function(){eo&&(URL.revokeObjectURL(eo),eo=null)};let eh=null;class ed{constructor(){eh||(eh=URL.createObjectURL(new Blob(["(function () {\n    'use strict';\n\n    async function loadImageBitmap(url) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      const imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap;\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n"],{type:"application/javascript"}))),this.worker=new Worker(eh)}}ed.revokeObjectURL=function(){eh&&(URL.revokeObjectURL(eh),eh=null)};let ec=0;const eu=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{let{worker:t}=new el;t.addEventListener("message",i=>{t.terminate(),el.revokeObjectURL(),e(i.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===i&&(i=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<i&&(this._createdWorkers++,(e=new ed().worker).addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){void 0!==e.error?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();let i=new Promise((i,r)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;let e=this._getWorker();if(!e)return;let t=this._queue.pop(),i=t.id;this._resolveHash[ec]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:ec++,id:i})}};var V=l("aclJ3");const ep=[".jpeg",".jpg",".png",".webp",".avif"],eg=["image/jpeg","image/png","image/webp","image/avif"];async function ef(e){let t=await (0,f.DOMAdapter).get().fetch(e);if(!t.ok)throw Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);let i=await t.blob(),r=await createImageBitmap(i);return r}const em={name:"loadTextures",extension:{type:d.ExtensionType.LoadParser,priority:V.LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>j(e,eg)||W(e,ep),async load(e,t,i){let r=null;r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await eu.isImageBitmapSupported()?await eu.loadImageBitmap(e):await ef(e):await new Promise(t=>{(r=new Image).crossOrigin=this.config.crossOrigin,r.src=e,r.complete?t(r):r.onload=()=>{t(r)}});let s=new Q.ImageSource({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||ei(e),...t.data});return er(s,i,e)},unload(e){e.destroy(!0)}};var d=l("7UyAW"),ex=l("1VIfK"),ey=l("7Ozq6");const eb=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],ev=eb.map(e=>`video/${e.substring(1)}`),ew={name:"loadVideo",extension:{type:d.ExtensionType.LoadParser},config:null,test(e){let t=j(e,ev),i=W(e,eb);return t||i},async load(e,t,i){var r;let s;let n={...ex.VideoSource.defaultOptions,resolution:t.data?.resolution||ei(e),alphaMode:t.data?.alphaMode||await (0,ey.detectVideoAlphaMode)(),...t.data},a=document.createElement("video"),o={preload:!1!==n.autoLoad?"auto":void 0,"webkit-playsinline":!1!==n.playsinline?"":void 0,playsinline:!1!==n.playsinline?"":void 0,muted:!0===n.muted?"":void 0,loop:!0===n.loop?"":void 0,autoplay:!1!==n.autoPlay?"":void 0};Object.keys(o).forEach(e=>{let t=o[e];void 0!==t&&a.setAttribute(e,t)}),!0===n.muted&&(a.muted=!0),void 0!==(r=n.crossorigin)||e.startsWith("data:")?!1!==r&&(a.crossOrigin="string"==typeof r?r:"anonymous"):a.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;let i=new URL(e,document.baseURI);return i.hostname!==t.hostname||i.port!==t.port||i.protocol!==t.protocol?"anonymous":""}(e);let l=document.createElement("source");if(e.startsWith("data:"))s=e.slice(5,e.indexOf(";"));else if(!e.startsWith("blob:")){let t=e.split("?")[0].slice(e.lastIndexOf(".")+1).toLowerCase();s=ex.VideoSource.MIME_TYPES[t]||`video/${t}`}return l.src=e,s&&(l.type=s),new Promise(r=>{let s=async()=>{let o=new ex.VideoSource({...n,resource:a});a.removeEventListener("canplay",s),t.data.preload&&await new Promise((e,t)=>{function i(){s(),e()}function r(e){s(),t(e)}function s(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",r)}a.addEventListener("canplaythrough",i),a.addEventListener("error",r),a.load()}),r(er(o,i,e))};a.addEventListener("canplay",s),a.appendChild(l)})},unload(e){e.destroy(!0)}};var d=l("7UyAW"),et=l("if08j"),d=l("7UyAW"),et=l("if08j");const e_={extension:d.ExtensionType.ResolveParser,test:em.test,parse:e=>({resolution:parseFloat(et.Resolver.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})},ek={extension:d.ExtensionType.ResolveParser,test:e=>(0,et.Resolver).RETINA_PREFIX.test(e)&&e.endsWith(".json"),parse:e_.parse};var et=l("if08j"),U=l("eOSS3"),G=l("6KVu0");const eP=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new et.Resolver,this.loader=new z,this.cache=A.Cache,this._backgroundLoader=new P(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){(0,k.warn)("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}let t=e.texturePreference?.resolution??1,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:"number"==typeof t?[t]:t}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let i=(0,G.isSingleItem)(e),r=(0,U.convertToList)(e).map(e=>{if("string"!=typeof e){let t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),s=this.resolver.resolve(r),n=await this._mapLoadToResolve(s,t);return i?n[r[0]]:n}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;"string"==typeof e&&(i=!0,e=[e]);let r=this.resolver.resolveBundle(e),s={},n=Object.keys(r),a=0,o=0,l=()=>{t?.(++a/o)},h=n.map(e=>{let t=r[e];return o+=Object.keys(t).length,this._mapLoadToResolve(t,l).then(t=>{s[e]=t})});return await Promise.all(h),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return(0,A.Cache).get(e);let t={};for(let i=0;i<e.length;i++)t[i]=(0,A.Cache).get(e[i]);return t}async _mapLoadToResolve(e,t){let i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(i,t);this._backgroundLoader.active=!0;let s={};return i.forEach(e=>{let t=r[e.src],i=[e.src];e.alias&&i.push(...e.alias),i.forEach(e=>{s[e]=t}),(0,A.Cache).set(i,t)}),s}async unload(e){this._initialized||await this.init();let t=(0,U.convertToList)(e).map(e=>"string"!=typeof e?e.src:e),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=(0,U.convertToList)(e);let t=this.resolver.resolveBundle(e),i=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(i)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(e=>{(0,A.Cache).remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];for(let i of(e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]),e.detections))e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((e,i)=>t.indexOf(e)===i)}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(i=>{t.config[i]=e[i]})})}};(0,d.extensions).handleByList(d.ExtensionType.LoadParser,eP.loader.parsers).handleByList(d.ExtensionType.ResolveParser,eP.resolver.parsers).handleByList(d.ExtensionType.CacheParser,eP.cache.parsers).handleByList(d.ExtensionType.DetectionParser,eP.detections),(0,d.extensions).add(M,I,C,D,R,O,F,q,H,Z,es,em,ew,e_,ek);const eA={loader:d.ExtensionType.LoadParser,resolver:d.ExtensionType.ResolveParser,cache:d.ExtensionType.CacheParser,detection:d.ExtensionType.DetectionParser};(0,d.extensions).handle(d.ExtensionType.Asset,e=>{let t=e.ref;Object.entries(eA).filter(([e])=>!!t[e]).forEach(([e,i])=>(0,d.extensions).add(Object.assign(t[e],{extension:t[e].extension??i})))},e=>{let t=e.ref;Object.keys(eA).filter(e=>!!t[e]).forEach(e=>(0,d.extensions).remove(t[e]))});var eS=l("7Qkzy"),eM=l("aSHqW");l("ioQaX");var v=l("2VOjZ"),eE=l("kJqVK"),eC=l("53uEv"),eT=l("8tYGw"),w=l("5k13c"),eI=l("8Hzvu"),v=l("2VOjZ");class eB extends v.Container{constructor(e,t){let{text:i,resolution:r,style:s,anchor:n,width:a,height:o,roundPixels:l,...h}=e;super({...h}),this.batched=!0,this.resolution=null,this._didTextUpdate=!0,this._roundPixels=0,this._bounds=new eI.Bounds,this._boundsDirty=!0,this._styleClass=t,this.text=i??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new eT.ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),n&&(this.anchor=n),this.roundPixels=l??!1,a&&(this.width=a),o&&(this.height=o)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}get style(){return this._style}set style(e){e=e||{},this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){let i,r;"object"!=typeof e?(i=e,r=t??e):(i=e.width,r=e.height??e.width),void 0!==i&&this._setWidth(i,this.bounds.width),void 0!==r&&this._setHeight(r,this.bounds.height)}addBounds(e){let t=this.bounds;e.addFrame(t.minX,t.minY,t.maxX,t.maxY)}containsPoint(e){let t=this.bounds.maxX,i=this.bounds.maxY,r=-t*this.anchor.x,s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this.anchor.y,e.y>=s&&e.y<=s+i)}onViewUpdate(){this._didChangeId+=4096,this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this._didTextUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_getKey(){return`${this.text}:${this._style.styleKey}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,("boolean"==typeof e?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}}var eL=l("8Ebx7"),eR=l("iL5W8");class eO extends eB{constructor(...e){let t;let i=(("string"==typeof(t=e[0]??{})||e[1])&&((0,w.deprecation)(w.v8_0_0,'use new Text({ text: "hi!", style }) instead'),t={text:t,style:e[1]}),t);super(i,eR.TextStyle),this.renderPipeId="text"}_updateBounds(){let e=this._bounds,t=this._style.padding,i=this._anchor,r=(0,eL.CanvasTextMetrics).measureText(this._text,this._style),{width:s,height:n}=r;e.minX=-i._x*s-t,e.maxX=e.minX+s,e.minY=-i._y*n-t,e.maxY=e.minY+n}}var eF=l("b4JvI");l("jFrz2"),l("85hPF"),(0,d.extensions).add(c,u);var eD={};r(eD,"stepUpdated",function(){return eN});const eN="epdm-calculator-step-updated";var eU={};r(eU,"deckSelector",function(){return eG}),r(eU,"deckEditor",function(){return ez}),r(eU,"substrateSelector",function(){return ej}),r(eU,"membraneSelector",function(){return eW}),r(eU,"trimSelector",function(){return eV}),r(eU,"bom",function(){return eq});const eG={name:"",progressName:"Select roof"},ez={name:"",progressName:"Edit roof"},ej={name:"",progressName:"Substrate"},eW={name:"",progressName:"Edges"},eV={name:"",progressName:"Extras"},eq={name:"",progressName:"Bom"};l("lCkOv");const eH={onePiece:"onePiece",fleeceBacked:"fleeceBacked"},eX={osb:"osb",grp:"grp",metal:"metal",felt:"felt"},eY={onePiece_1_14:{type:"onePiece",thickness:.00114,rollLength:30.5,title:"1.14mm Standard FlexiProof One Piece EPDM Membrane",id:"1-14-fp"},onePiece_1_20:{type:"onePiece",thickness:.0012,rollLength:30.5,title:"1.20mm Premium FlexiProof One Piece EPDM Membrane",id:"1-20-fp"},onePiece_1_52:{type:"onePiece",thickness:.00152,rollLength:30.5,title:"1.52mm Heavy Duty FlexiProof One Piece EPDM Membrane",id:"1-52-fp"},fleeceBacked_1_20:{type:"fleeceBacked",thickness:.0012,rollLength:61,title:"2.6mm Heavy Duty FlexiProof Fleece Backed EPDM Membrane",id:"1-20-fb"}},e$={houseWall:"houseWall",parapetWall:"parapetWall",gutterDrip:"gutterDrip",raisedKerb:"raisedKerb",pitchRoofOn:"pitchRoofOn",pitchRoofOff:"pitchRoofOff",feltJoin:"feltJoin",seamJoin:"seamJoin",buttJoin:"buttJoin",none:"none"},eK={deck:{waterBased:"waterBased",contactBonding:"contactBonding",pu:"pu"},primer:"primer",sealants:{lapEdge:"lapEdge",waterBlock:"waterBlock",msPolymer:"msPolymer",blackSilicone:"blackSilicone"}},eJ={deck:"deck",primer:"primer",sealants:"sealants"},eZ={seam:"seam",cured:"cured",uncured:"uncured",mechanical:"mechanical"},eQ={extraSmall:"extraSmall",small:"small",medium:"medium",large:"large"},e0={seam:"seamJoin",butt:"buttJoin"},e1={cellular:"cellular",solid:"solid"},e2={pvc:"pvc",metal:"metal"},e5={black:"black",grey:"grey"},e3={standard:"standard",deep:"deep"},e4={balcony:"balcony",horizontal:"horizontal",pipeSeal:"pipeSeal",pipeBox:"pipeBox",internal:"internal",top:"top",breather:"breather"},e6={tools:{adhesiveRollers:"adhesiveRollers",rubberRollers:"rubberRollers",brushes:"brushes",scissors:"scissors",scrubbers:"scrubbers",other:"other",kits:"kits"},cleaners:"cleaners",joiners:"joiners",fixings:"fixings"};l("lCkOv");class e8 extends Error{constructor(e){super();let t="";for(let i in e)switch(i){case"name":this.name=e[i];break;case"message":t=`${e[i]}
${t}`;break;default:{let r=`    ${i}: ${e[i]}`;t=`${t}${r}
`}}this.message=t||""}}class e7{#e=null;#t=null;#i=[];#r=null;constructor(e,{isClosed:t=!1}={}){if(e){for(let t of e)if(t instanceof e9)this.addNode(t);else{let e=new e9(t);this.addNode(e)}t&&this.close()}}addNode(e,{parentNode:t=this.#t}={}){if(e.list)throw new te(e.list===this?{message:"New node already exists in this list",fix:"Do not add nodes that are already in list"}:{message:"New node already in another list",fix:"Do not add nodes that are already in another list"});let i=-1;if("number"==typeof t){let e=this.nodeAtIndex(t);if(!e)throw new te({message:"Parent node not found at index",fix:"Supply index in range of list size"});i=t,t=e}else if(t&&(i=this.#i.indexOf(t),t.list!==this||-1===i))throw new te({message:"Parent node not found in list",fix:"Supply a parent node which exists in list"});e.list=this,t?this.#s(t,e):this.#n(e),t===this.#t&&(this.#t=e),this.#i.splice(i+1,0,e)}addNodes(e,{parentNode:t=this.#t}={}){for(let i of e)this.addNode(i,{parentNode:t}),t=i}removeNode(e,{recursive:t=!1,hard:i=!1}={}){let r;if("number"==typeof e){let t=this.nodeAtIndex(e);if(!t)throw new te({message:"Node to be removed not found at index",fix:"Supply index in range of list size"});r=e,e=t}else if(-1===(r=this.#i.indexOf(e)))throw new te({message:"Node to be removed not found in list",fix:"Supply a node which exists in list"});if(t){let e=this.#i.slice(r);return this.removeNodes(e)}this.#a(e,i),this.#i.splice(r,1)}removeNodes(e,{safe:t=!0,hard:i=!1}={}){for(let i=0;i<e.length;i++){let r=e[i];if("number"==typeof r){let s=this.nodeAtIndex(r);s?e[i]=s:t?e.splice(i,1):e[i]=1/0}else t&&!this.nodeExists(r)&&e.splice(i,1)}for(let t of e)this.removeNode(t,{hard:i})}splitAtNode(e,{deletionCount:t=0}={}){let i;if("number"==typeof e){let t=this.nodeAtIndex(e);if(!t)throw new te({message:"Split node not found at index",fix:"Supply index in range of list size"});i=e,e=t}else if(-1===(i=this.#i.indexOf(e)))throw new te({message:"Split node not found in list",fix:"Supply a split node which exists in list"});if(this.removeNodes(Array.from({length:t},(e,t)=>i+1+t)),!this.size)return null;let r=e.next;if(r===this.#t&&(this.#t=e),this.#r=e,e.next=null,this.#r=r,r&&(r.previous=null),this.#r=null,r&&!r.canReach(e)){this.#t=e;let t=new e7;for(;r;){let e=r;r=r.next,this.removeNode(e,{hard:!0}),t.addNode(e)}return t}if(r){this.#e=r,this.#t=e;let t=this.#i.splice(0,i+1);this.#i.push(...t)}return null}nodeAtIndex(e){return this.#i.at(e)}nodeWithValue(e){let t;for(let i of this)if(i.value===e){t=i;break}return t}findNode(e){let t;for(let i of this)if(e(i)){t=i;break}return t}indexOfNode(e){return this.#i.indexOf(e)}indexOfValue(e){return this.array.indexOf(e)}nodeExists(e){return e.list===this&&this.#i.includes(e)}reverse(){let{head:e,tail:t}=this;for(let i of(this.#e=t,this.#t=e,this.#i.reverse(),this.#i)){this.#r=i;let{next:e,previous:t}=i;i.next=t,i.previous=e}this.#r=null}open(){this.isClosed&&this.#e&&this.#t&&(this.#r=this.#t,this.#t.next=null,this.#r=this.#e,this.#e.previous=null),this.#r=null}close(){!this.isClosed&&this.#e&&this.#t&&(this.#r=this.#t,this.#t.next=this.head,this.#r=this.#e,this.#e.previous=this.tail),this.#r=null}*traverse(e,{endNode:t=null,maxNodes:i=1/0,inclusive:r=!0}={}){if("number"==typeof e){let t=this.nodeAtIndex(e);if(!t)throw new te({message:"Start node not found at index",fix:"Supply index in range of list size"});e=t}else if(!this.nodeExists(e))throw new te({message:"Start node is not contained in linked list",fix:"Supply a start node which is contained in linked list"});if("number"==typeof t){let e=this.nodeAtIndex(t);if(!e)throw new te({message:"End node not found at index",fix:"Supply index in range of list size"});t=e}else if(null!==t&&!this.nodeExists(t))throw new te({message:"End node is not contained in linked list",fix:"Supply an end node which is contained in linked list"});let s=0,n=e;for(;n&&s<i;)yield n,((n=n.next)===e||n===t)&&(r&&n&&n===t&&(yield n),n=null),s++}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e,(e=e.next)===this.#e&&(e=null)}#n(e){this.#e&&(this.#r=e,e.next=this.#e,e.previous=this.#e.previous,this.#e.previous&&(this.#r=this.#e.previous,this.#e.previous.next=e),this.#r=this.#e,this.#e.previous=e),this.#e=e,this.#r=null}#s(e,t){this.#r=t,t.next=e.next,t.previous=e,e.next&&(this.#r=e.next,e.next.previous=t),this.#r=e,e.next=t,this.#r=null}#a(e,t=!1){e===this.#e&&(this.#e=this.#e.next),e===this.#t&&(this.#t=this.#t.previous),e.previous&&(this.#r=e.previous,e.previous.next=e.next),e.next&&(this.#r=e.next,e.next.previous=e.previous),this.#r=e,t&&(e.next=null,e.previous=null),e.list=null,this.#r=null}get array(){let e=[];for(let t of this.#i)e.push(t.value);return e}get size(){return this.#i.length}get isClosed(){return this.tail?.next===this.head}get isEmpty(){return!this.#i.length&&!this.#e&&!this.#t}get head(){return this.#e}get tail(){return this.#t}get releasedNode(){return this.#r}}class e9{#o=null;#l=null;#h=null;constructor(e){this.value=e}canReach(e,{reverse:t=!1}={}){let i=this;do if((i=t?i.previous:i.next)===e)return!0;while(i&&i!==this)return!1}copy(){return new e9(this.value)}get #d(){if(!this.#o)throw new tt({message:"Node has no assigned list",fix:"Ensure that node is assigned to a list before using"});if(this.#o.releasedNode!==this)throw new tt({message:"Node not released for update by list",fix:"Do not mutate node directly, use DoubleLinkedList methods"});return!0}get list(){return this.#o}set list(e){(null===this.#o||this.#d)&&(this.#o=e)}get next(){return this.#l}set next(e){this.#d&&(this.#l=e)}get previous(){return this.#h}set previous(e){this.#d&&(this.#h=e)}}class te extends e8{constructor(e){super(e),this.name??="DoubleLinkedListError"}}class tt extends e8{constructor(e){super(e),this.name??="DoubleLinkedListNodeError"}}class ti{#c;#u;#p=null;#g=null;#f=null;#m=null;#x=null;#y=null;#b=null;constructor(e=NaN,t=NaN){this.#c=e,this.#u=t}set({x:e=this.#c,y:t=this.#u}={}){this.#c=e,this.#u=t,this.#p=null,this.#g=null,this.#f=null,this.#m=null,this.#x=null,this.#y=null,this.#b=null}add(e,{inPlace:t=!1}={}){let{x:i,y:r}={x:this.#c+e.x,y:this.#u+e.y};return t&&this.set({x:i,y:r}),t?this:new ti(i,r)}subtract(e,{inPlace:t=!1}={}){let{x:i,y:r}={x:this.#c-e.x,y:this.#u-e.y};return t&&this.set({x:i,y:r}),t?this:new ti(i,r)}scalarMultiply(e,{inPlace:t=!1}={}){let{x:i,y:r}={x:this.#c*e,y:this.#u*e};return t&&this.set({x:i,y:r}),t?this:new ti(i,r)}scalarDivide(e,{inPlace:t=!1}={}){let{x:i,y:r}={x:this.#c/e,y:this.#u/e};return t&&this.set({x:i,y:r}),t?this:new ti(i,r)}rotate(e,{origin:t=new ti(0,0),inPlace:i=!1}={}){let{x:r,y:s}=this.subtract(t);return{x:r,y:s}={x:r*Math.cos(e)-s*Math.sin(e)+t.x,y:r*Math.sin(e)+s*Math.cos(e)+t.y},i&&this.set({x:r,y:s}),i?this:new ti(r,s)}normalize({inPlace:e=!1}={}){return this.scalarDivide(this.magnitude,{inPlace:e})}dotMultiply(e){return this.#c*e.x+this.#u*e.y}angleTo(e){let t=this.dotMultiply(e),i=this.magnitude*e.magnitude;return Math.acos(t/i)}isParallelTo(e){return this.direction===e.direction||this.direction===e.reverseDirection}equals(e){return this.#c===e.x&&this.#u===e.y}copy(){return new ti(this.#c,this.#u)}static orientation(e,t,i){let{x:r,y:s}=t.subtract(e),{x:n,y:a}=i.subtract(t);return Math.sign(s*n-a*r)}get direction(){return null===this.#p&&(0===this.#c&&0===this.#u?this.#p=NaN:this.#p=Math.atan2(this.#u,this.#c)),this.#p}get absoluteDirection(){return null===this.#g&&(this.#g=this.direction>=0?this.direction:4*Math.PI+this.direction),this.#g}get reverseDirection(){return null===this.#f&&(this.#f=this.direction>0?this.direction-Math.PI:this.direction+Math.PI),this.#f}get isHorizontal(){return null===this.#m&&(this.#m=!(this.direction%Math.PI)),this.#m}get isVertical(){return null===this.#x&&(this.#x=Math.abs(this.direction)===Math.PI/2),this.#x}get isGridAligned(){return null===this.#y&&(this.#y=this.isHorizontal||this.isVertical),this.#y}get magnitude(){return null===this.#b&&(this.#b=Math.sqrt(this.#c*this.#c+this.#u*this.#u)),this.#b}get x(){return this.#c}get y(){return this.#u}}class tr extends ti{#v;constructor(e,t){let{x:i,y:r}=t.subtract(e);super(i,r),this.#v=e}set({start:e,end:t,x:i,y:r}={}){return e&&this.#v.set(e),t&&this.#v.set(t.subtract(this)),("number"==typeof i||"number"==typeof r)&&super.set({x:i,y:r}),this}rotate(e,{origin:t=new ti(0,0),inPlace:i=!1}={}){let{start:r,end:s}={start:this.#v.rotate(e,{origin:t}),end:this.end.rotate(e,{origin:t})},{x:n,y:a}=s.subtract(r);return i&&this.set({start:r,x:n,y:a}),i?this:new tr(r,s)}equals(e){return super.equals(e)&&this.#v.equals(e.start)}copy(e=this.#v.copy()){return new tr(e,this.end)}intersects(e){return e instanceof tr?this.#w(e):this.#_(e)}getIntersection(e){if(!this.intersects(e)||this.isParallelTo(e))return null;let t=e.yIntercept.y-this.yIntercept.y,i=this.gradient-e.gradient,r=isFinite(this.gradient)?isFinite(e.gradient)?t/i:e.xIntercept.x:this.xIntercept.x,s=0===this.gradient?this.yIntercept.y:isFinite(this.gradient)?this.gradient*r+this.yIntercept.y:e.gradient*r+e.yIntercept.y;return new ti(r,s)}getIntersectionFraction(e){let t=this.getIntersection(e);return t?t.subtract(this.#v).magnitude/this.magnitude:null}getParallelIntersections(e){if(!this.isParallelTo(e)||!this.yIntercept.equals(e.yIntercept)&&!this.xIntercept.equals(e.xIntercept))return null;let{start:t,end:i}=e.direction!==this.direction?{start:e.end,end:e.start}:e;return{start:t,end:i}}getParallelIntersectionFractions(e){let t=this.getParallelIntersections(e);if(!t)return null;let{start:i,end:r}=t,s=new tr(this.start,i),n=new tr(this.start,r),a=s.direction===this.direction?1:-1,o=n.direction===this.direction?1:-1,[l,h]=[a*s.magnitude/this.magnitude,o*n.magnitude/this.magnitude];return{start:l,end:h}}getParallelIntersectionMagnitude(e){let t=this.getParallelIntersectionFractions(e);if(!t)return 0;let{start:i,end:r}=t;return i<1&&r>0?this.magnitude*(Math.min(1,r)-Math.max(0,i)):0}getVectorFraction(e){return this.intersects(e)?e.subtract(this.#v).magnitude/this.magnitude:null}getDistanceToPoint(e,{forcePerpendicular:t=!1}={}){let{gradient:i,yIntercept:{y:r},xIntercept:{x:s}}=this,n=isFinite(i)?0===i?Math.abs(r-e.y):Math.abs(e.y-i*e.x-r)/Math.sqrt(i*i+1):Math.abs(s-e.x);if(0===n)return n;let a=Math.PI/2-this.absoluteDirection,o=this.rotate(a),l=e.rotate(a),h=new tr(l,o.start),d=new tr(l,o.end),{gradient:c}=h,{gradient:u}=d;if(c>u&&({toStartGradient:c,toEndGradient:u}={toStartGradient:u,toEndGradient:c}),c>0||u<0){if(t)return NaN;n=Math.min(h.magnitude,d.magnitude)}return n}getDistanceToEdge(e,{forcePerpendicular:t=!1,allowOpposite:i=!0}={}){let r=[this.getDistanceToPoint(e.start,{forcePerpendicular:t}),this.getDistanceToPoint(e.end,{forcePerpendicular:t})];if(i){let t,i;let s=ts.from(this),n=ts.from(e),a=s.getBisector(this.start),o=s.getBisector(this.end),l=n.getIntersection(a),h=n.getIntersection(o);if(l){let i=new tr(this.start,l);i.scalarMultiply(2,{inPlace:!0}),t=e.intersects(i)}if(h){let t=new tr(this.end,h);t.scalarMultiply(2,{inPlace:!0}),i=e.intersects(t)}l&&t&&r.push(this.getDistanceToPoint(l)),h&&i&&r.push(this.getDistanceToPoint(h))}let s=r.filter(e=>!isNaN(e));return s.length?Math.min(...s):NaN}#w(e){if(this.#_(e.start)||this.#_(e.end)||e.#_(this.start)||e.#_(this.end))return!0;let t={_ABC:ti.orientation(this.start,this.end,e.start),_ABD:ti.orientation(this.start,this.end,e.end),_ACD:ti.orientation(this.start,e.start,e.end),_BCD:ti.orientation(this.end,e.start,e.end)};return t._ABC!==t._ABD&&t._ACD!==t._BCD}#_(e){return 0===ti.orientation(this.start,this.end,e)&&e.x>=Math.min(this.start.x,this.end.x)&&e.y>=Math.min(this.start.y,this.end.y)&&e.x<=Math.max(this.start.x,this.end.x)&&e.y<=Math.max(this.start.y,this.end.y)}get start(){return this.#v}get end(){return this.start.add(this)}get gradient(){return this.y/this.x}get xIntercept(){let e=0!==this.gradient?this.#v.x-this.#v.y*(1/this.gradient):NaN;return new ti(e,0)}get yIntercept(){let e=isFinite(this.gradient)?this.#v.y-this.#v.x*this.gradient:NaN;return new ti(0,e)}}class ts{constructor(e,{yIntercept:t=NaN,xIntercept:i=NaN,conflictTolerance:r=1e-10}={}){let s=isFinite(i)&&isFinite(t)&&-i*e-t>r;if(s)throw console.log(-i*e-t),new tn({message:"Given intercepts conflict based on line gradient",fix:"Provide correct intercepts"});if(isNaN(i)&&isNaN(t)||!isFinite(e)&&isNaN(i)||0===e&&isNaN(t))throw new tn({message:"Given intercepts do not uniquely identify a line",fix:"Provide correct intercepts"});this.gradient=isFinite(e)?e:1/0,isFinite(i)&&isFinite(t)?(this.xIntercept=i,this.yIntercept=t):isFinite(i)?(this.xIntercept=i,this.yIntercept=isFinite(this.gradient)?-this.xIntercept*this.gradient:NaN):isFinite(t)&&(this.yIntercept=t,this.xIntercept=0===this.gradient?NaN:-this.yIntercept/this.gradient),this.xIntercept??=NaN,this.yIntercept??=NaN}getY(e){return isFinite(this.gradient)?0===this.gradient?this.yIntercept:this.gradient*e+this.yIntercept:NaN}getX(e){return isFinite(this.gradient)?0===this.gradient?NaN:(e-this.yIntercept)/this.gradient:this.xIntercept}getBisector(e){let t=isFinite(this.gradient)?0===this.gradient?1/0:-1/this.gradient:0,i=isFinite(t)?e.y-e.x*t:NaN,r=0!==t?e.x-e.y*(1/t):NaN;return new ts(t,{yIntercept:i,xIntercept:r})}getIntersection(e){if(this.gradient===e.gradient)return null;let t=e.yIntercept-this.yIntercept,i=this.gradient-e.gradient,r=isFinite(i)?t/i:isFinite(this.gradient)?e.xIntercept:this.xIntercept,s=isFinite(this.gradient)?this.gradient*r+this.yIntercept:e.gradient*r+e.yIntercept;return new ti(r,s)}static from(e){let{gradient:t,yIntercept:{y:i},xIntercept:{x:r}}=e;return new ts(t,{yIntercept:i,xIntercept:r})}}class tn extends e8{constructor(e){super(e),this.name??="LineError"}}class ta{vertices=new e7;edges=new e7;#k=!1;#P=0;constructor(){}addVertex(e){}removeVertex(e){let t=this.vertices.indexOfValue(e);if(t<=0)throw new to({message:"Vertex node with value not found in polygon",fix:"Remove a vertex which exists in polygon"});this.vertices.removeNode(t,{recursive:!0}),this.edges.removeNode(t-1,{recursive:!0})}dissolveVertices(){for(let e of this.edges){let{value:t,next:i}=e;if(!i)continue;let{value:r}=i;if(!t.magnitude){this.edges.removeNode(e);let i=this.vertices.findNode(e=>e.value.equals(t.start));return i&&this.vertices.removeNode(i),this.dissolveVertices()}if(t.direction===r.direction){this.edges.removeNode(i);let e=this.vertices.findNode(e=>e.value.equals(t.end));return e&&this.vertices.removeNode(e),t.add(r,{inPlace:!0}),this.dissolveVertices()}}}rotate(e,{origin:t,inPlace:i=!0}={}){let r=i?this:this.copy();if(!t){let e=new ti(0,0);for(let{value:t}of r.vertices)e.add(t,{inPlace:!0});e.scalarDivide(r.vertices.size,{inPlace:!0}),t=e}for(let{value:i}of r.edges)i.rotate(e,{origin:t,inPlace:!0});return r.isClosed||r.vertices.tail?.value.rotate(e,{origin:t,inPlace:!0}),r.#P=(r.#P+e)%(2*Math.PI),r}translate(e,{inPlace:t=!0}={}){let i=t?this:this.copy();for(let{value:t}of i.vertices)t.add(e,{inPlace:!0});return i}splitEdge(e,{vertex:t,fraction:i=.5,splitPolygon:r=!1}={}){if(i<=0||i>=1)throw new to({message:"Split fraction invalid",fix:"Supply a split fraction between 0 and 1 EXCLUSIVE",fraction:i});let s=this.edges.nodeWithValue(e);if(!s)throw new to({message:"Edge node with given value not found in polygon",fix:"Split edge which exists in polygon"});let n=this.edges.indexOfNode(s);if(t??=e.start.add(e.scalarMultiply(i)),!e.intersects(t))throw new to({message:"Split vertex does not lie on edge",fix:"Provide vertex which lies on edge being split"});let a=new e9(t),o=new tr(t,e.end),l=new e9(o);if(e.set(t.subtract(e.start)),this.vertices.addNode(a,{parentNode:n}),this.edges.addNode(l,{parentNode:n}),r){this.vertices.addNode(new e9(t.copy()),{parentNode:n});let e=this.vertices.splitAtNode(n+1),i=this.edges.splitAtNode(n);if(i&&e)return ta.from(e,i)}return null}subtractEdge(e,{filterRoot:t=!0,isRoot:i=!0,includeSourceVertices:r=!1}={}){for(let{value:s}of this.edges){let n=this.#A(s,e,{includeSourceVertices:r});if(n instanceof ta){let r=this.subtractEdge(e,{filterRoot:t,isRoot:i}),s=n.subtractEdge(e,{filterRoot:t,isRoot:!1});return[...r,...s]}if(null===n)return this.subtractEdge(e,{filterRoot:t,isRoot:i,includeSourceVertices:r})}return t&&i?[]:[this]}internalAngleAtVertex(e){if(!this.isClosed)throw new to({message:"Polygon not closed, cannot calculate angle",fix:"Request angle at a vertex in a closed polygon"});let t=this.edges.findNode(t=>t.value.start===e);if(!t)throw new to({message:"Edge node starting with vertex not found in polygon",fix:"Request angle at a vertex which exists in polygon"});let{value:i,previous:{value:r}}=t,s=(Math.PI-i.direction+r.absoluteDirection)%(2*Math.PI),n=this.vertexOrientation;return 1===n?s:-1===n?2*Math.PI-s:0}externalAngleAtVertex(e){return 2*Math.PI-this.internalAngleAtVertex(e)}enclosesPoint(e,{includeEdges:t=!0}={}){let i=!1;for(let{value:r}of this.edges){if(r.intersects(e))return t;let{start:s,end:n}=r.start.y>r.end.y?{start:r.end,end:r.start}:r,a=e.y>s.y!=e.y>n.y,o=1===ti.orientation(s,e,n);a&&o&&(i=!i)}return i}enclosesPolygon(e){for(let{value:t}of e.edges)for(let{value:e}of this.edges)if(t.intersects(e))return!1;for(let{value:t}of e.vertices)if(!this.enclosesPoint(t,{includeEdges:!1}))return!1;return this.area>e.area}copy(){let[e,t]=[[],[]];for(let[i,r]of this.vertices.array.entries()){let s=this.edges.array[i],n=r.copy();e.push(n),t.push(s.copy(n))}let{isClosed:i}=this,r=ta.from(new e7(e,{isClosed:i}),new e7(t,{isClosed:i}),{isLocked:this.#k,rotation:this.#P});return r}#A(e,t,{includeSourceVertices:i=!1}={}){if(!t.intersects(e))return;if(t.isParallelTo(e))return this.#S(e,t);let r=e.getIntersectionFraction(t),s=t.getIntersectionFraction(e),n=e.getIntersection(t);if(null!==r&&null!==s&&!(r<=0)&&!(r>=1)){if(i){if(s<0||s>1)return}else if(s<=0||s>=1)return;return this.splitEdge(e,{vertex:n||void 0,splitPolygon:!0})}}#S(e,t){let i,r;let s=this.edges.indexOfValue(e),n=e.getParallelIntersectionFractions(t);if(!n)return;let{start:a,end:o}=n;return a<=0&&0===o?void 0:1===a&&o>=1?void 0:(a<=0&&o>=1?(i=this.edges.splitAtNode(s-1,{deletionCount:1}),r=this.vertices.splitAtNode(s)):a<=0?(this.splitEdge(e,{fraction:o}),i=this.edges.splitAtNode(s-1,{deletionCount:1}),r=this.vertices.splitAtNode(s)):(o>=1?this.splitEdge(e,{fraction:a}):(this.splitEdge(e,{fraction:o}),this.splitEdge(e,{fraction:a*(1/o)})),i=this.edges.splitAtNode(s,{deletionCount:1}),r=this.vertices.splitAtNode(s+1)),i&&r)?ta.from(r,i):(!i&&r&&this.vertices.size<=1&&(this.vertices=r),null)}static from(e,t,{isLocked:i=!1,rotation:r=0}={}){let s=new ta;return s.vertices=e,s.edges=t,s.isLocked=i,s.rotation=r,s}get rotation(){return this.#P%(2*Math.PI)}set rotation(e){this.rotate((e-this.#P)%(2*Math.PI))}get horizontalEdges(){return this.edges.array.filter(e=>e.isHorizontal)}get verticalEdges(){return this.edges.array.filter(e=>e.isVertical)}get isClosed(){return this.vertices.isClosed&&this.edges.isClosed}get isLocked(){return this.#k}set isLocked(e){this.#k=e}get boundingBox(){let e={x:1/0,y:1/0},t={x:-1/0,y:-1/0};for(let{value:i}of this.vertices)i.x<e.x&&(e.x=i.x),i.y<e.y&&(e.y=i.y),i.x>t.x&&(t.x=i.x),i.y>t.y&&(t.y=i.y);return{anchor:new ti(e.x,e.y),width:t.x-e.x,height:t.y-e.y}}get perimeter(){if(!this.isClosed)return NaN;let e=0;for(let{value:t}of this.edges)e+=t.magnitude;return e}get signedArea(){if(!this.isClosed)return NaN;let e=0;for(let t of this.vertices){let{value:i,next:{value:r}}=t;e+=i.x*r.y,e-=r.x*i.y}return .5*e}get area(){return Math.abs(this.signedArea)}get vertexOrientation(){return Math.sign(this.signedArea)}}class to extends e8{constructor(e){super(e),this.name??="PolygonError"}}class tl extends ta{#M=new Map;constructor({vertices:e=[new ti(0,0)],isClosed:t=!1}={}){for(let t of(super(),e))this.addVertex(t);t&&this.#E()}addVertex(e,{dissolveVertices:t=!0}={}){if(this.isClosed)throw new td({message:"Cannot add vertices to a closed polygon instance",fix:"Ensure polygon is not closed before adding vertices"});let i=new e9(e);if(!this.vertices.size)return this.vertices.addNode(i);let r=this.vertices.head?.value;if(r&&e.equals(r))return this.#E();for(let{value:t}of this.vertices)if(e.equals(t))throw new td({message:"Identical vertex already exists in polygon",fix:"Do not add duplicate vertices"});let s=this.vertices.tail?.value;if(!s)throw new td({message:"Previous vertex not found",fix:"Check that internal linked lists have not been modified"});let n=new tr(s,e),a=new e9(n);if(!n.isGridAligned)throw new td({message:"Generated edge is not grid aligned",fix:"Check vertex is grid aligned with previous vertex"});for(let{value:e}of this.edges)if(n.intersects(e)){let t=n.getIntersection(e);if(t?.equals(n.start)||n.direction===e.direction)continue;throw new td({message:"Generated edge intersects an existing edge",fix:"Check vertex does not cause new edge to cross others"})}this.vertices.addNode(i),this.edges.addNode(a),t&&this.dissolveVertices()}moveEdge(e,t,{dissolveVertices:i=!0}={}){if(t.equals(e.start))return;let r=this.edges.nodeWithValue(e);if(!r)throw new td({message:"Edge node with given value not found in polygon",fix:"Move edge which exists in polygon"});let s=this.edges.indexOfNode(r);if(e.angleTo(t.subtract(e.start))!==Math.PI/2)throw new td({message:"Cannot move edge in that direction",fix:"Ensure only moving edge perpendicular to edge direction"});let{previous:n,next:a}=r,o=n&&n.value.direction!==e.direction?n.value.start:e.start.copy(),l=a&&a.value.direction!==e.direction?a?.value.end:e.end,h=e.isVertical?e.start.x:e.start.y,d=e.isVertical?t.x-h:t.y-h,{minDeltaStart:c,maxDeltaStart:u}=this.edges.array.reduce((t,i)=>{if(i===e||!i.isParallelTo(e))return t;let r=i.isVertical?i.start.x:i.start.y,s=r-h,o=e.isVertical?new ti(e.start.x+s,e.start.y):new ti(e.start.x,e.start.y+s),l=e.isVertical?new ti(e.end.x+s,e.end.y):new ti(e.end.x,e.end.y+s),d=new tr(o,l),c=d.getParallelIntersectionFractions(i)?.end;return(d.getParallelIntersectionMagnitude(i)||i!==n?.previous?.value&&0===c||i!==a?.next?.value&&1===c)&&(t.minDeltaStart=s<0?Math.max(t.minDeltaStart,s):t.minDeltaStart,t.maxDeltaStart=s>0?Math.min(t.maxDeltaStart,s):t.maxDeltaStart),t},{minDeltaStart:-1/0,maxDeltaStart:1/0});if(d<=c||d>=u)throw new td({message:"Updated edges intersect existing edges",fix:"Do not move edge which causes intersection"});let p=1/0;for(let[t]of this.#M){let i=e.isVertical?t.anchor.x:t.anchor.y,r=i-h;if(Math.sign(d)===Math.sign(r))for(let{value:i}of t.edges){let t=e.getDistanceToEdge(i,{forcePerpendicular:!0});isNaN(t)||(p=Math.min(p,t))}}if(Math.abs(d)>=p)throw new td({message:"Updated edges intersect internal hole",fix:"Do not move edge which causes intersection"});let g=t.add(e),f={previous:new tr(o,t),next:new tr(g,l)},m=new e9(o),x=new e9(f.previous);if(n){if(n.value.direction!==e.direction){let{start:e,x:t,y:i}=f.previous;n.value.set({start:e,x:t,y:i})}else this.vertices.addNode(m,{parentNode:s-1}),this.edges.addNode(x,{parentNode:s-1}),s++}else!n&&(this.vertices.addNode(m,{parentNode:null}),this.edges.addNode(x,{parentNode:null}),s++);if(m=new e9(f.next.start),x=new e9(f.next),a){if(a.value.direction!==e.direction){let{start:e,x:t,y:i}=f.next;a.value.set({start:e,x:t,y:i})}else this.vertices.addNode(m,{parentNode:s}),this.edges.addNode(x,{parentNode:s})}else a||(this.vertices.addNode(m,{parentNode:-2}),this.edges.addNode(x));e.set({start:t}),i&&this.dissolveVertices()}resizeEdge(e,t,{divider:i,dissolveVertices:r=!0}={}){let s=t-e.magnitude;if(0===s)return;let n=e.isVertical?new ti(0,s):new ti(s,0),a=this.edges.nodeWithValue(e);if(!a)throw new td({message:"Edge node with given value not found in polygon",fix:"Resize edge which exists in polygon"});let{startCoord:o,endCoord:l}=e.isVertical?{startCoord:e.start.y,endCoord:e.end.y}:{startCoord:e.start.x,endCoord:e.end.x},h=o<l?e.end:e.start,{anchor:{x:d,y:c},width:u,height:p}=this.boundingBox;i??=e.isVertical?new tr(new ti(d,h.y),new ti(d+u,h.y)):new tr(new ti(h.x,c),new ti(h.x,c+p));let g=e.isVertical?i.end.y:i.end.x;if(e.angleTo(i)!==Math.PI/2)throw new td({message:"Dividing edge is not perpendicular to resized edge",fix:"Ensure dividing edge is perpendicular to resized edge"});let{minDeltaMagnitude:f}=this.vertices.array.reduce((e,t)=>{let r=i.isVertical?t.x:t.y;return r<g&&r>e.maxPreDividerCoord&&(e.maxPreDividerCoord=r),e.minDeltaMagnitude=e.maxPreDividerCoord-g,e},{maxPreDividerCoord:-1/0,minDeltaMagnitude:1/0});if(s<f)throw new td({message:"Resize causes existing edges to intersect",fix:"Resize edge to larger value"});let m=1/0;for(let[t]of this.#M){let{anchor:i,rotation:r,edges:{array:s}}=t,n=e.isVertical?i.y:i.x;if(n>g)continue;let a=r<Math.PI/2?[0,1]:r<Math.PI?[0,3]:r<3*Math.PI/2?[2,3]:[1,2];for(let{value:t}of(e.isVertical&&(a=a.map(e=>(e+1)%4)),this.edges)){if(t.isParallelTo(e))continue;let i=e.isVertical?t.start.y:t.start.x;if(!(i<n))for(let e of a){let i=s[e],r=t.getDistanceToEdge(i,{forcePerpendicular:!0});isNaN(r)||(m=Math.min(m,r))}}}if(Math.abs(s)>=m)throw new td({message:"Resize causes existing edges to intersect with hole",fix:"Resize edge to larger value"});for(let{value:t}of this.edges){let{direction:r}=t,{startCoord:s,endCoord:a}=e.isVertical?{startCoord:t.start.y,endCoord:t.end.y}:{startCoord:t.start.x,endCoord:t.end.x};(s>=g||a>=g)&&(!(s>=g&&a>=g)&&t.isParallelTo(e)&&t.intersects(i)&&(0===r||r===Math.PI/2?(t.add(n,{inPlace:!0}),t.start.subtract(n,{inPlace:!0})):t.subtract(n,{inPlace:!0})),t.start.add(n,{inPlace:!0}))}for(let[t]of(r&&this.dissolveVertices(),this.#M)){let{anchor:i,width:r,height:s}=t.boundingBox,a=new th(i,r,s),o=e.isVertical?a.anchor.y:a.anchor.x;o>g&&this.transformHole(t,{translation:n})}}addHole(e){if(this.#M.has(e))throw new td({message:"Rectangle hole already exists in polygon",fix:"Do not add duplicate rectangle holes to polygon"});if(!this.enclosesPolygon(e))throw new td({message:"New hole is not enclosed by containing polygon",fix:"Add hole which is enclosed entirely by polygon instance"});let t=e.getInscribedRectangle({integerVertices:!0});this.#M.set(e,t)}transformHole(e,{resizeWidth:t=e.width,resizeHeight:i=e.height,translation:r=new ti(0,0),rotation:s=0}={}){if(!this.#M.has(e))throw new td({message:"Hole for transform does not exist in polygon",fix:"Transform a hole which exists in polygon"});let n=e.copy().resize({width:t,height:i}).translate(r).rotate(s);if(!this.enclosesPolygon(n))throw new td({message:"Hole transform intersects with containing polygon",fix:"Apply transform which does not cause intersection"});e.resize({width:t,height:i}).translate(r).rotate(s);let a=e.getInscribedRectangle({integerVertices:!0});this.#M.set(e,a)}removeHole(e){if(!this.#M.has(e))throw new td({message:"Rectangle hole does not exist in polygon",fix:"Delete a hole which exists in polygon"});this.#M.delete(e)}getBorderArea(e,t){if(!this.isClosed)throw new td({message:"Polygon not closed, cannot calculate border area",fix:"Request border area of a closed polygon"});if("number"==typeof e){let t=e;e=Array.from({length:this.edges.size},()=>t)}if(e.length!==this.edges.size)throw new td({message:"Number of border widths does not match edge count",fix:"Provide border widths for each edge in polygon"});let i=0;for(let[r,s]of[...this.edges].entries()){let n=e[r],a=e[r+1]||e[0];i+=s.value.magnitude*n;let o=s.next.value.start,l=n*a,h="internal"===t?this.internalAngleAtVertex(o):this.externalAngleAtVertex(o);h===Math.PI/2?i-=l:i+=l}return i}partitionPolygon({isCrossAxis:e=!1,shouldExpand:t=!0,inPlace:i=!1}={}){if(!i)return this.copy().partitionPolygon({isCrossAxis:e,shouldExpand:t,inPlace:!0});if(!this.isClosed)throw new td({message:"Cannot partition incomplete polygon",fix:"Ensure that polygon is closed before attempting partition"});if(4===this.edges.size&&!this.#M.size){let{anchor:e,width:t,height:i}=this.boundingBox;return[new th(e,t,i)]}let r=e?this.verticalEdges:this.horizontalEdges;for(let[,t]of this.#M){let i=e?t.verticalEdges:t.horizontalEdges;r.push(...i)}let s=r.sort((t,i)=>e?t.start.x-i.start.x:t.start.y-i.start.y).at(0);if(!s)throw new td({message:"Cannot infer anchor edge",fix:"Ensure that sufficient grid aligned edges exist"});for(let[r,n]of this.#M)for(let{value:a}of n.edges)if(s.getParallelIntersections(a))return this.removeHole(r),this.#C(n),this.partitionPolygon({isCrossAxis:e,shouldExpand:t,inPlace:i});let n=0;e:for(let[i,a]of r.entries()){let o=e?a.start.x<=s.start.x:a.start.y<=s.start.y;if(o)continue;let l=s.copy();for(let o of(e?l.start.set({x:a.start.x}):l.start.set({y:a.start.y}),n=e?l.start.x-s.start.x:l.start.y-s.start.y,r.slice(i))){let e=l.getParallelIntersectionFractions(o);if(!e)continue;let{start:i,end:r}=e;if(!(i>1)&&!(r<0)){if(1===i||0===r){if(!t)break e}else if(i<1||r>0)break e}}}let a=s.x<0||s.y<0?s.end.copy():s.start.copy(),[o,l]=e?[n,s.magnitude]:[s.magnitude,n],h=new th(a,o,l),d=[h],c=this.#T(h);return c.forEach(e=>{d.push(...e.partitionPolygon(...arguments))}),d}copy(){let[e,t]=[[],[]];for(let[i,r]of this.vertices.array.entries()){let s=this.edges.array[i],n=r.copy();e.push(n),t.push(s.copy(n))}let i=new Map;for(let[e,t]of this.#M)i.set(e.copy(),t.copy());let{isClosed:r,isLocked:s,rotation:n}=this,a=tl.from(new e7(e,{isClosed:r}),new e7(t,{isClosed:r}),{isLocked:s,rotation:n,holes:i});return a}#E(){let[e,t]=[this.edges.head?.value,this.edges.tail?.value];if(!e||!t)throw new td({});let[i,r]=[this.vertices.head?.value,this.vertices.tail?.value];if(!i||!r)throw new td({});let s=new tr(r,i),n=new e9(s),{isGridAligned:a,reverseDirection:o}=s,{direction:l}=t,{direction:h}=e;if(!a||o===h||o===l)throw new td({});for(let e of this.edges)if(e!==this.edges.head&&e!==this.edges.tail&&s.intersects(e.value))throw new td({});this.edges.addNode(n),this.edges.close(),this.vertices.close(),this.dissolveVertices()}#C(e){for(let{value:t}of e.edges)this.subtractEdge(t);for(let t of e.vertices.array){let e=this.vertices.findNode(e=>e.value.equals(t));if(!e)try{this.addVertex(t)}catch{let{x:e,y:i}=this.vertices.tail?.value||{},r=new ti(t.x,i),s=this.vertices.head?.value;s&&r.equals(s)&&(r=new ti(e,t.y)),this.addVertex(r),this.addVertex(t)}}let t=this.vertices.head?.value;t&&this.addVertex(t)}#T(e,{filterRoot:t=!1}={}){let i=[this];for(let{value:t}of e.edges)for(let e of i)i.push(...e.subtractEdge(t));let r=i.filter(e=>e.vertices.size>=4).flatMap(t=>this.#I(t,e));return t?r.filter(e=>e!==this):r}#I(e,t){let{vertices:i,edges:r}=e,s=e instanceof tl?e:tl.from(i,r),n=[s];if(!i.head||!i.tail)return[s];let{head:{value:a},tail:{value:o}}=i;if(!new tr(a,o).isGridAligned){let e=new ti(a.x,o.y),l=new ti(o.x,a.y),h=t.vertices.findNode(({value:t})=>t.equals(e)||t.equals(l));if(!h)throw new td({});let d=i.findNode(({value:e})=>e.equals(h?.value));if(d){let e=i.indexOfNode(d),t=d.value.copy(),s=new e9(t);i.addNode(s,{parentNode:e});let a=i.splitAtNode(e),o=r.splitAtNode(e-1);a&&o&&n.push(tl.from(a,o))}else s.addVertex(h?.value)}for(let e of n){let t=e.vertices.head?.value;if(t)try{e.addVertex(t)}catch{let{x:i,y:r}=e.vertices.tail?.value||{},s=new ti(t.x,r);s.equals(t)&&(s=new ti(i,t.y)),e.addVertex(s),e.addVertex(t)}e.dissolveVertices()}return n}static from(e,t,{isLocked:i=!1,rotation:r=0,holes:s=new Map}={}){let n=new tl;return n.vertices=e,n.edges=t,n.isLocked=i,n.rotation=r,n.#M=s,n}get holes(){return this.#M}}class th extends tl{#B;#L;constructor(e,t,i){t<0&&(e.set({x:e.x+t}),t*=-1),i<0&&(e.set({y:e.y+i}),i*=-1);let{x:r,y:s}=e,n=[e.copy(),new ti(r+t,s),new ti(r+t,s+i),new ti(r,s+i)];super({vertices:n,isClosed:!0}),this.#B=t,this.#L=i,this.isLocked=!0}resize({width:e=this.#B,height:t=this.#L,inPlace:i=!0}={}){let r=i?this:this.copy();if(e!==r.#B||t!==r.#L)for(let i of r.edges){let s=r.edges.indexOfNode(i),n=s%2?t/r.#L:e/r.#B;i.value.scalarMultiply(n,{inPlace:!0}),i.next?.value.start.set(i.value.end)}return r.#R(),r}getInscribedRectangle({integerVertices:e=!1}={}){let{base:t,side:i}=this.#B>this.#L?{base:this.#L,side:this.#B}:{base:this.#B,side:this.#L},r=t===this.#B?this.edges.array[0]:this.edges.array[1],{rotation:s,center:n}=this,a=i/2,o=Math.PI/2-Math.abs(r.direction),l=o,h=t/(2*Math.sin(o+l));for(;Math.abs(h*Math.cos(o-l))>a;)l+=s>Math.PI/4&&s<2*Math.PI/4||s>3*Math.PI/4&&s<5*Math.PI/4||s>6*Math.PI/4&&s<7*Math.PI/4?.001:-.001,h=t/(2*Math.sin(o+l));let d=e?Math.floor(2*h*Math.cos(l)):2*h*Math.cos(l),c=e?Math.floor(2*h*Math.sin(l)):2*h*Math.sin(l),u=e?Math.ceil(n.x-d/2):n.x-d/2,p=e?Math.ceil(n.y-c/2):n.y-c/2,g=new ti(u,p);return new th(g,d,c)}copy(){let[e,t]=[[],[]];for(let[i,r]of this.vertices.array.entries()){let s=this.edges.array[i],n=r.copy();e.push(n),t.push(s.copy(n))}let{isClosed:i,isLocked:r,rotation:s}=this,n=th.from(new e7(e,{isClosed:i}),new e7(t,{isClosed:i}),{width:this.#B,height:this.#L,isLocked:r,rotation:s});return n}#R({tolerance:e=0}={}){let t=this.edges.array[0].magnitude,i=this.edges.array[1].magnitude,r=Math.abs(this.#B-t),s=Math.abs(this.#L-i);r>e&&(this.#B=t),s>e&&(this.#L=i)}static from(e,t,{anchor:i=e.head?.value||new ti(0,0),width:r,height:s,isLocked:n=!0,rotation:a=0}={}){if(4!==e.size||4!==t.size)throw new tc({message:"Vertex and/or edge lists provided are not of size 4",fix:"Create rectangle from suitable vertex and edge lists","vertex-list-size":e.size,"edge-list-size":t.size});r??=t.array[0].magnitude,s??=t.array[1].magnitude;let o=new th(i,r,s);return o.isLocked=n,o.rotation=a,o.vertices=e,o.edges=t,o}get center(){return this.anchor.add(this.edges.array[0].scalarMultiply(.5)).add(this.edges.array[1].scalarMultiply(.5))}get anchor(){return this.vertices.array[0]}get width(){return this.#B}get height(){return this.#L}}class td extends e8{constructor(e){super(e),this.name??="RectilinearPolygonError"}}class tc extends e8{constructor(e){super(e),this.name??="RectangleError"}}const tu=({feet:e=0,inches:t=0}={})=>(12*e+t)/39.3701,tp=(e,{isSample:t=!0}={})=>{let i=e.reduce((t,i)=>t+i/e.length,0),r=e.reduce((e,t)=>{let r=t-i;return e+r*r},0);return r/(t?e.length-1:e.length)};class tg extends tl{#O=new Map;rooflights=new Map;constructor({vertices:e=[new ti(0,0)],isClosed:t=!1}={}){super({vertices:e,isClosed:t})}addRooflight(e,t,i,{rotation:r=0,upstandHeight:s,shouldRemoveMembrane:n=!1}={}){let a=new th(e,t,i);0!==r&&a.rotate(r),this.addHole(a)}transformRooflight(e,{resizeWidth:t=e.width,resizeHeight:i=e.height,translation:r=new ti(0,0),rotation:s=0}={}){}removeRooflight(){}getEdgeType(e,{membraneType:t}={}){let i=this.#O.get(e)||e$.none;return t===eH.fleeceBacked&&i===e$.seamJoin?e$.buttJoin:i}setEdgeType(e,t){this.#O.set(e,t)}getEdgeOverhang(e,t){let{membrane:{type:i}}=t,r=i===eH.fleeceBacked?e0.butt:t.rubberJoin;return this.edges.array.reduce((r,s)=>{let n=e.getParallelIntersectionFractions(s);if(!n)return r;let{start:a,end:o}=n;if(a>=1||o<=0)return r;let l=this.getEdgeType(s,{membraneType:i}),h=t.overhangs[l].client;return r=Math.max(h,r)},t.overhangs[r].client/2)}getEdgeNonIntersectingLength(e){return this.edges.array.reduce((t,i)=>t-e.getParallelIntersectionMagnitude(i),e.magnitude)}}var tf=l("lCkOv");class tm{constructor(e,{units:t,minimumOrder:i=1,minimumFraction:r=1,quantity:s=1,unit:n,isUniqueLineItem:a=!0}={}){this.sku=e.sku,this.id=e.id,this.name=e.name,this.imageUrl=e.imageUrl,this.price=e.price,this.stock=e.stock,this.stockLimit=e.stockLimit||0,this.runningStock=this.stock-this.stockLimit,this.unit=n||e.unit||tf.UNITS.custom.single,this.quantity=s,this.isUniqueLineItem=a,this.minimumOrder=i,this.minimumFraction=r,this.width=this.#F(e.width,t?.width),this.length=this.#F(e.length,t?.length),this.height=this.#F(e.height,t?.height),this.weight=this.#F(e.weight,t?.weight,tf.UNITS.mass.kilogram)}resetRunningStockQuantity(){this.runningStock=this.stock-this.stockLimit}#F(e,t,i=tf.UNITS.length.metre){if(!e)return NaN;t??=i;let r=parseFloat(e);return t===i?r:{value:r,unit:t}}}var tf=l("lCkOv");class tx extends tm{constructor(e,t){let{code:i,type:r,quantity:s}=t.groups||{};super(e,{quantity:parseInt(s)/10,unit:tf.UNITS.volume.litre}),this.code=parseInt(i),this.type="2001"===i?eK.deck.waterBased:"2002"===i?eK.deck.contactBonding:"2011"===i?eK.deck.pu:"2003"===i?eK.primer:"2004FP"===t.input?eK.sealants.lapEdge:"2005FP"===t.input?eK.sealants.waterBlock:"2005MS"===t.input?eK.sealants.msPolymer:eK.sealants.blackSilicone,this.category=this.#D(this.type),this.membraneType="FP"===r?eH.onePiece:"FB"===r||"2011"===i?eH.fleeceBacked:null,this.type===eK.deck.pu?(this.quantity=parseInt(s),this.unit=tf.UNITS.mass.kilogram):this.type===eK.primer?this.quantity=parseInt(s)/1e3:Object.keys(eK.sealants).includes(this.type)&&(this.quantity=.33)}#D(e){switch(e){case eK.deck.waterBased:case eK.deck.contactBonding:case eK.deck.pu:return eJ.deck;case eK.primer:return eJ.primer;default:return eJ.sealants}}}class ty extends tm{constructor(e,t){super(e);let{code:i,type:r,color:s}=t.groups||{};this.code=parseInt(i),this.type=i.match(/^490[0|2]$/)?e1.cellular:i.match(/^480[0|2]$/)?e1.solid:null,this.color="B"===s?e5.black:"G"===s?e5.grey:null,this.cornerAngle="INT"===r?3*Math.PI/2:"EXT"===r?Math.PI/2:NaN,this.edgeType=i.match(/^4[8|9]00$/)?e$.raisedKerb:i.match(/^4[8|9]02$/)?e$.gutterDrip:null}}class tb extends tm{constructor(e,t){super(e);let{code:i}=t.groups||{};this.code=parseInt(i),this.type="5011"===i?e4.balcony:"5006"===i?e4.horizontal:"5003"===i?e4.pipeSeal:"5010"===i?e4.pipeBox:"5004"===i?e4.internal:"5005"===i?e4.top:e4.breather}}class tv extends tm{constructor(e,t){super(e);let{code:i}=t.groups||{},r=t.input||"";this.code=i,this.type="T007"===i?e6.tools.brushes:"SCRUB"===i?e6.tools.scrubbers:"2006"===i?e6.cleaners:i.match(/^T0(0[1-3]|20)$/)?e6.tools.adhesiveRollers:i.match(/^T(00[4-6]|DUAL)$/)?e6.tools.rubberRollers:i.match(/^T02[2|3]$/)?e6.tools.scissors:i.match(/^(TKIT1|PROKIT)$/)?e6.tools.kits:r.match(/^4[8|9]0[0|2]-JOI[B|G]$/)?e6.joiners:r.match(/^(KERB|GUTTER)-FIX-8-[B|G]$/)?e6.fixings:e6.tools.other}}var tf=l("lCkOv");class tw extends tm{constructor(e,t){super(e,{minimumFraction:.1,unit:tf.UNITS.length.metre,isUniqueLineItem:!1});let{type:i,thickness:r,width:s}=t.groups||{};this.type="FP"===i?eH.onePiece:eH.fleeceBacked,this.thickness=parseInt(r)/100/1e3,this.width=parseInt(s)/100}}var tf=l("lCkOv");class t_ extends tm{constructor(e,t){super(e,{unit:tf.UNITS.length.metre});let{width:i,code:r}=t.groups||{};this.code=parseInt(r),this.type="3001"===r?eZ.seam:"3002"===r?eZ.cured:"3003"===r?eZ.uncured:eZ.mechanical,this.width=tu({inches:parseInt(i)||3})}}var tf=l("lCkOv");class tk extends tm{constructor(e,t){super(e,{quantity:2.5,unit:tf.UNITS.length.metre});let{code:i,type:r,color:s}=t.groups||{};this.code=parseInt(i),this.type=i.match(/^490[0|2]$/)?e1.cellular:i.match(/^480[0|2]$/)?e1.solid:null,this.material=this.type?e2.pvc:e2.metal,this.color="B"===s?e5.black:"G"===s?e5.grey:null,this.depth=t.input?.match(/^4004(-HALF)?$/)?e3.standard:t.input?.match(/^4004D?$/)?e3.deep:null,this.edgeType=i.match(/^4[8|9]00$/)?e$.raisedKerb:i.match(/^4[8|9]02$/)?e$.gutterDrip:"4004"===i?e$.houseWall:e$.feltJoin,this.edgeType===e$.houseWall&&(this.quantity="HALF"===r?1.5:3)}}class tP{#N;#U;constructor({uniqueLineItems:e,nonUniqueLineItems:t}={}){this.#N=e||new Map,this.#U=t||[]}addLineItem(e,t){let{sku:i}=e,r=(this.#N.get(i)||0)+t;e.isUniqueLineItem?this.#N.set(i,r):this.#U.push({sku:i,quantity:r})}removeLineItem(e){let{sku:t}=e;this.#N.delete(t),this.#U=this.#U.filter(e=>e.sku!==t)}getLineItemQuantity(e){let{sku:t}=e,i=this.#N.get(t);return i||this.#U.reduce((e,i)=>i.sku===t?e+i.quantity:e,0)}setLineItemQuantity(e,t){if(e.isUniqueLineItem)this.#N.set(e.sku,t);else throw new tA({message:"Cannot set quantity of non-unique line item",fix:"Set quantity of a unique product line item"})}static join(...e){let t=new Map,i=[];for(let r of e){for(let{sku:e,quantity:i}of r.uniqueLineItems){let r=(t.get(e)||0)+i;t.set(e,r)}for(let e of r.nonUniqueLineItems)i.push(e)}return new tP({uniqueLineItems:t,nonUniqueLineItems:i})}get lineItems(){let e=[];for(let[t,i]of this.#N)e.push({sku:t,quantity:i});return e.push(...this.#U),e}get uniqueLineItems(){let e=[];for(let[t,i]of this.#N)e.push({sku:t,quantity:i});return e}get nonUniqueLineItems(){return this.#U}get reducedLineItems(){let{lineItems:e}=this,t=new Map;for(let{sku:i,quantity:r}of e){let e=(t.get(i)||0)+r;t.set(i,e)}let i=[];for(let[e,r]of t)i.push({sku:e,quantity:r});return i}}class tA extends e8{constructor(e){super(e),this.name??="BomError"}}const tS={membranes:/^(?<type>F[PB])-(?<thickness>\d{3})-(?<width>\d{3})(-1M)?$/,adhesives:{deck:{waterBased:/^(?<code>2001)(?<type>F[PB])-(?<quantity>\d*)(?<unit>L)$/,contactBonding:/^(?<code>2002)(?<type>F[PB])-(?<quantity>\d*)(?<unit>L|SPRAY)?$/,pu:/^(?<code>2011)-(?<quantity>\d*)(?<unit>KG|TANK)$/},primer:/^(?<code>2003)(?<type>F[PB])-(?<quantity>\d*)(?<unit>ML)$/,sealants:/^(?<code>200[4-5|8])(?<type>FP|MS)?$/},tapes:{seam:/^(?<code>3001)-(?<quantity>\d*)(?<unit>M)$/,cured:/^(?<code>3002)-(?<width>\d*)(?<widthUnit>IN)-(?<quantity>\d*)(?<unit>M)$/,uncured:/^(?<code>3003)-(?<width>\d*)(?<widthUnit>IN)-(?<quantity>\d*)(?<unit>M)$/,mechanical:/^(?<code>3004)-(?<width>\d*)(?<widthUnit>IN)-(?<quantity>\d*)(?<unit>M)$/},trims:{edges:/^(?<code>4[8|9]0[0|2])-(?<type>LEN)(?<color>B|G)$/,wall:/^(?<code>4004)-?(?<type>D|HALF)?$/,join:/^(?<code>4003)$/},corners:/^(?<code>4[8|9]0[0|2])-(?<type>EXT|INT)(?<color>B|G)$/,drains:{pipeSeal:/^(?<code>5003)$/,pipeBox:/^(?<code>5010)-(?<width>\d*)-SINGLE$/,internal:/^(?<code>5004)-(?<width>\d*)(?<widthUnit>MM)$/,horizontal:/^(?<code>5006)(-EXTENDER)?$/,top:/^(?<code>5005)$/,balcony:/^(?<code>5011)-SET$/,breather:/^(?<code>5008)$/},extras:{tools:{adhesiveRollers:/^(?<code>T0(20|0[1-3]))$/,rubberRollers:/^(?<code>(TDUAL|T00[4-6]))$/,brushes:/^(?<code>T007)$/,scissors:/^(?<code>T02[2-3])$/,scrubbers:/^(?<code>SCRUB)-(?<type>(HANDLE|PAD))$/,other:/^(?<code>(RRD-TAPE|TROLL))$/,kits:/^(?<code>(PROKIT|TKIT1))$/},cleaners:/^(?<code>2006)(?<type>FP)-(?<quantity>\d*)(?<unit>L)$/,joiners:/^(?<code>4[8|9]0[0|2])-(?<type>JOI)(?<color>B|G)$/,fixings:/^(?<code>(GUTTER|KERB))-(?<type>FIX-8)-(?<color>B|G)$/}},tM={membranes:{onePiece:{thickness_1_14:["FP-114-055","FP-114-105","FP-114-152","FP-114-205","FP-114-255","FP-114-305","FP-114-355","FP-114-405","FP-114-458","FP-114-505","FP-114-555","FP-114-610"],thickness_1_20:["FP-120-305","FP-120-458","FP-120-505","FP-120-610"],thickness_1_52:["FP-152-055","FP-152-105","FP-152-152","FP-152-205","FP-152-255","FP-152-305","FP-152-355","FP-152-405","FP-152-458","FP-152-505","FP-152-555","FP-152-610"]},fleeceBacked:{thickness_1_20:["FB-120-075-1M","FB-120-152-1M"]}},adhesives:{deck:{waterBased:{onePiece:["2001FP-025L","2001FP-050L","2001FP-100L","2001FP-150L"],fleeceBacked:["2001FB-050L","2001FB-075L","2001FB-100L","2001FB-150L"]},contactBonding:{onePiece:["2002FP-010L","2002FP-025L","2002FP-050L"],fleeceBacked:[]},pu:{onePiece:[],fleeceBacked:["2011-6KG"]}},primers:{onePiece:["2003FP-0250ML","2003FP-0500ML","2003FP-1000ML"],fleeceBacked:[]},sealants:{lapEdge:["2004FP"],waterBlock:["2005FP"],msPolymer:["2005MS"],blackSilicone:["2008"]}},tapes:{cured:["3002-06IN-1M","3002-12IN-1M"],uncured:["3003-05IN-1M","3003-09IN-1M","3003-12IN-1M","3003-18IN-1M"],seam:["3001-1M"],mechanical:["3004-06IN-1M"]},trims:{edges:{kerb:{cellular:{black:"4900-LENB"},solid:{black:"4800-LENB",grey:"4800-LENG"}},gutter:{cellular:{black:"4902-LENB"},solid:{black:"4802-LENB",grey:"4802-LENG"}}},wall:{standard:["4004-HALF","4004"],deep:["4004D"]},joins:{terminationBar:["4003"]}},corners:{kerb:{internal:{cellular:{black:"4900-INTB"},solid:{black:"4800-INTB",grey:"4800-INTG"}},external:{cellular:{black:"4900-EXTB"},solid:{black:"4800-EXTB",grey:"4800-EXTG"}}},gutter:{internal:{cellular:{black:"4902-INTB"},solid:{black:"4802-INTB",grey:"4802-INTG"}},external:{cellular:{black:"4902-EXTB"},solid:{black:"4802-EXTB",grey:"4802-EXTG"}}}},drains:{balcony:["5011-SET"],horizontal:["5006","5006-EXTENDER"],pipeSeal:["5003"],pipeBox:["5010-100-SINGLE","5010-150-SINGLE","5010-200-SINGLE"],internal:["5004-068MM","5004-100MM","5004-110MM"],top:["5005"],breather:["5008"]},extras:{tools:{rollers:{adhesive:["T001","T002","T003","T020"],rubber:["T004","T005","T006","TDUAL"]},brushes:["T007"],scissors:["T022","T023"],scrubbers:["SCRUB-HANDLE","SCRUB-PAD"],other:["RRD-TAPE","TROLL"],kits:["TKIT1","PROKIT"]},cleaners:["2006FP-1L"],joiners:{kerb:{cellular:{},solid:{}},gutter:{cellular:{},solid:{}}},fixings:{kerb:{black:"KERB-FIX-8-B",grey:"KERB-FIX-8-G"},gutter:{black:"GUTTER-FIX-8-B",grey:"GUTTER-FIX-8-G"}}}};[...Object.values(tM.membranes.onePiece.thickness_1_14),...Object.values(tM.membranes.onePiece.thickness_1_52),...Object.values(tM.membranes.fleeceBacked.thickness_1_20),...Object.values(tM.adhesives.deck.waterBased.onePiece),...Object.values(tM.adhesives.deck.waterBased.fleeceBacked),...Object.values(tM.adhesives.deck.contactBonding.onePiece),...Object.values(tM.adhesives.deck.contactBonding.fleeceBacked),...Object.values(tM.adhesives.deck.pu.onePiece),...Object.values(tM.adhesives.deck.pu.fleeceBacked),...Object.values(tM.adhesives.primers.onePiece),...Object.values(tM.adhesives.primers.fleeceBacked),...Object.values(tM.adhesives.sealants.lapEdge),...Object.values(tM.adhesives.sealants.waterBlock),...Object.values(tM.adhesives.sealants.msPolymer),...Object.values(tM.adhesives.sealants.blackSilicone),...Object.values(tM.tapes.cured),...Object.values(tM.tapes.uncured),...Object.values(tM.tapes.seam),...Object.values(tM.tapes.mechanical),tM.trims.edges.kerb.cellular.black,tM.trims.edges.kerb.solid.black,tM.trims.edges.kerb.solid.grey,tM.trims.edges.gutter.cellular.black,tM.trims.edges.gutter.solid.black,tM.trims.edges.gutter.solid.grey,...Object.values(tM.trims.wall.standard),...Object.values(tM.trims.wall.deep),...Object.values(tM.trims.joins.terminationBar),tM.corners.kerb.internal.cellular.black,tM.corners.kerb.internal.solid.black,tM.corners.kerb.internal.solid.grey,tM.corners.kerb.external.cellular.black,tM.corners.kerb.external.solid.black,tM.corners.kerb.external.solid.grey,tM.corners.gutter.internal.cellular.black,tM.corners.gutter.internal.solid.black,tM.corners.gutter.internal.solid.grey,tM.corners.gutter.external.cellular.black,tM.corners.gutter.external.solid.black,tM.corners.gutter.external.solid.grey,...Object.values(tM.drains.balcony),...Object.values(tM.drains.horizontal),...Object.values(tM.drains.pipeSeal),...Object.values(tM.drains.pipeBox),...Object.values(tM.drains.internal),...Object.values(tM.drains.top),...Object.values(tM.drains.breather),...Object.values(tM.extras.tools.rollers.adhesive),...Object.values(tM.extras.tools.rollers.rubber),...Object.values(tM.extras.tools.brushes),...Object.values(tM.extras.tools.scissors),...Object.values(tM.extras.tools.scrubbers),...Object.values(tM.extras.tools.other),...Object.values(tM.extras.tools.kits),...Object.values(tM.extras.cleaners),tM.extras.fixings.kerb.black,tM.extras.fixings.kerb.grey,tM.extras.fixings.gutter.black,tM.extras.fixings.gutter.grey];var tf=l("lCkOv");const tE={adhesiveCoverages:{deck:{waterBased:{default:4,min:3,max:4,client:4,unitType:tf.UNIT_TYPES.area},contactBonding:{default:2,min:1,max:2,client:2,unitType:tf.UNIT_TYPES.area},pu:{default:3.3,min:2.8,max:3.7,client:3.3,unitType:tf.UNIT_TYPES.area}},primer:{default:4,min:3.7,max:6.6,client:4,unitType:tf.UNIT_TYPES.area},sealants:{lapEdge:{default:18.2,min:18.2,max:18.2,client:18.2,unitType:tf.UNIT_TYPES.length},waterBlock:{default:9.1,min:9.1,max:9.1,client:9.1,unitType:tf.UNIT_TYPES.length},msPolymer:{default:1,min:1,max:1,client:1,unitType:tf.UNIT_TYPES.volume},blackSilicone:{default:18.2,min:18.2,max:18.2,client:18.2,unitType:tf.UNIT_TYPES.length}}},clientLimits:{roll:{width:1/0,weight:1/0,waste:{upper:1.125,lower:.125}},adhesive:{waste:{upper:2.5,lower:1}}},overhangs:{houseWall:{default:.15,min:.15,client:.15},parapetWall:{default:.15,min:.15,client:.15},gutterDrip:{default:.15,min:.15,client:.15},raisedKerb:{default:.15,min:.15,client:.15},pitchRoofOn:{default:.3,min:.3,client:.3},pitchRoofOff:{default:.15,min:.15,client:.15},feltJoin:{default:.085,min:.085,client:.085},seamJoin:{default:.085,min:.085,client:.085},buttJoin:{default:0,min:0,client:0},fleeceBackedJoin:{default:.085,min:.085,client:.085},none:{default:.15,min:.15,client:.15},default:{default:.15,min:.15,client:.15}},membrane:eY.onePiece_1_14,substrate:eX.osb,rubberJoin:e0.seam,contactBorderDepth:.15,tapes:{overlap:.075,primerBorder:.01,addSealant:!1},extraAllowances:{tape:1,adhesive:1},trims:{type:e1.cellular,color:e5.black,depth:e3.standard}},tC={rectangular:{deck:new tg({vertices:[new ti(0,0),new ti(500,0),new ti(500,500),new ti(0,500)],isClosed:!0}),id:"square",title:"Square",description:"Standard square or rectangular roof."},rightL:{deck:new tg({vertices:[new ti(0,0),new ti(300,0),new ti(300,300),new ti(600,300),new ti(600,600),new ti(0,600)],isClosed:!0}),id:"l-shaped",title:"L Shaped",description:'Right "L" shaped roof.'},standardT:{deck:new tg({vertices:[new ti(0,0),new ti(750,0),new ti(750,250),new ti(500,250),new ti(500,500),new ti(250,500),new ti(250,250),new ti(0,250)],isClosed:!0}),id:"t-shaped",title:"T Shaped",description:'Downward "T" shaped roof.'},standardS:{deck:new tg({vertices:[new ti(250,0),new ti(750,0),new ti(750,250),new ti(500,250),new ti(500,500),new ti(0,500),new ti(0,250),new ti(250,250)],isClosed:!0}),id:"s-shaped",title:"S Shaped",description:'Slanted "S" shaped roof.'},standardU:{deck:new tg({vertices:[new ti(0,0),new ti(225,0),new ti(225,225),new ti(450,225),new ti(450,0),new ti(675,0),new ti(675,450),new ti(0,450)],isClosed:!0}),id:"u-shaped",title:"U Shaped",description:'Upward "U" shaped roof.'}};l("9fBFD");class tT{#G=new Map;#z;constructor(e=tE){this.#z=e}addProduct(e,t=e.sku){let i,r;if(!(e.stock<(e.stockLimit||0))&&((r=t.match(tS.membranes))?i=tw:(r=t.match(tS.adhesives.deck.waterBased))||(r=t.match(tS.adhesives.deck.contactBonding))||(r=t.match(tS.adhesives.deck.pu))||(r=t.match(tS.adhesives.primer))||(r=t.match(tS.adhesives.sealants))?i=tx:(r=t.match(tS.tapes.seam))||(r=t.match(tS.tapes.cured))||(r=t.match(tS.tapes.uncured))||(r=t.match(tS.tapes.mechanical))?i=t_:(r=t.match(tS.trims.edges))||(r=t.match(tS.trims.wall))||(r=t.match(tS.trims.join))?i=tk:(r=t.match(tS.corners))?i=ty:(r=t.match(tS.drains.pipeSeal))||(r=t.match(tS.drains.pipeBox))||(r=t.match(tS.drains.internal))||(r=t.match(tS.drains.horizontal))||(r=t.match(tS.drains.top))||(r=t.match(tS.drains.balcony))||(r=t.match(tS.drains.breather))?i=tb:((r=t.match(tS.extras.tools.adhesiveRollers))||(r=t.match(tS.extras.tools.rubberRollers))||(r=t.match(tS.extras.tools.brushes))||(r=t.match(tS.extras.tools.scissors))||(r=t.match(tS.extras.tools.scrubbers))||(r=t.match(tS.extras.tools.other))||(r=t.match(tS.extras.tools.kits))||(r=t.match(tS.extras.cleaners))||(r=t.match(tS.extras.joiners))||(r=t.match(tS.extras.fixings)))&&(i=tv),i&&r)){let t=new i(e,r);this.#G.set(e.sku,t)}}getProduct(e){return this.#G.get(e)}getMembranes(){let e=[];for(let[,t]of this.#G)t instanceof tw&&t.type===this.#z.membrane.type&&t.thickness===this.#z.membrane.thickness&&e.push(t);return e}getAdhesives(e){let{membrane:{type:t}}=this.#z,i=Object.values(eK.sealants),r=i.includes(e),s=r||e===eK.deck.contactBonding||e===eK.deck.pu||e===eK.primer,n=[];for(let[,i]of this.#G)i instanceof tx&&i.type===e&&(s||i.membraneType===t)&&n.push(i);return n}getTapes(e){let t=[];for(let[,i]of this.#G)i instanceof t_&&i.type===e&&t.push(i);return t}getTrims(e){let{trims:{type:t,color:i,depth:r}}=this.#z,s=[];for(let[,n]of this.#G)if(n instanceof tk){if(e===e$.parapetWall){if(n.edgeType!==e$.houseWall)continue}else if(n.edgeType!==e)continue;switch(e){case e$.raisedKerb:case e$.gutterDrip:n.type===t&&n.color===i&&s.push(n);break;case e$.houseWall:case e$.parapetWall:n.depth===r&&s.push(n);break;case e$.feltJoin:s.push(n)}}return s}getCorners(e,t){let i=[];for(let[,r]of this.#G)r instanceof ty&&r.edgeType===e&&r.cornerAngle===t&&r.type===this.#z.trims.type&&r.color===this.#z.trims.color&&i.push(r);return i}getDrains(e){let t=[];for(let[,i]of this.#G)i instanceof tb&&i.type===e&&t.push(i);return t}getExtras(e){let t=[];for(let[,i]of this.#G)i instanceof tv&&i.type===e&&t.push(i);return t}updateRunningStockQuantities(e){for(let{sku:t,quantity:i}of e.reducedLineItems){let e=this.getProduct(t);e&&(e.runningStock-=i)}}resetRunningStockQuantities(){for(let[,e]of this.#G)e.resetRunningStockQuantity()}getQuantityRectifiedBom(e){let t=new Map,i=[];for(let i of e.uniqueLineItems){let{sku:e,quantity:r}=this.#j(i),s=(t.get(e)||0)+r;t.set(e,s)}for(let t of e.nonUniqueLineItems)t=this.#j(t),i.push(t);return new tP({uniqueLineItems:t,nonUniqueLineItems:i})}canFulfillBom(e){for(let{sku:t,quantity:i}of e.reducedLineItems){let e=this.getProduct(t);if(!e||i>e.stock-e.stockLimit)return!1}return!0}getBomPrice(e,{includeVat:t=!1,vatRate:i=.2}={}){let r=0;for(let{sku:t,quantity:i}of e.lineItems){let e=this.getProduct(t);e&&(r+=e.price*i)}return t?parseFloat((r*(1+i)).toFixed(2)):parseFloat(r.toFixed(2))}#j(e){let{quantity:t}=e,i=this.getProduct(e.sku);if(i){let{minimumOrder:r,minimumFraction:s}=i,n=s>=1?0:s<=0?1/0:Math.ceil(-Math.log10(s)),a=e.quantity+s/2;a-=e.quantity/Number.MAX_SAFE_INTEGER;let o=isFinite(n)?parseFloat(a.toFixed(n)):e.quantity;t=Math.max(o,r)}return{...e,quantity:t}}}l("iNpSr");class tI{#W;#V;#q={waterBased:0,contactBonding:0,pu:0,primer:0,lapEdge:0,waterBlock:0,msPolymer:0,blackSilicone:0};constructor(e,t){this.#W=e,this.#V=t}addAdhesive(e,t){this.#q[e]+=t}#H(e){let{adhesiveCoverages:{deck:t,sealants:i,primer:r}}=this.#V,s={...t,...i,primer:r};return s[e].client}#X(e,t){t*=this.#V.extraAllowances.adhesive;let i=this.#Y(e,t),r=i.head;if(!r)return;let s=[[{product:r.value,quantity:Math.ceil(t/r.value.quantity)}]];for(;r=r.next;){let e=[...s[0]];e[0]={product:e[0].product,quantity:e[0].quantity>0?e[0].quantity-1:0};let i=e.reduce((e,t)=>e+t.product.quantity*t.quantity,0),{value:n}=r,a=t-i,o=Math.ceil(a/n.quantity);e.unshift({product:n,quantity:o}),s.unshift(e)}let n=t+this.#V.clientLimits.adhesive.waste.lower;return s.sort((e,t)=>{let{price:i,volume:r,containerCount:s}=this.#$(e),{price:a,volume:o,containerCount:l}=this.#$(t);return r<n&&o<n?s-l||i-a:i-a||s-l}),s.at(0)?.filter(e=>e.quantity>0)}#$(e){return e.reduce((e,t)=>{let{product:{price:i,quantity:r},quantity:s}=t;return{price:e.price+i*s,volume:e.volume+r*s,containerCount:e.containerCount+s}},{price:0,volume:0,containerCount:0})}#Y(e,t){return new e7(this.#W.getAdhesives(e).filter(e=>e.stock*e.quantity>=t).sort((e,t)=>t.quantity-e.quantity))}get bom(){let e=new tP,t=Object.keys(this.#q);for(let i of t){let t=this.#q[i]/this.#H(i);if(!t)continue;let r=this.#X(i,t);if(!r)throw Error();for(let{product:t,quantity:i}of r)e.addLineItem(t,i)}return this.#W.updateRunningStockQuantities(e),e}}class tB{#W;#V;#K;#J=new tP;constructor(e,t,i){this.#W=e,this.#V=t,this.#K=i}addTape(e,t,{width:i,rollWidth:r}={}){r??=t===eZ.uncured?.225:t===eZ.seam?.075:.15;let s=this.#W.getTapes(t).sort((e,t)=>e.width-t.width||e.quantity-t.quantity).filter(e=>!0).find((e,t,i)=>t===i.length-1||e.width>=r);if(!s)throw Error();let{tapes:{overlap:n,primerBorder:a},extraAllowances:{tape:o}}=this.#V;i??=s.width;let l=0;for(;l<(i+(l-1)*n)/s.width;)l++;let h=(i+a)*(e+a)+(l-1)*(n+a)*(e+a);t===eZ.uncured&&(h/=2),this.#K.addAdhesive(eK.primer,h),this.#V.tapes.addSealant&&this.#K.addAdhesive(eK.sealants.lapEdge,2*i+2*e);let d=e*o*l/s.quantity;this.#J.addLineItem(s,d),s.runningStock-=d}addPatch(e){let{tapes:{overlap:t},overhangs:{default:{client:i}}}=this.#V,r=e===eQ.extraSmall?2*t:e===eQ.small?2*t+i:e===eQ.medium?2*t+2*i:e===eQ.large?2*t+3*i:2*t+4*i;this.addTape(r,eZ.uncured)}get bom(){return this.#J}}class tL{#W;#V;#Z;#J=new tP;constructor(e,t,i){this.#W=e,this.#V=t,this.#Z=i}addCorner(e,t,i){switch(e){case e$.houseWall:case e$.parapetWall:case e$.pitchRoofOn:return this.#Q(e,t,i);case e$.gutterDrip:case e$.raisedKerb:return this.#ee(e,t,i);default:return this.#et(t)}}#Q(e,t,i){switch(e){case e$.houseWall:case e$.parapetWall:switch(t){case e$.houseWall:case e$.parapetWall:return this.#ei(i);default:return this.#Z.addPatch(eQ.medium)}default:return this.#Z.addPatch(eQ.medium)}}#ee(e,t,i){switch(e){case e$.gutterDrip:switch(t){case e$.gutterDrip:return this.#er(i);case e$.raisedKerb:return this.#es(i);case e$.houseWall:case e$.parapetWall:case e$.pitchRoofOn:return this.#Z.addPatch(eQ.medium);default:return null}case e$.raisedKerb:switch(t){case e$.gutterDrip:case e$.raisedKerb:return this.#es(i);case e$.houseWall:case e$.parapetWall:case e$.pitchRoofOn:return this.#Z.addPatch(eQ.medium);default:return null}default:return null}}#et(e){switch(e){case e$.houseWall:case e$.parapetWall:case e$.pitchRoofOn:return this.#Z.addPatch(eQ.medium);default:return null}}#ei(e){e===Math.PI/2?this.#Z.addPatch(eQ.extraSmall):this.#Z.addPatch(eQ.medium)}#er(e){if(e===Math.PI)return this.#Z.addPatch(eQ.medium);let t=this.#W.getCorners(e$.gutterDrip,e)[0];if(!t)throw Error();this.#J.addLineItem(t,1)}#es(e){if(e===Math.PI)return this.#Z.addPatch(eQ.medium);let t=this.#W.getCorners(e$.raisedKerb,e)[0];if(!t)throw Error();this.#J.addLineItem(t,1)}get bom(){return this.#J}}class tR{#W;#V;#Z;#J=new tP;constructor(e,t,i){this.#W=e,this.#V=t,this.#Z=i}addDeckZone(e,t,{membraneCount:i=1,canFlip:r=!0}={}){let s=this.#V.rubberJoin===e0.seam?eZ.seam:eZ.cured,n=this.#en(e,t,{membraneCount:i,canFlip:r}).at(0);if(!n)throw Error("Cannot cover roof...");for(let e of n.membranes)this.#J.addLineItem(e,n.depth),e.runningStock-=n.depth;if(n.seams.length>0&&this.#V.membrane.type!==eH.fleeceBacked){let e=n.seams.length;this.#Z.addTape(e,s)}}#en(e,t,{membraneCount:i=1,flipped:r=!1,canFlip:s=!0,isRoot:n=!0}={}){let a=[];s&&!r&&e!==t&&a.push(...this.#en(t,e,{membraneCount:i,flipped:!0,canFlip:!1,isRoot:!1}));let o=this.#ea(e,i,"deckToMembrane"),l=Math.ceil(10*t)/10,h=this.#eo(l);return h.head?(h.head.value.width*i<o?a.push(...this.#en(e,t,{membraneCount:++i,flipped:r,canFlip:!1,isRoot:!1})):(a=this.#el(h.head,o,l,i,r),(a=this.#eh(a)).length||a.push(...this.#en(e,t,{membraneCount:++i,flipped:r,canFlip:!1,isRoot:!1}))),n?this.#ed(a):a):[]}#el(e,t,i,r,s){let n=this.#ec(Array.from({length:r},()=>e),t,i,s),a=new Set,o=[n],l=0;for(;l<o.length;){let e=o.at(l++);if(e)for(let[r,n]of e.nodes.entries()){let h=n.next;if(!h)continue;let d=[...e.nodes];d.splice(r,1,h);let c=this.#ec(d,t,i,s),{width:{membrane:u}}=c;u>=t&&!a.has(c.id)&&(o.splice(l,0,c),a.add(c.id))}}return o}#ec(e,t,i,r){let s=e.map(e=>e.value.width).sort((e,t)=>t-e).toString(),n=e.reduce((e,t)=>e+t.value.width,0),a=this.#ea(n,e.length,"membraneToDeck"),o=n-t,{upper:l,lower:h}=this.#V.clientLimits.roll.waste,d=e.map(e=>e.value),c={count:d.length-1,length:i*(d.length-1)},u=d.map(e=>e.width),p=new tP;for(let e of d)p.addLineItem(e,i);let g=tp(u),f=tp(this.#W.getMembranes().map(e=>d.includes(e)?e.stock-i:e.stock));return{id:s,flipped:r,width:{membrane:n,deck:a,waste:o},depth:i,variance:{option:g,stock:f},wasteScore:o<h?0:o>l?1:(o-h)/(l-h),nodes:e,membranes:d,seams:c,widths:u,bom:p}}#eo(e){return new e7(this.#W.getMembranes().filter(t=>{let i=t.weight;return t.runningStock>=e&&t.width<=this.#V.clientLimits.roll.width&&i*e<=this.#V.clientLimits.roll.weight}).sort((e,t)=>t.width-e.width))}#eh(e){return e.filter(e=>{for(let t of e.membranes)if(t.runningStock<e.depth)return!1;return!0})}#ed(e){let t=[...e].sort((e,t)=>e.variance.stock-t.variance.stock),i=[...e].sort((e,t)=>e.variance.option-t.variance.option);return e.sort((e,r)=>e.membranes.length-r.membranes.length||e.wasteScore-r.wasteScore||t.indexOf(e)-t.indexOf(r)||i.indexOf(e)-i.indexOf(r)||(e.flipped?1:0)-(r.flipped?1:0))}#ea(e,t,i){let r=this.#V.membrane.type===eH.onePiece?this.#V.overhangs[this.#V.rubberJoin].client:this.#V.overhangs.fleeceBackedJoin.client;return"deckToMembrane"===i?e+r*(t-1):e-r*(t-1)}get bom(){return this.#J}}class tO{#W;#V;#K;#Z;#J=new tP;#eu={houseWall:[],feltJoin:[],raisedKerb:[],gutterDrip:[]};constructor(e,t,i,r){this.#W=e,this.#V=t,this.#K=i,this.#Z=r}addTrim(e,t){let i=e===e$.pitchRoofOff||e===e$.seamJoin||e===e$.buttJoin;if(i){let{membrane:{type:e},rubberJoin:i}=this.#V,r=e===eH.fleeceBacked||i===e0.butt,s=r?eZ.cured:eZ.seam;this.#Z.addTape(t,s);return}let r=e===e$.houseWall||e===e$.parapetWall||e===e$.gutterDrip||e===e$.raisedKerb||e===e$.feltJoin;if(!r)return;let s=this.#W.getTrims(e).find((e,i,r)=>i===r.length-1||e.quantity>=t);if(!s)throw Error();let n=Math.ceil(t/s.quantity);switch(this.#J.addLineItem(s,n),e){case e$.houseWall:case e$.parapetWall:this.#K.addAdhesive(eK.sealants.blackSilicone,t);break;case e$.feltJoin:this.#K.addAdhesive(eK.sealants.lapEdge,t),this.#K.addAdhesive(eK.sealants.waterBlock,t)}}get bom(){return this.#J}}class tF{config=tE;stock=new tT(this.config);details={rooflights:[],drains:[],outlets:[],pipes:[]};constructor(e,t){this.deck=e,this.stock=t}addRooflight(){}addDrain(){}addExtra(){}get bom(){if(this.stock.resetRunningStockQuantities(),this.config.substrate===eX.felt&&this.config.membrane.type!==eH.fleeceBacked)throw Error("Incorrect membrane type for substrate");let e=new tP,{stock:t,config:i}=this,r=new tI(t,i),s=new tB(t,i,r),n=new tR(t,i,s),a=new tO(t,i,r,s),o=new tL(t,i,s),l=this.deck.copy();l.dissolveVertices();let h=l.copy();this.config.rubberJoin,e0.seam;let d=this.config.rubberJoin===e0.seam?eZ.seam:eZ.cured,c=0,u=l.partitionPolygon().map(e=>{let{width:t,height:i}=e;for(let[r,s]of e.edges.array.entries()){c+=this.deck.getEdgeNonIntersectingLength(s)/100;let e=100*this.deck.getEdgeOverhang(s,this.config);r%2?t+=e:i+=e}return{width:t,depth:i}});for(let e of u){let{width:t,depth:i}=e,r=this.config.membrane.type===eH.onePiece;n.addDeckZone(t/100,i/100,{canFlip:r})}c>0&&s.addTape(c/2,d);let p=h.edges.array.map(e=>100*this.deck.getEdgeOverhang(e,this.config)),g=h.getBorderArea(100*this.config.contactBorderDepth,"internal")/1e4,f=h.getBorderArea(p,"external")/1e4,m=this.deck.area/1e4-g;for(let{value:e}of(r.addAdhesive(eK.deck.contactBonding,g+f),i.substrate===eX.felt?r.addAdhesive(eK.deck.pu,m):i.substrate===eX.grp||i.substrate===eX.metal||this.deck.area>=1e6?r.addAdhesive(eK.deck.contactBonding,m):r.addAdhesive(eK.deck.waterBased,m),this.deck.edges)){let t=this.deck.edges.nodeWithValue(e);if(!t)throw Error();let i=t.next?.value;if(!i)throw Error();let r=this.deck.getEdgeType(e),s=this.deck.getEdgeType(i),n=this.deck.internalAngleAtVertex(i.start);a.addTrim(r,e.magnitude/100),o.addCorner(r,s,n)}return(e=this.stock.getQuantityRectifiedBom(tP.join(e,r.bom,s.bom,n.bom,a.bom,o.bom))).lineItems}}class tD extends HTMLElement{#ep;#eg="false"!==this.dataset.loading;#ef={keyframes:[{opacity:1},{opacity:0}],options:{easing:"ease-out",duration:300},reverse:{direction:"reverse"}};constructor(e){super(),this.#ep=e}connectedCallback(){this.dataset.loading?.match(/^true$|^false$/)||(this.dataset.loading=(!0).toString());let e=document.createElement("div");e.classList.add("loading-container");let t=document.createElement("p");t.innerText=this.dataset.text||"Loading...";let i=document.createElement("div");i.classList.add("loading-bar");let r=document.createElement("div");r.classList.add("loading-bounce"),i.appendChild(r),e.append(t,i);let s=document.createElement("div");s.classList.add("content-container"),this.classList.add("stateful-loading-container"),this.append(e,s),this.#ep(this)}load(e){return new Promise(t=>{let{keyframes:i,options:r,reverse:s}=this.#ef,n=()=>{this.contentContainer.replaceWith(e),this.contentContainer.animate(i,{...r,...s}).addEventListener("finish",()=>{t({})})};this.loading?this.loadingContainer.animate(i,r).addEventListener("finish",()=>{this.loading=!1,n()}):this.contentContainer.animate(i,r).addEventListener("finish",n)})}unload(){return new Promise(e=>{this.loading&&e({});let{keyframes:t,options:i,reverse:r}=this.#ef;this.contentContainer.animate(t,i).addEventListener("finish",()=>{this.loading=!0,this.loadingContainer.animate(t,{...i,...r}).addEventListener("finish",()=>{e({})})})})}get loading(){return this.#eg}set loading(e){this.dataset.loading=e.toString(),this.#eg=e}get loadingContainer(){return this.getElementsByClassName("loading-container")[0]}get contentContainer(){return this.getElementsByClassName("content-container")[0]}static contentContainer(){let e=document.createElement("div");return e.classList.add("content-container"),e}}const tN={epdmCalculator:null,stock:new tT,deckOption:null,deckEditor:{deck:null,app:new _,container:null,anchor:new ti,get targetAnchor(){if(!this.deck)return new ti;let{width:e,height:t,anchor:{x:i,y:r}}=this.deck.boundingBox,s=this.targetScale,n=new ti((this.width-e*s)/2-i*s,(this.height-t*s)/2-r*s);return n},get width(){return this.app.renderer?.width||NaN},get height(){return this.app.renderer?.height||NaN},scale:NaN,get targetScale(){if(!this.deck)return NaN;let{width:e,height:t}=this.deck.boundingBox,i=Math.min(this.width/e,this.height/t);return .75*i},get pixelSize(){return 10/this.scale},redraw:()=>{},render:()=>{},rerender:()=>{},selectedEdge:null,renderOptions:{}},spritesheet:null,steps:[eG,ez,ej,eq],currentStep:-1},tU=(e,t,i=[])=>{let r=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(e=>{r.setAttribute(e,String(t[e]))}),i.length&&i.forEach(e=>{let t=tU(...e);r.appendChild(t)}),r};var tG=([e,t,i])=>tU(e,t,i);const tz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},tj=["svg",tz,[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]]],tW=["svg",tz,[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]]];var v=l("2VOjZ"),eE=l("kJqVK"),eM=l("aSHqW");const tV=(e,{fillColor:t=12566463}={})=>{let i=new v.Container,r=new eE.Graphics;return i.addChild(r),{container:i,render:()=>{let{deckEditor:{deck:i,scale:s}}=e;if(!i)throw Error();let n=i.vertices.array.map(e=>new eM.Point(e.x*s,e.y*s));r.clear().poly(n).fill(t)}}};var v=l("2VOjZ"),eE=l("kJqVK"),eC=l("53uEv"),v=l("2VOjZ"),eE=l("kJqVK");const tq=(e,t,{edgeOffset:i=16,endOffset:r=16,textOffset:s=2,fontSize:n=16,fontColor:a=12566463,crossBarWidth:o=16}={})=>{let l=new v.Container,h=new eE.Graphics,d=new eE.Graphics,c=new eO({style:{fontSize:n,fill:a}});return l.addChild(h,d,c),{container:l,render:()=>{let{deckEditor:{deck:n,scale:a}}=t;if(!n)throw Error();let{vertexOrientation:u}=n,p=u*i,g=e.magnitude*a;h.clear().moveTo(r,0).lineTo(g-r,0).stroke({color:12566463,alignment:p});let f=o/2-p,m=-(p+o/2);d.clear().moveTo(r,f).lineTo(r,m).stroke(12566463).moveTo(g-r,f).lineTo(g-r,m).stroke(12566463),c.text=e.magnitude/100<1?`${(e.magnitude/100).toPrecision(2)}m`:`${(e.magnitude/100).toPrecision(3)}m`,l.rotation=e.direction,l.x=e.start.x*a,l.y=e.start.y*a,c.x=r+s,c.y=1===u?-(i+c.height):i,(1===u&&l.rotation===Math.PI||-1===u&&0!==l.rotation)&&(c.rotation=Math.PI,c.x+=c.width,c.y+=c.height)}}},tH=(e,t,{start:i=0,end:r=1,duration:s=600,tweenStart:n=Date.now()}={})=>{let a=Date.now();a>n+s?(e(r),t.deckEditor.rerender()):window.requestAnimationFrame(()=>{let o=(a-n)/s;e(i+(r-i)*(o*(2-o))),tH(e,t,{start:i,end:r,duration:s,tweenStart:n})}),t.deckEditor.render()},tX=(e,t,i)=>{let r=new v.Container,s=new eE.Graphics,n=new eE.Graphics,a=new eC.Sprite(i.spritesheet.none),o=new eE.Graphics,{container:l,render:h}=tq(e,i);r.addChild(s,l,a,o,n);let d=a.width,c=Math.min(.1*i.deckEditor.width,50);a.scale=1*(c/d);let u=({width:t=2}={})=>{let{deckEditor:{scale:r}}=i;g===e&&(t=5),s.clear().moveTo(e.start.x*r,e.start.y*r).lineTo(e.end.x*r,e.end.y*r).stroke({color:2171169,width:t,cap:"square"});let l=e.start.add(e.scalarMultiply(.5));o.clear().roundRect(l.x*r-a.width/2,l.y*r-a.height/2,a.width,a.height,10).fill(2171169),a.x=l.x*r-a.width/2,a.y=l.y*r-a.height/2,a.mask=o;let d=i.deckOption.deck.getEdgeType(e);d===e$.parapetWall&&(d=e$.houseWall),(d===e$.buttJoin||d===e$.seamJoin)&&(d="rubberJoin"),a.texture=i.spritesheet[d];let{x:c,y:u}=a.getBounds(),p=e.magnitude/2*r,f=e.direction%Math.PI?a.height/2:a.width/2;n.clear().rotateTransform(e.direction).translateTransform(e.start.x*r,e.start.y*r).rect(0,-25,p-f,50).rect(p+f,-25,p-f,50).fill({color:0,alpha:.1}),h()},p=!1,g=null;return o.eventMode="static",o.cursor="pointer",o.on("pointerup",()=>{let r=tY(i,i.deckEditor.deck,e);t.nextSibling?.replaceChildren(r),r.classList.remove("closed")}),n.eventMode="static",n.cursor="grab",n.on("pointerdown",s=>{i.deckEditor.dragging=!0,p=!0,r.cursor="grabbing";let{x:n,y:a}=t.getBoundingClientRect();s.x,s.y,g=e}),n.on("pointermove",r=>{let{deckEditor:{scale:s}}=i;if(u({width:5}),!p)return;let{x:n,y:a}=t.getBoundingClientRect(),o={x:r.x-n-i.deckEditor.anchor.x,y:r.y-a-i.deckEditor.anchor.y};i.deckEditor.deck?.edges.size;try{i.deckOption.deck.moveEdge(e,e.direction%Math.PI?new ti(Math.round(o.x/s),e.start.y):new ti(e.start.x,Math.round(o.y/s)),{dissolveVertices:!1})}catch{}i.deckEditor.render()}),n.on("pointerleave",()=>{i.deckEditor.dragging=!1,p=!1,r.cursor="grab",g=null;let{deckEditor:{scale:e,targetScale:t,anchor:s,targetAnchor:n}}=i,a=t-e,o=n.subtract(s);tH(t=>{i.deckEditor.anchor=s.add(o.scalarMultiply(t)),i.deckEditor.scale=e+a*t},i),u()}),n.on("pointerup",()=>{i.deckEditor.dragging=!1,p=!1,r.cursor="grab",g=null;let{deckEditor:{scale:e,targetScale:t,anchor:s,targetAnchor:n}}=i,a=t-e,o=n.subtract(s);tH(t=>{i.deckEditor.anchor=s.add(o.scalarMultiply(t)),i.deckEditor.scale=e+a*t},i),u()}),{container:r,render:u}},tY=(e,t,i)=>{let r=document.createElement("div");r.classList.add("edge-editor","closed"),r.dataset.edgeId=`${t.edges.indexOfValue(i)}`;let s=document.createElement("select");for(let e of Object.values(e$)){let r=document.createElement("option");r.value=e,r.innerText=e,t.getEdgeType(i)===e&&(r.selected=!0),s.append(r)}s.addEventListener("change",r=>{t.setEdgeType(i,r.target.value),e.deckEditor.render()});let n=document.createElement("input");n.type="number",n.min="0",n.step="0.01",n.value=`${i.magnitude/100}`,n.addEventListener("change",r=>{let s=i.magnitude,a=Math.round(100*r.target.value),o=a-s;n.value=`${a/100}`,tH(r=>{t.resizeEdge(i,s+o*r),e.deckEditor.scale=e.deckEditor.targetScale,e.deckEditor.anchor=e.deckEditor.targetAnchor},e)});let a=document.createElement("button");a.innerText="Split",a.addEventListener("click",()=>{e.deckEditor.deck?.splitEdge(i),e.deckEditor.rerender()});let o=document.createElement("button");return o.innerText="Close",o.addEventListener("click",()=>{r.classList.add("closed")}),r.append(s,n,a,o),r};var v=l("2VOjZ");const t$=(e,t)=>{let{deckEditor:{deck:i}}=t;if(!i)throw Error();let r=new v.Container,s=[tV(t),...i.edges.array.map(i=>tX(i,e,t))];for(let e of s)r.addChild(e.container);return{container:r,render:()=>{let{deckEditor:{anchor:e}}=t;for(let t of s)t.container.x=e.x,t.container.y=e.y,t.render()}}},tK=(e,t)=>{t.deckEditor.anchor=t.deckEditor.targetAnchor,t.deckEditor.scale=t.deckEditor.targetScale;let{deckEditor:{app:i,container:r}}=t,{container:s,render:n}=t$(e,t);r?.destroy({children:!0}),i.stage.removeChildren(),i.stage.addChild(s),n(),t.deckEditor.container=s,t.deckEditor.render=n,t.deckEditor.rerender=()=>{tK(e,t)}},tJ=(e,t)=>{let{deckEditor:{app:i}}=t,r=t.deckOption?.deck;if(!r)throw Error();t.deckEditor.deck=r;let s=tD.contentContainer(),n=document.getElementById("editor-description");s.append(...n.content.cloneNode(!0).childNodes);let a=document.createElement("div"),o=e=>(e.setAttribute("width","20"),e.setAttribute("height","20"),e.setAttribute("viewBox","-6 -6 30 30"),e),l=tG(tW),h=o(tG(tW)),d=o(tG(tj));h.append(d),l.append(h);let c=document.createElement("button");c.append(l),c.addEventListener("click",()=>{r.addRooflight(new ti(50,50),100,100)});let u=document.createElement("div");u.classList.add("edg");let p=document.createElement("div");p.classList.add("deck-editor"),s.append(a,p,u),e.load(s).then(async()=>{if(!i.renderer){let{width:e,height:t}=p.getBoundingClientRect();await i.init({width:e,height:t,resolution:window.devicePixelRatio,autoDensity:!0,backgroundAlpha:0})}tK(p,t),p.append(i.canvas),p.animate([{opacity:0},{opacity:1}],{easing:"ease-out",duration:300})})};var eM=l("aSHqW"),eE=l("kJqVK"),eS=l("7Qkzy");const tZ=async(e,t)=>{let i=tD.contentContainer(),r=document.getElementById("selector-description");i.append(...r.content.cloneNode(!0).childNodes);let s=[tC.rectangular,tC.rightL,tC.standardT,tC.standardS,tC.standardU];for(let e of(s.sort((e,t)=>e.deck.edges.size-t.deck.edges.size),s)){let r=document.createElement("div");r.classList.add("deck-card"),r.dataset.deckId=e.title;let s=document.createElement("div"),n=document.createElement("h4");n.innerText=e.title;let a=document.createElement("p");a.innerText=`Description: ${e.description}`;let o=document.createElement("p");o.innerText=`Edges: ${e.deck.edges.size}`;let l=document.createElement("img");l.src=await tQ(e.deck),r.addEventListener("click",()=>{t.deckOption=e}),s.append(n,a,o),r.append(s,l),i.append(r)}i.addEventListener("click",e=>{let r=i.querySelectorAll(".deck-card");for(let e=0;e<r.length;e++){let i=r[e];i.dataset.deckId===t.deckOption?.title?i.classList.add("selected"):i.classList.remove("selected")}}),e.load(i)},tQ=async(e,t=1028,i=.5)=>{let r=new _;await r.init({width:t,height:t,resolution:window.devicePixelRatio,autoDensity:!0,backgroundAlpha:0});let{width:s,height:n}=e.boundingBox,a=t/Math.max(s,n),o=e.vertices.array.map(e=>new eM.Point(e.x*a,e.y*a)),l=new(0,eE.Graphics)().rotateTransform(Math.PI/4).transform(new eS.Matrix(1,-i)).poly(o).fill(12566463).stroke({color:2171169,width:16});for(let e=1;e<32;e+=.125){let t=new(0,eE.Graphics)().rotateTransform(Math.PI/4).transform(new eS.Matrix(1,-i,0,1,e,e)).poly(o).fill(2171169).stroke({color:2171169,width:16});r.stage.addChild(t)}r.stage.addChild(l);let{minX:h,minY:d,maxX:c,maxY:u}=r.stage.getBounds(),p=t/Math.max(c-h,u-d);return r.stage.updateTransform({scaleX:p,scaleY:p}),r.stage.updateTransform({x:-r.stage.getBounds().minX+(1024-(r.stage.getBounds().maxX-r.stage.getBounds().minX))/2,y:-r.stage.getBounds().minY+(1024-(r.stage.getBounds().maxY-r.stage.getBounds().minY))/2}),r.render(),r.stop(),r.canvas.toDataURL()},t0=(e,t)=>{let i=tD.contentContainer(),r=document.createElement("p");for(let e of(r.innerText=`
Select membrane.
`,i.append(r),Object.values(eY))){let r=document.createElement("div");r.classList.add("deck-card"),r.dataset.membrane=`${e.type}_${e.thickness}`;let s=document.createElement("div"),n=document.createElement("h3");n.innerText=e.type;let a=document.createElement("p");a.innerText=e.thickness.toString(),s.append(n,a),r.append(s),t.epdmCalculator.config.membrane=e;try{t.epdmCalculator.bom,r.addEventListener("click",()=>{t.epdmCalculator.config.membrane=e})}catch(e){console.log(e),r.classList.add("inactive")}i.append(r)}i.addEventListener("click",()=>{let e=i.querySelectorAll(".deck-card");for(let i=0;i<e.length;i++){let r=e[i],s=t.epdmCalculator.config.membrane;r.dataset.membrane===`${s.type}_${s.thickness}`?r.classList.add("selected"):r.classList.remove("selected")}}),e.load(i)},t1=(e,t)=>{let i=tD.contentContainer(),r=document.getElementById("substrate-description");i.append(...r.content.cloneNode(!0).childNodes);let{stock:s,deckEditor:{deck:n}}=t;if(!n)throw Error();for(let e of(t.epdmCalculator=new tF(n,s),Object.values(eX))){let r=document.createElement("div");r.classList.add("deck-card"),r.dataset.substrate=e;let s=document.createElement("div"),n=document.createElement("h4");n.innerText=e;let a=document.createElement("p");a.innerText="add a substrate description here",s.append(n,a),r.append(s),r.addEventListener("click",()=>{t.epdmCalculator.config.substrate=e,e===eX.felt&&(t.epdmCalculator.config.membrane=eY.fleeceBacked_1_20)}),i.append(r)}i.addEventListener("click",()=>{let e=i.querySelectorAll(".deck-card");for(let i=0;i<e.length;i++){let r=e[i];r.dataset.substrate===t.epdmCalculator.config.substrate?r.classList.add("selected"):r.classList.remove("selected")}}),e.load(i)},t2=(e,t)=>{let i=tD.contentContainer(),r=document.createElement("p");for(let e of(r.innerText=`
Select your desired trim colour.
`,i.append(r),Object.values(e5))){let r=document.createElement("div");r.classList.add("deck-card"),r.dataset.trimColor=e;let s=document.createElement("div"),n=document.createElement("h3");n.innerText=e;let a=document.createElement("p");a.innerText="add a trim description here",s.append(n,a),r.append(s),t.epdmCalculator.config.trims.color=e;try{t.epdmCalculator.bom,r.addEventListener("click",()=>{t.epdmCalculator.config.trims.color=e})}catch(e){console.log(e),r.classList.add("inactive")}i.append(r)}i.addEventListener("click",()=>{let e=i.querySelectorAll(".deck-card");for(let i=0;i<e.length;i++){let r=e[i];r.dataset.trimColor===t.epdmCalculator.config.trims.color?r.classList.add("selected"):r.classList.remove("selected")}}),e.load(i)},t5=e=>{let{epdmCalculator:t}=e;if(!t)throw Error();let i=t.bom.map(({sku:t,quantity:i})=>{let r=e.stock.getProduct(t);if(!r)throw Error();return{product:r,quantity:i}});return{membranes:t3(i),pvcTrims:t4(i),metalTrims:t6(i),tapes:t8(i),deckAdhesives:t7(i),primers:t9(i),sealants:ie(i),drains:it(i),extras:ii(i)}},t3=e=>e.filter(({product:e})=>e instanceof tw).sort((e,t)=>{let{product:{width:i},quantity:r}=e,{product:{width:s},quantity:n}=t;return i-s||r-n}),t4=e=>e.filter(({product:e})=>e instanceof tk&&e.material===e2.pvc),t6=e=>e.filter(({product:e})=>e instanceof tk&&e.material===e2.metal),t8=e=>e.filter(({product:e})=>e instanceof t_).sort((e,t)=>{let i=[eZ.seam,eZ.cured,eZ.uncured,eZ.mechanical],{product:{width:r,type:s}}=e,{product:{width:n,type:a}}=t,o=i.indexOf(s),l=i.indexOf(a);return o-l||r-n}),t7=e=>e.filter(({product:e})=>e instanceof tx&&e.category===eJ.deck).sort((e,t)=>{let i=[eK.deck.waterBased,eK.deck.contactBonding,eK.deck.pu],{product:{quantity:r,type:s}}=e,{product:{quantity:n,type:a}}=t,o=i.indexOf(s),l=i.indexOf(a);return o-l||n-r}),t9=e=>e.filter(({product:e})=>e instanceof tx&&e.category===eJ.primer).sort((e,t)=>{let{product:{quantity:i}}=e,{product:{quantity:r}}=t;return r-i}),ie=e=>e.filter(({product:e})=>e instanceof tx&&e.category===eJ.sealants),it=e=>e.filter(({product:e})=>e instanceof tb),ii=e=>e.filter(({product:e})=>e instanceof tv),ir=(e,t)=>{let i=tD.contentContainer(),r=document.getElementById("bom-description");i.append(...r.content.cloneNode(!0).childNodes);let s=document.createElement("h3");s.style.paddingLeft="1rem",s.innerText="membranes",i.append(s);let n=document.createElement("div");for(let e of Object.values(eY))try{t.epdmCalculator.config.membrane=e;let{membranes:i}=t5(t),r=is(i,e.title);r.dataset.membraneId=e.id,n.append(r),r.addEventListener("click",()=>{t.epdmCalculator.config.membrane=e,o()})}catch{}n.addEventListener("click",e=>{let i=n.querySelectorAll(".deck-card");for(let e=0;e<i.length;e++){let r=i[e];r.dataset.membraneId===t.epdmCalculator?.config.membrane.id?r.classList.add("selected"):r.classList.remove("selected")}}),i.append(n);let a=document.createElement("div");i.append(a);let o=()=>{a.replaceChildren();let e=t5(t);for(let t in e){if("membranes"===t)continue;let i=e[t];if(i.length){let e=document.createElement("h3");e.style.paddingLeft="1rem",e.innerText=t,a.append(e)}for(let{product:e,quantity:t}of i){let i=document.createElement("div");i.classList.add("deck-card");let r=document.createElement("div"),s=document.createElement("h4");s.innerText=e.name;let n=document.createElement("p");n.innerText="add a product description here?, or add short name to product,and use name here";let o=document.createElement("p");o.innerText=e instanceof tw?`Length: ${t.toFixed(2)}m`:`Qty: ${t.toString()}`;let l=document.createElement("img");l.src=e.imageUrl,r.append(s,n,o),i.append(r,l),a.append(i)}}};e.load(i)},is=(e,t)=>{let i=document.createElement("div");i.classList.add("deck-card");let r=document.createElement("div"),s=document.createElement("h4");s.innerText=t;let n=document.createElement("ul");for(let{product:{width:t},quantity:i}of e){let e=document.createElement("li");e.innerText=`Roll Width: ${t.toFixed(2)}m, Length: ${i.toFixed(2)}m`,n.append(e)}let a=document.createElement("img");return a.src=e[0].product.imageUrl,r.append(s,n),i.append(r,a),i},ia=e=>{let t=e.steps[e.currentStep];switch(t){case eU.deckEditor:return tJ;case eU.deckSelector:return tZ;case eU.substrateSelector:return t1;case eU.membraneSelector:return t0;case eU.trimSelector:return t2;case eU.bom:return ir}},io=(e,t,i)=>{let r=i.currentStep/(i.steps.length-1),s=e.querySelector(".progress-bar .foreground");s.style.width=`${100*r}%`;let n=e.querySelector(".progress-indicator");for(let e=1;e<n.children.length;e++){let t=n.children[e];i.currentStep===e-1?t.classList.add("current"):t.classList.remove("current"),i.currentStep>e-1?t.classList.add("complete"):t.classList.remove("complete")}if(i.currentStep<=0){let e=t.getElementsByClassName("previous")[0];e.classList.add("inactive");let i=t.getElementsByClassName("next")[0];i.classList.remove("inactive")}else if(i.currentStep>0&&i.currentStep<i.steps.length-1){let e=t.getElementsByTagName("button");for(let t of e)t.classList.remove("inactive")}else{let e=t.getElementsByClassName("previous")[0];e.classList.remove("inactive");let i=t.getElementsByClassName("next")[0];i.classList.add("inactive")}};var eF=l("b4JvI"),il={};il=JSON.parse('{"frames":{"feltJoin":{"frame":{"x":0,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"gutterDrip":{"frame":{"x":133,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"houseWall":{"frame":{"x":266,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"none":{"frame":{"x":399,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"pitchRoofOff":{"frame":{"x":532,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"pitchRoofOn":{"frame":{"x":665,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"raisedKerb":{"frame":{"x":798,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}},"rubberJoin":{"frame":{"x":931,"y":0,"w":133,"h":73},"spriteSourceSize":{"x":0,"y":0,"w":133,"h":73},"sourceSize":{"w":133,"h":73},"anchor":{"x":0,"y":0}}},"meta":{"image":"spritesheet.png","format":"RGBA8888","size":{"w":1064,"h":73},"scale":1}}');var ih={};ih=new URL("spritesheet.2fa24127.png",import.meta.url).toString();const id=async()=>{let e=new URL(ih);s(il).meta.image=e.href;let t=await eP.load(s(il).meta.image);return new Promise((e,i)=>{new(0,eF.Spritesheet)(t,s(il)).parse().then(t=>e(t)).catch(e=>i(e))})};l("iNpSr"),customElements.define("stateful-loading-container",tD),(()=>{let e=!1,t=()=>{e?document.body.classList.remove("hoverable"):document.body.classList.add("hoverable")};document.addEventListener("touchstart",()=>{e=!0,t()}),document.addEventListener("mousemove",()=>{t(),e=!1}),t()})();const ic=new Event(eD.stepUpdated),iu=new tD(e=>{e.addEventListener(eD.stepUpdated,()=>{io(ip,iy,tN),ia(tN)(iu,tN)}),id().then(t=>{tN.spritesheet=t,tN.currentStep++,e.dispatchEvent(ic)}).catch(e=>console.log(e))}),ip=document.createElement("div");ip.classList.add("progress");const ig=document.createElement("div");ig.classList.add("progress-indicator"),ip.appendChild(ig);const im=document.createElement("div");im.classList.add("progress-bar"),ig.appendChild(im);const ix=document.createElement("div");for(const[e,t]of(ix.classList.add("progress-bar","foreground"),im.appendChild(ix),tN.steps.entries())){let i=document.createElement("div");i.classList.add("progress-step"),0===e&&i.classList.add("current"),i.dataset.stepName=t.progressName;let r=document.createElement("p");r.innerText=`${e+1}`,i.appendChild(r),i.addEventListener("click",()=>{e<tN.currentStep&&(tN.currentStep=e,iu.dispatchEvent(ic))}),ig.appendChild(i)}const iy=document.createElement("div");iy.classList.add("nav");const ib=document.createElement("button");ib.classList.add("previous","inactive"),ib.innerText="Previous",ib.addEventListener("click",()=>{tN.currentStep>0&&(tN.currentStep--,iu.dispatchEvent(ic))});const iv=document.createElement("button");iv.classList.add("next"),iv.innerText="Next",iv.addEventListener("click",()=>{tN.currentStep<tN.steps.length-1&&(tN.currentStep++,iu.dispatchEvent(ic))}),iy.append(ib,iv),document.getElementById("epdm-calculator")?.append(ip,iu,iy),im.style.width="0px",im.style.width=`calc(${ig.scrollWidth}px - 2ch)`,window.addEventListener("resize",()=>{im.style.width="0px",im.style.width=`calc(${ig.scrollWidth}px - 2ch)`}),window.addEventListener("message",e=>{let t=e.data.products;if(t)for(let e of Object.values(t))tN.stock.addProduct(e)});